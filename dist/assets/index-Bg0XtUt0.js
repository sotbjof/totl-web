(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function s(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(l){if(l.ep)return;l.ep=!0;const u=s(l);fetch(l.href,u)}})();function au(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function fp(i){if(Object.prototype.hasOwnProperty.call(i,"__esModule"))return i;var n=i.default;if(typeof n=="function"){var s=function o(){var l=!1;try{l=this instanceof o}catch{}return l?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};s.prototype=n.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(i).forEach(function(o){var l=Object.getOwnPropertyDescriptor(i,o);Object.defineProperty(s,o,l.get?l:{enumerable:!0,get:function(){return i[o]}})}),s}var Cl={exports:{}},ii={},Pl={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qd;function mp(){if(Qd)return Ce;Qd=1;var i=Symbol.for("react.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),w=Symbol.iterator;function k(b){return b===null||typeof b!="object"?null:(b=w&&b[w]||b["@@iterator"],typeof b=="function"?b:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,P={};function C(b,L,ee){this.props=b,this.context=L,this.refs=P,this.updater=ee||j}C.prototype.isReactComponent={},C.prototype.setState=function(b,L){if(typeof b!="object"&&typeof b!="function"&&b!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,b,L,"setState")},C.prototype.forceUpdate=function(b){this.updater.enqueueForceUpdate(this,b,"forceUpdate")};function D(){}D.prototype=C.prototype;function N(b,L,ee){this.props=b,this.context=L,this.refs=P,this.updater=ee||j}var I=N.prototype=new D;I.constructor=N,A(I,C.prototype),I.isPureReactComponent=!0;var F=Array.isArray,Z=Object.prototype.hasOwnProperty,U={current:null},Y={key:!0,ref:!0,__self:!0,__source:!0};function oe(b,L,ee){var K,he={},ce=null,ve=null;if(L!=null)for(K in L.ref!==void 0&&(ve=L.ref),L.key!==void 0&&(ce=""+L.key),L)Z.call(L,K)&&!Y.hasOwnProperty(K)&&(he[K]=L[K]);var ye=arguments.length-2;if(ye===1)he.children=ee;else if(1<ye){for(var Pe=Array(ye),Ve=0;Ve<ye;Ve++)Pe[Ve]=arguments[Ve+2];he.children=Pe}if(b&&b.defaultProps)for(K in ye=b.defaultProps,ye)he[K]===void 0&&(he[K]=ye[K]);return{$$typeof:i,type:b,key:ce,ref:ve,props:he,_owner:U.current}}function X(b,L){return{$$typeof:i,type:b.type,key:L,ref:b.ref,props:b.props,_owner:b._owner}}function ge(b){return typeof b=="object"&&b!==null&&b.$$typeof===i}function le(b){var L={"=":"=0",":":"=2"};return"$"+b.replace(/[=:]/g,function(ee){return L[ee]})}var Ee=/\/+/g;function ne(b,L){return typeof b=="object"&&b!==null&&b.key!=null?le(""+b.key):L.toString(36)}function de(b,L,ee,K,he){var ce=typeof b;(ce==="undefined"||ce==="boolean")&&(b=null);var ve=!1;if(b===null)ve=!0;else switch(ce){case"string":case"number":ve=!0;break;case"object":switch(b.$$typeof){case i:case n:ve=!0}}if(ve)return ve=b,he=he(ve),b=K===""?"."+ne(ve,0):K,F(he)?(ee="",b!=null&&(ee=b.replace(Ee,"$&/")+"/"),de(he,L,ee,"",function(Ve){return Ve})):he!=null&&(ge(he)&&(he=X(he,ee+(!he.key||ve&&ve.key===he.key?"":(""+he.key).replace(Ee,"$&/")+"/")+b)),L.push(he)),1;if(ve=0,K=K===""?".":K+":",F(b))for(var ye=0;ye<b.length;ye++){ce=b[ye];var Pe=K+ne(ce,ye);ve+=de(ce,L,ee,Pe,he)}else if(Pe=k(b),typeof Pe=="function")for(b=Pe.call(b),ye=0;!(ce=b.next()).done;)ce=ce.value,Pe=K+ne(ce,ye++),ve+=de(ce,L,ee,Pe,he);else if(ce==="object")throw L=String(b),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.");return ve}function $(b,L,ee){if(b==null)return b;var K=[],he=0;return de(b,K,"","",function(ce){return L.call(ee,ce,he++)}),K}function Q(b){if(b._status===-1){var L=b._result;L=L(),L.then(function(ee){(b._status===0||b._status===-1)&&(b._status=1,b._result=ee)},function(ee){(b._status===0||b._status===-1)&&(b._status=2,b._result=ee)}),b._status===-1&&(b._status=0,b._result=L)}if(b._status===1)return b._result.default;throw b._result}var se={current:null},M={transition:null},z={ReactCurrentDispatcher:se,ReactCurrentBatchConfig:M,ReactCurrentOwner:U};function q(){throw Error("act(...) is not supported in production builds of React.")}return Ce.Children={map:$,forEach:function(b,L,ee){$(b,function(){L.apply(this,arguments)},ee)},count:function(b){var L=0;return $(b,function(){L++}),L},toArray:function(b){return $(b,function(L){return L})||[]},only:function(b){if(!ge(b))throw Error("React.Children.only expected to receive a single React element child.");return b}},Ce.Component=C,Ce.Fragment=s,Ce.Profiler=l,Ce.PureComponent=N,Ce.StrictMode=o,Ce.Suspense=p,Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z,Ce.act=q,Ce.cloneElement=function(b,L,ee){if(b==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+b+".");var K=A({},b.props),he=b.key,ce=b.ref,ve=b._owner;if(L!=null){if(L.ref!==void 0&&(ce=L.ref,ve=U.current),L.key!==void 0&&(he=""+L.key),b.type&&b.type.defaultProps)var ye=b.type.defaultProps;for(Pe in L)Z.call(L,Pe)&&!Y.hasOwnProperty(Pe)&&(K[Pe]=L[Pe]===void 0&&ye!==void 0?ye[Pe]:L[Pe])}var Pe=arguments.length-2;if(Pe===1)K.children=ee;else if(1<Pe){ye=Array(Pe);for(var Ve=0;Ve<Pe;Ve++)ye[Ve]=arguments[Ve+2];K.children=ye}return{$$typeof:i,type:b.type,key:he,ref:ce,props:K,_owner:ve}},Ce.createContext=function(b){return b={$$typeof:h,_currentValue:b,_currentValue2:b,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},b.Provider={$$typeof:u,_context:b},b.Consumer=b},Ce.createElement=oe,Ce.createFactory=function(b){var L=oe.bind(null,b);return L.type=b,L},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(b){return{$$typeof:m,render:b}},Ce.isValidElement=ge,Ce.lazy=function(b){return{$$typeof:y,_payload:{_status:-1,_result:b},_init:Q}},Ce.memo=function(b,L){return{$$typeof:g,type:b,compare:L===void 0?null:L}},Ce.startTransition=function(b){var L=M.transition;M.transition={};try{b()}finally{M.transition=L}},Ce.unstable_act=q,Ce.useCallback=function(b,L){return se.current.useCallback(b,L)},Ce.useContext=function(b){return se.current.useContext(b)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(b){return se.current.useDeferredValue(b)},Ce.useEffect=function(b,L){return se.current.useEffect(b,L)},Ce.useId=function(){return se.current.useId()},Ce.useImperativeHandle=function(b,L,ee){return se.current.useImperativeHandle(b,L,ee)},Ce.useInsertionEffect=function(b,L){return se.current.useInsertionEffect(b,L)},Ce.useLayoutEffect=function(b,L){return se.current.useLayoutEffect(b,L)},Ce.useMemo=function(b,L){return se.current.useMemo(b,L)},Ce.useReducer=function(b,L,ee){return se.current.useReducer(b,L,ee)},Ce.useRef=function(b){return se.current.useRef(b)},Ce.useState=function(b){return se.current.useState(b)},Ce.useSyncExternalStore=function(b,L,ee){return se.current.useSyncExternalStore(b,L,ee)},Ce.useTransition=function(){return se.current.useTransition()},Ce.version="18.3.1",Ce}var Yd;function lu(){return Yd||(Yd=1,Pl.exports=mp()),Pl.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xd;function pp(){if(Xd)return ii;Xd=1;var i=lu(),n=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,l=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function h(m,p,g){var y,w={},k=null,j=null;g!==void 0&&(k=""+g),p.key!==void 0&&(k=""+p.key),p.ref!==void 0&&(j=p.ref);for(y in p)o.call(p,y)&&!u.hasOwnProperty(y)&&(w[y]=p[y]);if(m&&m.defaultProps)for(y in p=m.defaultProps,p)w[y]===void 0&&(w[y]=p[y]);return{$$typeof:n,type:m,key:k,ref:j,props:w,_owner:l.current}}return ii.Fragment=s,ii.jsx=h,ii.jsxs=h,ii}var Zd;function gp(){return Zd||(Zd=1,Cl.exports=pp()),Cl.exports}var c=gp(),_=lu();const jr=au(_);var Ro={},Tl={exports:{}},$t={},Rl={exports:{}},Ol={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eh;function vp(){return eh||(eh=1,(function(i){function n(M,z){var q=M.length;M.push(z);e:for(;0<q;){var b=q-1>>>1,L=M[b];if(0<l(L,z))M[b]=z,M[q]=L,q=b;else break e}}function s(M){return M.length===0?null:M[0]}function o(M){if(M.length===0)return null;var z=M[0],q=M.pop();if(q!==z){M[0]=q;e:for(var b=0,L=M.length,ee=L>>>1;b<ee;){var K=2*(b+1)-1,he=M[K],ce=K+1,ve=M[ce];if(0>l(he,q))ce<L&&0>l(ve,he)?(M[b]=ve,M[ce]=q,b=ce):(M[b]=he,M[K]=q,b=K);else if(ce<L&&0>l(ve,q))M[b]=ve,M[ce]=q,b=ce;else break e}}return z}function l(M,z){var q=M.sortIndex-z.sortIndex;return q!==0?q:M.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();i.unstable_now=function(){return h.now()-m}}var p=[],g=[],y=1,w=null,k=3,j=!1,A=!1,P=!1,C=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(M){for(var z=s(g);z!==null;){if(z.callback===null)o(g);else if(z.startTime<=M)o(g),z.sortIndex=z.expirationTime,n(p,z);else break;z=s(g)}}function F(M){if(P=!1,I(M),!A)if(s(p)!==null)A=!0,Q(Z);else{var z=s(g);z!==null&&se(F,z.startTime-M)}}function Z(M,z){A=!1,P&&(P=!1,D(oe),oe=-1),j=!0;var q=k;try{for(I(z),w=s(p);w!==null&&(!(w.expirationTime>z)||M&&!le());){var b=w.callback;if(typeof b=="function"){w.callback=null,k=w.priorityLevel;var L=b(w.expirationTime<=z);z=i.unstable_now(),typeof L=="function"?w.callback=L:w===s(p)&&o(p),I(z)}else o(p);w=s(p)}if(w!==null)var ee=!0;else{var K=s(g);K!==null&&se(F,K.startTime-z),ee=!1}return ee}finally{w=null,k=q,j=!1}}var U=!1,Y=null,oe=-1,X=5,ge=-1;function le(){return!(i.unstable_now()-ge<X)}function Ee(){if(Y!==null){var M=i.unstable_now();ge=M;var z=!0;try{z=Y(!0,M)}finally{z?ne():(U=!1,Y=null)}}else U=!1}var ne;if(typeof N=="function")ne=function(){N(Ee)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,$=de.port2;de.port1.onmessage=Ee,ne=function(){$.postMessage(null)}}else ne=function(){C(Ee,0)};function Q(M){Y=M,U||(U=!0,ne())}function se(M,z){oe=C(function(){M(i.unstable_now())},z)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(M){M.callback=null},i.unstable_continueExecution=function(){A||j||(A=!0,Q(Z))},i.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<M?Math.floor(1e3/M):5},i.unstable_getCurrentPriorityLevel=function(){return k},i.unstable_getFirstCallbackNode=function(){return s(p)},i.unstable_next=function(M){switch(k){case 1:case 2:case 3:var z=3;break;default:z=k}var q=k;k=z;try{return M()}finally{k=q}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(M,z){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var q=k;k=M;try{return z()}finally{k=q}},i.unstable_scheduleCallback=function(M,z,q){var b=i.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?b+q:b):q=b,M){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=q+L,M={id:y++,callback:z,priorityLevel:M,startTime:q,expirationTime:L,sortIndex:-1},q>b?(M.sortIndex=q,n(g,M),s(p)===null&&M===s(g)&&(P?(D(oe),oe=-1):P=!0,se(F,q-b))):(M.sortIndex=L,n(p,M),A||j||(A=!0,Q(Z))),M},i.unstable_shouldYield=le,i.unstable_wrapCallback=function(M){var z=k;return function(){var q=k;k=z;try{return M.apply(this,arguments)}finally{k=q}}}})(Ol)),Ol}var th;function yp(){return th||(th=1,Rl.exports=vp()),Rl.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nh;function wp(){if(nh)return $t;nh=1;var i=lu(),n=yp();function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,l={};function u(e,t){h(e,t),h(e+"Capture",t)}function h(e,t){for(l[e]=t,e=0;e<t.length;e++)o.add(t[e])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},w={};function k(e){return p.call(w,e)?!0:p.call(y,e)?!1:g.test(e)?w[e]=!0:(y[e]=!0,!1)}function j(e,t,r,a){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function A(e,t,r,a){if(t===null||typeof t>"u"||j(e,t,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function P(e,t,r,a,d,f,v){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=d,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=v}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){C[e]=new P(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];C[t]=new P(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){C[e]=new P(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){C[e]=new P(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){C[e]=new P(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){C[e]=new P(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){C[e]=new P(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){C[e]=new P(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){C[e]=new P(e,5,!1,e.toLowerCase(),null,!1,!1)});var D=/[\-:]([a-z])/g;function N(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(D,N);C[t]=new P(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(D,N);C[t]=new P(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(D,N);C[t]=new P(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){C[e]=new P(e,1,!1,e.toLowerCase(),null,!1,!1)}),C.xlinkHref=new P("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){C[e]=new P(e,1,!1,e.toLowerCase(),null,!0,!0)});function I(e,t,r,a){var d=C.hasOwnProperty(t)?C[t]:null;(d!==null?d.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(A(t,r,d,a)&&(r=null),a||d===null?k(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):d.mustUseProperty?e[d.propertyName]=r===null?d.type===3?!1:"":r:(t=d.attributeName,a=d.attributeNamespace,r===null?e.removeAttribute(t):(d=d.type,r=d===3||d===4&&r===!0?"":""+r,a?e.setAttributeNS(a,t,r):e.setAttribute(t,r))))}var F=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Z=Symbol.for("react.element"),U=Symbol.for("react.portal"),Y=Symbol.for("react.fragment"),oe=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),ge=Symbol.for("react.provider"),le=Symbol.for("react.context"),Ee=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),se=Symbol.for("react.offscreen"),M=Symbol.iterator;function z(e){return e===null||typeof e!="object"?null:(e=M&&e[M]||e["@@iterator"],typeof e=="function"?e:null)}var q=Object.assign,b;function L(e){if(b===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);b=t&&t[1]||""}return`
`+b+e}var ee=!1;function K(e,t){if(!e||ee)return"";ee=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(O){var a=O}Reflect.construct(e,[],t)}else{try{t.call()}catch(O){a=O}e.call(t.prototype)}else{try{throw Error()}catch(O){a=O}e()}}catch(O){if(O&&a&&typeof O.stack=="string"){for(var d=O.stack.split(`
`),f=a.stack.split(`
`),v=d.length-1,x=f.length-1;1<=v&&0<=x&&d[v]!==f[x];)x--;for(;1<=v&&0<=x;v--,x--)if(d[v]!==f[x]){if(v!==1||x!==1)do if(v--,x--,0>x||d[v]!==f[x]){var S=`
`+d[v].replace(" at new "," at ");return e.displayName&&S.includes("<anonymous>")&&(S=S.replace("<anonymous>",e.displayName)),S}while(1<=v&&0<=x);break}}}finally{ee=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?L(e):""}function he(e){switch(e.tag){case 5:return L(e.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return e=K(e.type,!1),e;case 11:return e=K(e.type.render,!1),e;case 1:return e=K(e.type,!0),e;default:return""}}function ce(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Y:return"Fragment";case U:return"Portal";case X:return"Profiler";case oe:return"StrictMode";case ne:return"Suspense";case de:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case le:return(e.displayName||"Context")+".Consumer";case ge:return(e._context.displayName||"Context")+".Provider";case Ee:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case $:return t=e.displayName||null,t!==null?t:ce(e.type)||"Memo";case Q:t=e._payload,e=e._init;try{return ce(e(t))}catch{}}return null}function ve(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(t);case 8:return t===oe?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ye(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Pe(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ve(e){var t=Pe(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var d=r.get,f=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(v){a=""+v,f.call(this,v)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ut(e){e._valueTracker||(e._valueTracker=Ve(e))}function Ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return e&&(a=Pe(e)?e.checked?"true":"false":e.value),e=a,e!==r?(t.setValue(e),!0):!1}function Se(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Me(e,t){var r=t.checked;return q({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function We(e,t){var r=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;r=ye(t.value!=null?t.value:r),e._wrapperState={initialChecked:a,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function et(e,t){t=t.checked,t!=null&&I(e,"checked",t,!1)}function He(e,t){et(e,t);var r=ye(t.value),a=t.type;if(r!=null)a==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?nt(e,t.type,r):t.hasOwnProperty("defaultValue")&&nt(e,t.type,ye(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function yt(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function nt(e,t,r){(t!=="number"||Se(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Nt=Array.isArray;function wn(e,t,r,a){if(e=e.options,t){t={};for(var d=0;d<r.length;d++)t["$"+r[d]]=!0;for(r=0;r<e.length;r++)d=t.hasOwnProperty("$"+e[r].value),e[r].selected!==d&&(e[r].selected=d),d&&a&&(e[r].defaultSelected=!0)}else{for(r=""+ye(r),t=null,d=0;d<e.length;d++){if(e[d].value===r){e[d].selected=!0,a&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function or(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(s(91));return q({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function _s(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(s(92));if(Nt(r)){if(1<r.length)throw Error(s(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ye(r)}}function Tr(e,t){var r=ye(t.value),a=ye(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),a!=null&&(e.defaultValue=""+a)}function Rr(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Or(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ar(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Or(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var An,xi=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,a,d){MSApp.execUnsafeLocalFunction(function(){return e(t,r,a,d)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(An=An||document.createElement("div"),An.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=An.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ar(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var xn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_i=["Webkit","ms","Moz","O"];Object.keys(xn).forEach(function(e){_i.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),xn[t]=xn[e]})});function bi(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||xn.hasOwnProperty(e)&&xn[e]?(""+t).trim():t+"px"}function ki(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var a=r.indexOf("--")===0,d=bi(r,t[r],a);r==="float"&&(r="cssFloat"),a?e.setProperty(r,d):e[r]=d}}var Si=q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bs(e,t){if(t){if(Si[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(s(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(s(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(t.style!=null&&typeof t.style!="object")throw Error(s(62))}}function lr(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ks=null;function Ss(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var js=null,B=null,we=null;function _e(e){if(e=Hs(e)){if(typeof js!="function")throw Error(s(280));var t=e.stateNode;t&&(t=qi(t),js(e.stateNode,e.type,t))}}function Re(e){B?we?we.push(e):we=[e]:B=e}function ke(){if(B){var e=B,t=we;if(we=B=null,_e(e),t)for(e=0;e<t.length;e++)_e(t[e])}}function Ae(e,t){return e(t)}function ot(){}var Ne=!1;function Te(e,t,r){if(Ne)return e(t,r);Ne=!0;try{return Ae(e,t,r)}finally{Ne=!1,(B!==null||we!==null)&&(ot(),ke())}}function Ie(e,t){var r=e.stateNode;if(r===null)return null;var a=qi(r);if(a===null)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(s(231,t,typeof r));return r}var Fe=!1;if(m)try{var Ke={};Object.defineProperty(Ke,"passive",{get:function(){Fe=!0}}),window.addEventListener("test",Ke,Ke),window.removeEventListener("test",Ke,Ke)}catch{Fe=!1}function Yt(e,t,r,a,d,f,v,x,S){var O=Array.prototype.slice.call(arguments,3);try{t.apply(r,O)}catch(H){this.onError(H)}}var Ct=!1,hn=null,xe=!1,De=null,Je={onError:function(e){Ct=!0,hn=e}};function ft(e,t,r,a,d,f,v,x,S){Ct=!1,hn=null,Yt.apply(Je,arguments)}function $e(e,t,r,a,d,f,v,x,S){if(ft.apply(this,arguments),Ct){if(Ct){var O=hn;Ct=!1,hn=null}else throw Error(s(198));xe||(xe=!0,De=O)}}function wt(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Ln(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function bt(e){if(wt(e)!==e)throw Error(s(188))}function ur(e){var t=e.alternate;if(!t){if(t=wt(e),t===null)throw Error(s(188));return t!==e?null:e}for(var r=e,a=t;;){var d=r.return;if(d===null)break;var f=d.alternate;if(f===null){if(a=d.return,a!==null){r=a;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===r)return bt(d),e;if(f===a)return bt(d),t;f=f.sibling}throw Error(s(188))}if(r.return!==a.return)r=d,a=f;else{for(var v=!1,x=d.child;x;){if(x===r){v=!0,r=d,a=f;break}if(x===a){v=!0,a=d,r=f;break}x=x.sibling}if(!v){for(x=f.child;x;){if(x===r){v=!0,r=f,a=d;break}if(x===a){v=!0,a=f,r=d;break}x=x.sibling}if(!v)throw Error(s(189))}}if(r.alternate!==a)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?e:t}function _u(e){return e=ur(e),e!==null?bu(e):null}function bu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=bu(e);if(t!==null)return t;e=e.sibling}return null}var ku=n.unstable_scheduleCallback,Su=n.unstable_cancelCallback,Sf=n.unstable_shouldYield,jf=n.unstable_requestPaint,rt=n.unstable_now,Ef=n.unstable_getCurrentPriorityLevel,Ko=n.unstable_ImmediatePriority,ju=n.unstable_UserBlockingPriority,ji=n.unstable_NormalPriority,Nf=n.unstable_LowPriority,Eu=n.unstable_IdlePriority,Ei=null,fn=null;function Cf(e){if(fn&&typeof fn.onCommitFiberRoot=="function")try{fn.onCommitFiberRoot(Ei,e,void 0,(e.current.flags&128)===128)}catch{}}var Xt=Math.clz32?Math.clz32:Rf,Pf=Math.log,Tf=Math.LN2;function Rf(e){return e>>>=0,e===0?32:31-(Pf(e)/Tf|0)|0}var Ni=64,Ci=4194304;function Es(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Pi(e,t){var r=e.pendingLanes;if(r===0)return 0;var a=0,d=e.suspendedLanes,f=e.pingedLanes,v=r&268435455;if(v!==0){var x=v&~d;x!==0?a=Es(x):(f&=v,f!==0&&(a=Es(f)))}else v=r&~d,v!==0?a=Es(v):f!==0&&(a=Es(f));if(a===0)return 0;if(t!==0&&t!==a&&(t&d)===0&&(d=a&-a,f=t&-t,d>=f||d===16&&(f&4194240)!==0))return t;if((a&4)!==0&&(a|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)r=31-Xt(t),d=1<<r,a|=e[r],t&=~d;return a}function Of(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Af(e,t){for(var r=e.suspendedLanes,a=e.pingedLanes,d=e.expirationTimes,f=e.pendingLanes;0<f;){var v=31-Xt(f),x=1<<v,S=d[v];S===-1?((x&r)===0||(x&a)!==0)&&(d[v]=Of(x,t)):S<=t&&(e.expiredLanes|=x),f&=~x}}function Jo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Nu(){var e=Ni;return Ni<<=1,(Ni&4194240)===0&&(Ni=64),e}function Qo(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ns(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Xt(t),e[t]=r}function Lf(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<r;){var d=31-Xt(r),f=1<<d;t[d]=0,a[d]=-1,e[d]=-1,r&=~f}}function Yo(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var a=31-Xt(r),d=1<<a;d&t|e[a]&t&&(e[a]|=t),r&=~d}}var Ue=0;function Cu(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Pu,Xo,Tu,Ru,Ou,Zo=!1,Ti=[],In=null,$n=null,Dn=null,Cs=new Map,Ps=new Map,Un=[],If="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Au(e,t){switch(e){case"focusin":case"focusout":In=null;break;case"dragenter":case"dragleave":$n=null;break;case"mouseover":case"mouseout":Dn=null;break;case"pointerover":case"pointerout":Cs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ps.delete(t.pointerId)}}function Ts(e,t,r,a,d,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:r,eventSystemFlags:a,nativeEvent:f,targetContainers:[d]},t!==null&&(t=Hs(t),t!==null&&Xo(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function $f(e,t,r,a,d){switch(t){case"focusin":return In=Ts(In,e,t,r,a,d),!0;case"dragenter":return $n=Ts($n,e,t,r,a,d),!0;case"mouseover":return Dn=Ts(Dn,e,t,r,a,d),!0;case"pointerover":var f=d.pointerId;return Cs.set(f,Ts(Cs.get(f)||null,e,t,r,a,d)),!0;case"gotpointercapture":return f=d.pointerId,Ps.set(f,Ts(Ps.get(f)||null,e,t,r,a,d)),!0}return!1}function Lu(e){var t=cr(e.target);if(t!==null){var r=wt(t);if(r!==null){if(t=r.tag,t===13){if(t=Ln(r),t!==null){e.blockedOn=t,Ou(e.priority,function(){Tu(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ri(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=ta(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var a=new r.constructor(r.type,r);ks=a,r.target.dispatchEvent(a),ks=null}else return t=Hs(r),t!==null&&Xo(t),e.blockedOn=r,!1;t.shift()}return!0}function Iu(e,t,r){Ri(e)&&r.delete(t)}function Df(){Zo=!1,In!==null&&Ri(In)&&(In=null),$n!==null&&Ri($n)&&($n=null),Dn!==null&&Ri(Dn)&&(Dn=null),Cs.forEach(Iu),Ps.forEach(Iu)}function Rs(e,t){e.blockedOn===t&&(e.blockedOn=null,Zo||(Zo=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Df)))}function Os(e){function t(d){return Rs(d,e)}if(0<Ti.length){Rs(Ti[0],e);for(var r=1;r<Ti.length;r++){var a=Ti[r];a.blockedOn===e&&(a.blockedOn=null)}}for(In!==null&&Rs(In,e),$n!==null&&Rs($n,e),Dn!==null&&Rs(Dn,e),Cs.forEach(t),Ps.forEach(t),r=0;r<Un.length;r++)a=Un[r],a.blockedOn===e&&(a.blockedOn=null);for(;0<Un.length&&(r=Un[0],r.blockedOn===null);)Lu(r),r.blockedOn===null&&Un.shift()}var Lr=F.ReactCurrentBatchConfig,Oi=!0;function Uf(e,t,r,a){var d=Ue,f=Lr.transition;Lr.transition=null;try{Ue=1,ea(e,t,r,a)}finally{Ue=d,Lr.transition=f}}function Mf(e,t,r,a){var d=Ue,f=Lr.transition;Lr.transition=null;try{Ue=4,ea(e,t,r,a)}finally{Ue=d,Lr.transition=f}}function ea(e,t,r,a){if(Oi){var d=ta(e,t,r,a);if(d===null)ya(e,t,a,Ai,r),Au(e,a);else if($f(d,e,t,r,a))a.stopPropagation();else if(Au(e,a),t&4&&-1<If.indexOf(e)){for(;d!==null;){var f=Hs(d);if(f!==null&&Pu(f),f=ta(e,t,r,a),f===null&&ya(e,t,a,Ai,r),f===d)break;d=f}d!==null&&a.stopPropagation()}else ya(e,t,a,null,r)}}var Ai=null;function ta(e,t,r,a){if(Ai=null,e=Ss(a),e=cr(e),e!==null)if(t=wt(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Ln(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ai=e,null}function $u(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ef()){case Ko:return 1;case ju:return 4;case ji:case Nf:return 16;case Eu:return 536870912;default:return 16}default:return 16}}var Mn=null,na=null,Li=null;function Du(){if(Li)return Li;var e,t=na,r=t.length,a,d="value"in Mn?Mn.value:Mn.textContent,f=d.length;for(e=0;e<r&&t[e]===d[e];e++);var v=r-e;for(a=1;a<=v&&t[r-a]===d[f-a];a++);return Li=d.slice(e,1<a?1-a:void 0)}function Ii(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function $i(){return!0}function Uu(){return!1}function Mt(e){function t(r,a,d,f,v){this._reactName=r,this._targetInst=d,this.type=a,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var x in e)e.hasOwnProperty(x)&&(r=e[x],this[x]=r?r(f):f[x]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?$i:Uu,this.isPropagationStopped=Uu,this}return q(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=$i)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=$i)},persist:function(){},isPersistent:$i}),t}var Ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ra=Mt(Ir),As=q({},Ir,{view:0,detail:0}),Ff=Mt(As),sa,ia,Ls,Di=q({},As,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:aa,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ls&&(Ls&&e.type==="mousemove"?(sa=e.screenX-Ls.screenX,ia=e.screenY-Ls.screenY):ia=sa=0,Ls=e),sa)},movementY:function(e){return"movementY"in e?e.movementY:ia}}),Mu=Mt(Di),zf=q({},Di,{dataTransfer:0}),Bf=Mt(zf),Wf=q({},As,{relatedTarget:0}),oa=Mt(Wf),Hf=q({},Ir,{animationName:0,elapsedTime:0,pseudoElement:0}),qf=Mt(Hf),Gf=q({},Ir,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Vf=Mt(Gf),Kf=q({},Ir,{data:0}),Fu=Mt(Kf),Jf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xf(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Yf[e])?!!t[e]:!1}function aa(){return Xf}var Zf=q({},As,{key:function(e){if(e.key){var t=Jf[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ii(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Qf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:aa,charCode:function(e){return e.type==="keypress"?Ii(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ii(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),em=Mt(Zf),tm=q({},Di,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zu=Mt(tm),nm=q({},As,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:aa}),rm=Mt(nm),sm=q({},Ir,{propertyName:0,elapsedTime:0,pseudoElement:0}),im=Mt(sm),om=q({},Di,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),am=Mt(om),lm=[9,13,27,32],la=m&&"CompositionEvent"in window,Is=null;m&&"documentMode"in document&&(Is=document.documentMode);var um=m&&"TextEvent"in window&&!Is,Bu=m&&(!la||Is&&8<Is&&11>=Is),Wu=" ",Hu=!1;function qu(e,t){switch(e){case"keyup":return lm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $r=!1;function cm(e,t){switch(e){case"compositionend":return Gu(t);case"keypress":return t.which!==32?null:(Hu=!0,Wu);case"textInput":return e=t.data,e===Wu&&Hu?null:e;default:return null}}function dm(e,t){if($r)return e==="compositionend"||!la&&qu(e,t)?(e=Du(),Li=na=Mn=null,$r=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bu&&t.locale!=="ko"?null:t.data;default:return null}}var hm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!hm[e.type]:t==="textarea"}function Ku(e,t,r,a){Re(a),t=Bi(t,"onChange"),0<t.length&&(r=new ra("onChange","change",null,r,a),e.push({event:r,listeners:t}))}var $s=null,Ds=null;function fm(e){hc(e,0)}function Ui(e){var t=zr(e);if(Ht(t))return e}function mm(e,t){if(e==="change")return t}var Ju=!1;if(m){var ua;if(m){var ca="oninput"in document;if(!ca){var Qu=document.createElement("div");Qu.setAttribute("oninput","return;"),ca=typeof Qu.oninput=="function"}ua=ca}else ua=!1;Ju=ua&&(!document.documentMode||9<document.documentMode)}function Yu(){$s&&($s.detachEvent("onpropertychange",Xu),Ds=$s=null)}function Xu(e){if(e.propertyName==="value"&&Ui(Ds)){var t=[];Ku(t,Ds,e,Ss(e)),Te(fm,t)}}function pm(e,t,r){e==="focusin"?(Yu(),$s=t,Ds=r,$s.attachEvent("onpropertychange",Xu)):e==="focusout"&&Yu()}function gm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ui(Ds)}function vm(e,t){if(e==="click")return Ui(t)}function ym(e,t){if(e==="input"||e==="change")return Ui(t)}function wm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Zt=typeof Object.is=="function"?Object.is:wm;function Us(e,t){if(Zt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var d=r[a];if(!p.call(t,d)||!Zt(e[d],t[d]))return!1}return!0}function Zu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ec(e,t){var r=Zu(e);e=0;for(var a;r;){if(r.nodeType===3){if(a=e+r.textContent.length,e<=t&&a>=t)return{node:r,offset:t-e};e=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Zu(r)}}function tc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?tc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function nc(){for(var e=window,t=Se();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Se(e.document)}return t}function da(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function xm(e){var t=nc(),r=e.focusedElem,a=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&tc(r.ownerDocument.documentElement,r)){if(a!==null&&da(r)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var d=r.textContent.length,f=Math.min(a.start,d);a=a.end===void 0?f:Math.min(a.end,d),!e.extend&&f>a&&(d=a,a=f,f=d),d=ec(r,f);var v=ec(r,a);d&&v&&(e.rangeCount!==1||e.anchorNode!==d.node||e.anchorOffset!==d.offset||e.focusNode!==v.node||e.focusOffset!==v.offset)&&(t=t.createRange(),t.setStart(d.node,d.offset),e.removeAllRanges(),f>a?(e.addRange(t),e.extend(v.node,v.offset)):(t.setEnd(v.node,v.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var _m=m&&"documentMode"in document&&11>=document.documentMode,Dr=null,ha=null,Ms=null,fa=!1;function rc(e,t,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;fa||Dr==null||Dr!==Se(a)||(a=Dr,"selectionStart"in a&&da(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Ms&&Us(Ms,a)||(Ms=a,a=Bi(ha,"onSelect"),0<a.length&&(t=new ra("onSelect","select",null,t,r),e.push({event:t,listeners:a}),t.target=Dr)))}function Mi(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ur={animationend:Mi("Animation","AnimationEnd"),animationiteration:Mi("Animation","AnimationIteration"),animationstart:Mi("Animation","AnimationStart"),transitionend:Mi("Transition","TransitionEnd")},ma={},sc={};m&&(sc=document.createElement("div").style,"AnimationEvent"in window||(delete Ur.animationend.animation,delete Ur.animationiteration.animation,delete Ur.animationstart.animation),"TransitionEvent"in window||delete Ur.transitionend.transition);function Fi(e){if(ma[e])return ma[e];if(!Ur[e])return e;var t=Ur[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in sc)return ma[e]=t[r];return e}var ic=Fi("animationend"),oc=Fi("animationiteration"),ac=Fi("animationstart"),lc=Fi("transitionend"),uc=new Map,cc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fn(e,t){uc.set(e,t),u(t,[e])}for(var pa=0;pa<cc.length;pa++){var ga=cc[pa],bm=ga.toLowerCase(),km=ga[0].toUpperCase()+ga.slice(1);Fn(bm,"on"+km)}Fn(ic,"onAnimationEnd"),Fn(oc,"onAnimationIteration"),Fn(ac,"onAnimationStart"),Fn("dblclick","onDoubleClick"),Fn("focusin","onFocus"),Fn("focusout","onBlur"),Fn(lc,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sm=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fs));function dc(e,t,r){var a=e.type||"unknown-event";e.currentTarget=r,$e(a,t,void 0,e),e.currentTarget=null}function hc(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var a=e[r],d=a.event;a=a.listeners;e:{var f=void 0;if(t)for(var v=a.length-1;0<=v;v--){var x=a[v],S=x.instance,O=x.currentTarget;if(x=x.listener,S!==f&&d.isPropagationStopped())break e;dc(d,x,O),f=S}else for(v=0;v<a.length;v++){if(x=a[v],S=x.instance,O=x.currentTarget,x=x.listener,S!==f&&d.isPropagationStopped())break e;dc(d,x,O),f=S}}}if(xe)throw e=De,xe=!1,De=null,e}function qe(e,t){var r=t[Sa];r===void 0&&(r=t[Sa]=new Set);var a=e+"__bubble";r.has(a)||(fc(t,e,2,!1),r.add(a))}function va(e,t,r){var a=0;t&&(a|=4),fc(r,e,a,t)}var zi="_reactListening"+Math.random().toString(36).slice(2);function zs(e){if(!e[zi]){e[zi]=!0,o.forEach(function(r){r!=="selectionchange"&&(Sm.has(r)||va(r,!1,e),va(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[zi]||(t[zi]=!0,va("selectionchange",!1,t))}}function fc(e,t,r,a){switch($u(t)){case 1:var d=Uf;break;case 4:d=Mf;break;default:d=ea}r=d.bind(null,t,r,e),d=void 0,!Fe||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),a?d!==void 0?e.addEventListener(t,r,{capture:!0,passive:d}):e.addEventListener(t,r,!0):d!==void 0?e.addEventListener(t,r,{passive:d}):e.addEventListener(t,r,!1)}function ya(e,t,r,a,d){var f=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var v=a.tag;if(v===3||v===4){var x=a.stateNode.containerInfo;if(x===d||x.nodeType===8&&x.parentNode===d)break;if(v===4)for(v=a.return;v!==null;){var S=v.tag;if((S===3||S===4)&&(S=v.stateNode.containerInfo,S===d||S.nodeType===8&&S.parentNode===d))return;v=v.return}for(;x!==null;){if(v=cr(x),v===null)return;if(S=v.tag,S===5||S===6){a=f=v;continue e}x=x.parentNode}}a=a.return}Te(function(){var O=f,H=Ss(r),G=[];e:{var W=uc.get(e);if(W!==void 0){var te=ra,ie=e;switch(e){case"keypress":if(Ii(r)===0)break e;case"keydown":case"keyup":te=em;break;case"focusin":ie="focus",te=oa;break;case"focusout":ie="blur",te=oa;break;case"beforeblur":case"afterblur":te=oa;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=Mu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=Bf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=rm;break;case ic:case oc:case ac:te=qf;break;case lc:te=im;break;case"scroll":te=Ff;break;case"wheel":te=am;break;case"copy":case"cut":case"paste":te=Vf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=zu}var ae=(t&4)!==0,st=!ae&&e==="scroll",T=ae?W!==null?W+"Capture":null:W;ae=[];for(var E=O,R;E!==null;){R=E;var V=R.stateNode;if(R.tag===5&&V!==null&&(R=V,T!==null&&(V=Ie(E,T),V!=null&&ae.push(Bs(E,V,R)))),st)break;E=E.return}0<ae.length&&(W=new te(W,ie,null,r,H),G.push({event:W,listeners:ae}))}}if((t&7)===0){e:{if(W=e==="mouseover"||e==="pointerover",te=e==="mouseout"||e==="pointerout",W&&r!==ks&&(ie=r.relatedTarget||r.fromElement)&&(cr(ie)||ie[_n]))break e;if((te||W)&&(W=H.window===H?H:(W=H.ownerDocument)?W.defaultView||W.parentWindow:window,te?(ie=r.relatedTarget||r.toElement,te=O,ie=ie?cr(ie):null,ie!==null&&(st=wt(ie),ie!==st||ie.tag!==5&&ie.tag!==6)&&(ie=null)):(te=null,ie=O),te!==ie)){if(ae=Mu,V="onMouseLeave",T="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(ae=zu,V="onPointerLeave",T="onPointerEnter",E="pointer"),st=te==null?W:zr(te),R=ie==null?W:zr(ie),W=new ae(V,E+"leave",te,r,H),W.target=st,W.relatedTarget=R,V=null,cr(H)===O&&(ae=new ae(T,E+"enter",ie,r,H),ae.target=R,ae.relatedTarget=st,V=ae),st=V,te&&ie)t:{for(ae=te,T=ie,E=0,R=ae;R;R=Mr(R))E++;for(R=0,V=T;V;V=Mr(V))R++;for(;0<E-R;)ae=Mr(ae),E--;for(;0<R-E;)T=Mr(T),R--;for(;E--;){if(ae===T||T!==null&&ae===T.alternate)break t;ae=Mr(ae),T=Mr(T)}ae=null}else ae=null;te!==null&&mc(G,W,te,ae,!1),ie!==null&&st!==null&&mc(G,st,ie,ae,!0)}}e:{if(W=O?zr(O):window,te=W.nodeName&&W.nodeName.toLowerCase(),te==="select"||te==="input"&&W.type==="file")var ue=mm;else if(Vu(W))if(Ju)ue=ym;else{ue=gm;var fe=pm}else(te=W.nodeName)&&te.toLowerCase()==="input"&&(W.type==="checkbox"||W.type==="radio")&&(ue=vm);if(ue&&(ue=ue(e,O))){Ku(G,ue,r,H);break e}fe&&fe(e,W,O),e==="focusout"&&(fe=W._wrapperState)&&fe.controlled&&W.type==="number"&&nt(W,"number",W.value)}switch(fe=O?zr(O):window,e){case"focusin":(Vu(fe)||fe.contentEditable==="true")&&(Dr=fe,ha=O,Ms=null);break;case"focusout":Ms=ha=Dr=null;break;case"mousedown":fa=!0;break;case"contextmenu":case"mouseup":case"dragend":fa=!1,rc(G,r,H);break;case"selectionchange":if(_m)break;case"keydown":case"keyup":rc(G,r,H)}var me;if(la)e:{switch(e){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else $r?qu(e,r)&&(be="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(be="onCompositionStart");be&&(Bu&&r.locale!=="ko"&&($r||be!=="onCompositionStart"?be==="onCompositionEnd"&&$r&&(me=Du()):(Mn=H,na="value"in Mn?Mn.value:Mn.textContent,$r=!0)),fe=Bi(O,be),0<fe.length&&(be=new Fu(be,e,null,r,H),G.push({event:be,listeners:fe}),me?be.data=me:(me=Gu(r),me!==null&&(be.data=me)))),(me=um?cm(e,r):dm(e,r))&&(O=Bi(O,"onBeforeInput"),0<O.length&&(H=new Fu("onBeforeInput","beforeinput",null,r,H),G.push({event:H,listeners:O}),H.data=me))}hc(G,t)})}function Bs(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Bi(e,t){for(var r=t+"Capture",a=[];e!==null;){var d=e,f=d.stateNode;d.tag===5&&f!==null&&(d=f,f=Ie(e,r),f!=null&&a.unshift(Bs(e,f,d)),f=Ie(e,t),f!=null&&a.push(Bs(e,f,d))),e=e.return}return a}function Mr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function mc(e,t,r,a,d){for(var f=t._reactName,v=[];r!==null&&r!==a;){var x=r,S=x.alternate,O=x.stateNode;if(S!==null&&S===a)break;x.tag===5&&O!==null&&(x=O,d?(S=Ie(r,f),S!=null&&v.unshift(Bs(r,S,x))):d||(S=Ie(r,f),S!=null&&v.push(Bs(r,S,x)))),r=r.return}v.length!==0&&e.push({event:t,listeners:v})}var jm=/\r\n?/g,Em=/\u0000|\uFFFD/g;function pc(e){return(typeof e=="string"?e:""+e).replace(jm,`
`).replace(Em,"")}function Wi(e,t,r){if(t=pc(t),pc(e)!==t&&r)throw Error(s(425))}function Hi(){}var wa=null,xa=null;function _a(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ba=typeof setTimeout=="function"?setTimeout:void 0,Nm=typeof clearTimeout=="function"?clearTimeout:void 0,gc=typeof Promise=="function"?Promise:void 0,Cm=typeof queueMicrotask=="function"?queueMicrotask:typeof gc<"u"?function(e){return gc.resolve(null).then(e).catch(Pm)}:ba;function Pm(e){setTimeout(function(){throw e})}function ka(e,t){var r=t,a=0;do{var d=r.nextSibling;if(e.removeChild(r),d&&d.nodeType===8)if(r=d.data,r==="/$"){if(a===0){e.removeChild(d),Os(t);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=d}while(r);Os(t)}function zn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function vc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Fr=Math.random().toString(36).slice(2),mn="__reactFiber$"+Fr,Ws="__reactProps$"+Fr,_n="__reactContainer$"+Fr,Sa="__reactEvents$"+Fr,Tm="__reactListeners$"+Fr,Rm="__reactHandles$"+Fr;function cr(e){var t=e[mn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[_n]||r[mn]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=vc(e);e!==null;){if(r=e[mn])return r;e=vc(e)}return t}e=r,r=e.parentNode}return null}function Hs(e){return e=e[mn]||e[_n],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function zr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(s(33))}function qi(e){return e[Ws]||null}var ja=[],Br=-1;function Bn(e){return{current:e}}function Ge(e){0>Br||(e.current=ja[Br],ja[Br]=null,Br--)}function ze(e,t){Br++,ja[Br]=e.current,e.current=t}var Wn={},kt=Bn(Wn),Rt=Bn(!1),dr=Wn;function Wr(e,t){var r=e.type.contextTypes;if(!r)return Wn;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var d={},f;for(f in r)d[f]=t[f];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=d),d}function Ot(e){return e=e.childContextTypes,e!=null}function Gi(){Ge(Rt),Ge(kt)}function yc(e,t,r){if(kt.current!==Wn)throw Error(s(168));ze(kt,t),ze(Rt,r)}function wc(e,t,r){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var d in a)if(!(d in t))throw Error(s(108,ve(e)||"Unknown",d));return q({},r,a)}function Vi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Wn,dr=kt.current,ze(kt,e),ze(Rt,Rt.current),!0}function xc(e,t,r){var a=e.stateNode;if(!a)throw Error(s(169));r?(e=wc(e,t,dr),a.__reactInternalMemoizedMergedChildContext=e,Ge(Rt),Ge(kt),ze(kt,e)):Ge(Rt),ze(Rt,r)}var bn=null,Ki=!1,Ea=!1;function _c(e){bn===null?bn=[e]:bn.push(e)}function Om(e){Ki=!0,_c(e)}function Hn(){if(!Ea&&bn!==null){Ea=!0;var e=0,t=Ue;try{var r=bn;for(Ue=1;e<r.length;e++){var a=r[e];do a=a(!0);while(a!==null)}bn=null,Ki=!1}catch(d){throw bn!==null&&(bn=bn.slice(e+1)),ku(Ko,Hn),d}finally{Ue=t,Ea=!1}}return null}var Hr=[],qr=0,Ji=null,Qi=0,qt=[],Gt=0,hr=null,kn=1,Sn="";function fr(e,t){Hr[qr++]=Qi,Hr[qr++]=Ji,Ji=e,Qi=t}function bc(e,t,r){qt[Gt++]=kn,qt[Gt++]=Sn,qt[Gt++]=hr,hr=e;var a=kn;e=Sn;var d=32-Xt(a)-1;a&=~(1<<d),r+=1;var f=32-Xt(t)+d;if(30<f){var v=d-d%5;f=(a&(1<<v)-1).toString(32),a>>=v,d-=v,kn=1<<32-Xt(t)+d|r<<d|a,Sn=f+e}else kn=1<<f|r<<d|a,Sn=e}function Na(e){e.return!==null&&(fr(e,1),bc(e,1,0))}function Ca(e){for(;e===Ji;)Ji=Hr[--qr],Hr[qr]=null,Qi=Hr[--qr],Hr[qr]=null;for(;e===hr;)hr=qt[--Gt],qt[Gt]=null,Sn=qt[--Gt],qt[Gt]=null,kn=qt[--Gt],qt[Gt]=null}var Ft=null,zt=null,Qe=!1,en=null;function kc(e,t){var r=Qt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Sc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ft=e,zt=zn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ft=e,zt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=hr!==null?{id:kn,overflow:Sn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Qt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ft=e,zt=null,!0):!1;default:return!1}}function Pa(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ta(e){if(Qe){var t=zt;if(t){var r=t;if(!Sc(e,t)){if(Pa(e))throw Error(s(418));t=zn(r.nextSibling);var a=Ft;t&&Sc(e,t)?kc(a,r):(e.flags=e.flags&-4097|2,Qe=!1,Ft=e)}}else{if(Pa(e))throw Error(s(418));e.flags=e.flags&-4097|2,Qe=!1,Ft=e}}}function jc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ft=e}function Yi(e){if(e!==Ft)return!1;if(!Qe)return jc(e),Qe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!_a(e.type,e.memoizedProps)),t&&(t=zt)){if(Pa(e))throw Ec(),Error(s(418));for(;t;)kc(e,t),t=zn(t.nextSibling)}if(jc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){zt=zn(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}zt=null}}else zt=Ft?zn(e.stateNode.nextSibling):null;return!0}function Ec(){for(var e=zt;e;)e=zn(e.nextSibling)}function Gr(){zt=Ft=null,Qe=!1}function Ra(e){en===null?en=[e]:en.push(e)}var Am=F.ReactCurrentBatchConfig;function qs(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(s(309));var a=r.stateNode}if(!a)throw Error(s(147,e));var d=a,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(v){var x=d.refs;v===null?delete x[f]:x[f]=v},t._stringRef=f,t)}if(typeof e!="string")throw Error(s(284));if(!r._owner)throw Error(s(290,e))}return e}function Xi(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Nc(e){var t=e._init;return t(e._payload)}function Cc(e){function t(T,E){if(e){var R=T.deletions;R===null?(T.deletions=[E],T.flags|=16):R.push(E)}}function r(T,E){if(!e)return null;for(;E!==null;)t(T,E),E=E.sibling;return null}function a(T,E){for(T=new Map;E!==null;)E.key!==null?T.set(E.key,E):T.set(E.index,E),E=E.sibling;return T}function d(T,E){return T=Xn(T,E),T.index=0,T.sibling=null,T}function f(T,E,R){return T.index=R,e?(R=T.alternate,R!==null?(R=R.index,R<E?(T.flags|=2,E):R):(T.flags|=2,E)):(T.flags|=1048576,E)}function v(T){return e&&T.alternate===null&&(T.flags|=2),T}function x(T,E,R,V){return E===null||E.tag!==6?(E=bl(R,T.mode,V),E.return=T,E):(E=d(E,R),E.return=T,E)}function S(T,E,R,V){var ue=R.type;return ue===Y?H(T,E,R.props.children,V,R.key):E!==null&&(E.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===Q&&Nc(ue)===E.type)?(V=d(E,R.props),V.ref=qs(T,E,R),V.return=T,V):(V=ko(R.type,R.key,R.props,null,T.mode,V),V.ref=qs(T,E,R),V.return=T,V)}function O(T,E,R,V){return E===null||E.tag!==4||E.stateNode.containerInfo!==R.containerInfo||E.stateNode.implementation!==R.implementation?(E=kl(R,T.mode,V),E.return=T,E):(E=d(E,R.children||[]),E.return=T,E)}function H(T,E,R,V,ue){return E===null||E.tag!==7?(E=_r(R,T.mode,V,ue),E.return=T,E):(E=d(E,R),E.return=T,E)}function G(T,E,R){if(typeof E=="string"&&E!==""||typeof E=="number")return E=bl(""+E,T.mode,R),E.return=T,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Z:return R=ko(E.type,E.key,E.props,null,T.mode,R),R.ref=qs(T,null,E),R.return=T,R;case U:return E=kl(E,T.mode,R),E.return=T,E;case Q:var V=E._init;return G(T,V(E._payload),R)}if(Nt(E)||z(E))return E=_r(E,T.mode,R,null),E.return=T,E;Xi(T,E)}return null}function W(T,E,R,V){var ue=E!==null?E.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return ue!==null?null:x(T,E,""+R,V);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Z:return R.key===ue?S(T,E,R,V):null;case U:return R.key===ue?O(T,E,R,V):null;case Q:return ue=R._init,W(T,E,ue(R._payload),V)}if(Nt(R)||z(R))return ue!==null?null:H(T,E,R,V,null);Xi(T,R)}return null}function te(T,E,R,V,ue){if(typeof V=="string"&&V!==""||typeof V=="number")return T=T.get(R)||null,x(E,T,""+V,ue);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Z:return T=T.get(V.key===null?R:V.key)||null,S(E,T,V,ue);case U:return T=T.get(V.key===null?R:V.key)||null,O(E,T,V,ue);case Q:var fe=V._init;return te(T,E,R,fe(V._payload),ue)}if(Nt(V)||z(V))return T=T.get(R)||null,H(E,T,V,ue,null);Xi(E,V)}return null}function ie(T,E,R,V){for(var ue=null,fe=null,me=E,be=E=0,gt=null;me!==null&&be<R.length;be++){me.index>be?(gt=me,me=null):gt=me.sibling;var Le=W(T,me,R[be],V);if(Le===null){me===null&&(me=gt);break}e&&me&&Le.alternate===null&&t(T,me),E=f(Le,E,be),fe===null?ue=Le:fe.sibling=Le,fe=Le,me=gt}if(be===R.length)return r(T,me),Qe&&fr(T,be),ue;if(me===null){for(;be<R.length;be++)me=G(T,R[be],V),me!==null&&(E=f(me,E,be),fe===null?ue=me:fe.sibling=me,fe=me);return Qe&&fr(T,be),ue}for(me=a(T,me);be<R.length;be++)gt=te(me,T,be,R[be],V),gt!==null&&(e&&gt.alternate!==null&&me.delete(gt.key===null?be:gt.key),E=f(gt,E,be),fe===null?ue=gt:fe.sibling=gt,fe=gt);return e&&me.forEach(function(Zn){return t(T,Zn)}),Qe&&fr(T,be),ue}function ae(T,E,R,V){var ue=z(R);if(typeof ue!="function")throw Error(s(150));if(R=ue.call(R),R==null)throw Error(s(151));for(var fe=ue=null,me=E,be=E=0,gt=null,Le=R.next();me!==null&&!Le.done;be++,Le=R.next()){me.index>be?(gt=me,me=null):gt=me.sibling;var Zn=W(T,me,Le.value,V);if(Zn===null){me===null&&(me=gt);break}e&&me&&Zn.alternate===null&&t(T,me),E=f(Zn,E,be),fe===null?ue=Zn:fe.sibling=Zn,fe=Zn,me=gt}if(Le.done)return r(T,me),Qe&&fr(T,be),ue;if(me===null){for(;!Le.done;be++,Le=R.next())Le=G(T,Le.value,V),Le!==null&&(E=f(Le,E,be),fe===null?ue=Le:fe.sibling=Le,fe=Le);return Qe&&fr(T,be),ue}for(me=a(T,me);!Le.done;be++,Le=R.next())Le=te(me,T,be,Le.value,V),Le!==null&&(e&&Le.alternate!==null&&me.delete(Le.key===null?be:Le.key),E=f(Le,E,be),fe===null?ue=Le:fe.sibling=Le,fe=Le);return e&&me.forEach(function(hp){return t(T,hp)}),Qe&&fr(T,be),ue}function st(T,E,R,V){if(typeof R=="object"&&R!==null&&R.type===Y&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case Z:e:{for(var ue=R.key,fe=E;fe!==null;){if(fe.key===ue){if(ue=R.type,ue===Y){if(fe.tag===7){r(T,fe.sibling),E=d(fe,R.props.children),E.return=T,T=E;break e}}else if(fe.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===Q&&Nc(ue)===fe.type){r(T,fe.sibling),E=d(fe,R.props),E.ref=qs(T,fe,R),E.return=T,T=E;break e}r(T,fe);break}else t(T,fe);fe=fe.sibling}R.type===Y?(E=_r(R.props.children,T.mode,V,R.key),E.return=T,T=E):(V=ko(R.type,R.key,R.props,null,T.mode,V),V.ref=qs(T,E,R),V.return=T,T=V)}return v(T);case U:e:{for(fe=R.key;E!==null;){if(E.key===fe)if(E.tag===4&&E.stateNode.containerInfo===R.containerInfo&&E.stateNode.implementation===R.implementation){r(T,E.sibling),E=d(E,R.children||[]),E.return=T,T=E;break e}else{r(T,E);break}else t(T,E);E=E.sibling}E=kl(R,T.mode,V),E.return=T,T=E}return v(T);case Q:return fe=R._init,st(T,E,fe(R._payload),V)}if(Nt(R))return ie(T,E,R,V);if(z(R))return ae(T,E,R,V);Xi(T,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,E!==null&&E.tag===6?(r(T,E.sibling),E=d(E,R),E.return=T,T=E):(r(T,E),E=bl(R,T.mode,V),E.return=T,T=E),v(T)):r(T,E)}return st}var Vr=Cc(!0),Pc=Cc(!1),Zi=Bn(null),eo=null,Kr=null,Oa=null;function Aa(){Oa=Kr=eo=null}function La(e){var t=Zi.current;Ge(Zi),e._currentValue=t}function Ia(e,t,r){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===r)break;e=e.return}}function Jr(e,t){eo=e,Oa=Kr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(At=!0),e.firstContext=null)}function Vt(e){var t=e._currentValue;if(Oa!==e)if(e={context:e,memoizedValue:t,next:null},Kr===null){if(eo===null)throw Error(s(308));Kr=e,eo.dependencies={lanes:0,firstContext:e}}else Kr=Kr.next=e;return t}var mr=null;function $a(e){mr===null?mr=[e]:mr.push(e)}function Tc(e,t,r,a){var d=t.interleaved;return d===null?(r.next=r,$a(t)):(r.next=d.next,d.next=r),t.interleaved=r,jn(e,a)}function jn(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var qn=!1;function Da(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function En(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Gn(e,t,r){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(Oe&2)!==0){var d=a.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),a.pending=t,jn(e,r)}return d=a.interleaved,d===null?(t.next=t,$a(a)):(t.next=d.next,d.next=t),a.interleaved=t,jn(e,r)}function to(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,Yo(e,r)}}function Oc(e,t){var r=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var d=null,f=null;if(r=r.firstBaseUpdate,r!==null){do{var v={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};f===null?d=f=v:f=f.next=v,r=r.next}while(r!==null);f===null?d=f=t:f=f.next=t}else d=f=t;r={baseState:a.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:a.shared,effects:a.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function no(e,t,r,a){var d=e.updateQueue;qn=!1;var f=d.firstBaseUpdate,v=d.lastBaseUpdate,x=d.shared.pending;if(x!==null){d.shared.pending=null;var S=x,O=S.next;S.next=null,v===null?f=O:v.next=O,v=S;var H=e.alternate;H!==null&&(H=H.updateQueue,x=H.lastBaseUpdate,x!==v&&(x===null?H.firstBaseUpdate=O:x.next=O,H.lastBaseUpdate=S))}if(f!==null){var G=d.baseState;v=0,H=O=S=null,x=f;do{var W=x.lane,te=x.eventTime;if((a&W)===W){H!==null&&(H=H.next={eventTime:te,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var ie=e,ae=x;switch(W=t,te=r,ae.tag){case 1:if(ie=ae.payload,typeof ie=="function"){G=ie.call(te,G,W);break e}G=ie;break e;case 3:ie.flags=ie.flags&-65537|128;case 0:if(ie=ae.payload,W=typeof ie=="function"?ie.call(te,G,W):ie,W==null)break e;G=q({},G,W);break e;case 2:qn=!0}}x.callback!==null&&x.lane!==0&&(e.flags|=64,W=d.effects,W===null?d.effects=[x]:W.push(x))}else te={eventTime:te,lane:W,tag:x.tag,payload:x.payload,callback:x.callback,next:null},H===null?(O=H=te,S=G):H=H.next=te,v|=W;if(x=x.next,x===null){if(x=d.shared.pending,x===null)break;W=x,x=W.next,W.next=null,d.lastBaseUpdate=W,d.shared.pending=null}}while(!0);if(H===null&&(S=G),d.baseState=S,d.firstBaseUpdate=O,d.lastBaseUpdate=H,t=d.shared.interleaved,t!==null){d=t;do v|=d.lane,d=d.next;while(d!==t)}else f===null&&(d.shared.lanes=0);vr|=v,e.lanes=v,e.memoizedState=G}}function Ac(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],d=a.callback;if(d!==null){if(a.callback=null,a=r,typeof d!="function")throw Error(s(191,d));d.call(a)}}}var Gs={},pn=Bn(Gs),Vs=Bn(Gs),Ks=Bn(Gs);function pr(e){if(e===Gs)throw Error(s(174));return e}function Ua(e,t){switch(ze(Ks,t),ze(Vs,e),ze(pn,Gs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ar(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ar(t,e)}Ge(pn),ze(pn,t)}function Qr(){Ge(pn),Ge(Vs),Ge(Ks)}function Lc(e){pr(Ks.current);var t=pr(pn.current),r=Ar(t,e.type);t!==r&&(ze(Vs,e),ze(pn,r))}function Ma(e){Vs.current===e&&(Ge(pn),Ge(Vs))}var Xe=Bn(0);function ro(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Fa=[];function za(){for(var e=0;e<Fa.length;e++)Fa[e]._workInProgressVersionPrimary=null;Fa.length=0}var so=F.ReactCurrentDispatcher,Ba=F.ReactCurrentBatchConfig,gr=0,Ze=null,ct=null,mt=null,io=!1,Js=!1,Qs=0,Lm=0;function St(){throw Error(s(321))}function Wa(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Zt(e[r],t[r]))return!1;return!0}function Ha(e,t,r,a,d,f){if(gr=f,Ze=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,so.current=e===null||e.memoizedState===null?Um:Mm,e=r(a,d),Js){f=0;do{if(Js=!1,Qs=0,25<=f)throw Error(s(301));f+=1,mt=ct=null,t.updateQueue=null,so.current=Fm,e=r(a,d)}while(Js)}if(so.current=lo,t=ct!==null&&ct.next!==null,gr=0,mt=ct=Ze=null,io=!1,t)throw Error(s(300));return e}function qa(){var e=Qs!==0;return Qs=0,e}function gn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?Ze.memoizedState=mt=e:mt=mt.next=e,mt}function Kt(){if(ct===null){var e=Ze.alternate;e=e!==null?e.memoizedState:null}else e=ct.next;var t=mt===null?Ze.memoizedState:mt.next;if(t!==null)mt=t,ct=e;else{if(e===null)throw Error(s(310));ct=e,e={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},mt===null?Ze.memoizedState=mt=e:mt=mt.next=e}return mt}function Ys(e,t){return typeof t=="function"?t(e):t}function Ga(e){var t=Kt(),r=t.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=e;var a=ct,d=a.baseQueue,f=r.pending;if(f!==null){if(d!==null){var v=d.next;d.next=f.next,f.next=v}a.baseQueue=d=f,r.pending=null}if(d!==null){f=d.next,a=a.baseState;var x=v=null,S=null,O=f;do{var H=O.lane;if((gr&H)===H)S!==null&&(S=S.next={lane:0,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),a=O.hasEagerState?O.eagerState:e(a,O.action);else{var G={lane:H,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null};S===null?(x=S=G,v=a):S=S.next=G,Ze.lanes|=H,vr|=H}O=O.next}while(O!==null&&O!==f);S===null?v=a:S.next=x,Zt(a,t.memoizedState)||(At=!0),t.memoizedState=a,t.baseState=v,t.baseQueue=S,r.lastRenderedState=a}if(e=r.interleaved,e!==null){d=e;do f=d.lane,Ze.lanes|=f,vr|=f,d=d.next;while(d!==e)}else d===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Va(e){var t=Kt(),r=t.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=e;var a=r.dispatch,d=r.pending,f=t.memoizedState;if(d!==null){r.pending=null;var v=d=d.next;do f=e(f,v.action),v=v.next;while(v!==d);Zt(f,t.memoizedState)||(At=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),r.lastRenderedState=f}return[f,a]}function Ic(){}function $c(e,t){var r=Ze,a=Kt(),d=t(),f=!Zt(a.memoizedState,d);if(f&&(a.memoizedState=d,At=!0),a=a.queue,Ka(Mc.bind(null,r,a,e),[e]),a.getSnapshot!==t||f||mt!==null&&mt.memoizedState.tag&1){if(r.flags|=2048,Xs(9,Uc.bind(null,r,a,d,t),void 0,null),pt===null)throw Error(s(349));(gr&30)!==0||Dc(r,t,d)}return d}function Dc(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ze.updateQueue,t===null?(t={lastEffect:null,stores:null},Ze.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Uc(e,t,r,a){t.value=r,t.getSnapshot=a,Fc(t)&&zc(e)}function Mc(e,t,r){return r(function(){Fc(t)&&zc(e)})}function Fc(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Zt(e,r)}catch{return!0}}function zc(e){var t=jn(e,1);t!==null&&sn(t,e,1,-1)}function Bc(e){var t=gn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:e},t.queue=e,e=e.dispatch=Dm.bind(null,Ze,e),[t.memoizedState,e]}function Xs(e,t,r,a){return e={tag:e,create:t,destroy:r,deps:a,next:null},t=Ze.updateQueue,t===null?(t={lastEffect:null,stores:null},Ze.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(a=r.next,r.next=e,e.next=a,t.lastEffect=e)),e}function Wc(){return Kt().memoizedState}function oo(e,t,r,a){var d=gn();Ze.flags|=e,d.memoizedState=Xs(1|t,r,void 0,a===void 0?null:a)}function ao(e,t,r,a){var d=Kt();a=a===void 0?null:a;var f=void 0;if(ct!==null){var v=ct.memoizedState;if(f=v.destroy,a!==null&&Wa(a,v.deps)){d.memoizedState=Xs(t,r,f,a);return}}Ze.flags|=e,d.memoizedState=Xs(1|t,r,f,a)}function Hc(e,t){return oo(8390656,8,e,t)}function Ka(e,t){return ao(2048,8,e,t)}function qc(e,t){return ao(4,2,e,t)}function Gc(e,t){return ao(4,4,e,t)}function Vc(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Kc(e,t,r){return r=r!=null?r.concat([e]):null,ao(4,4,Vc.bind(null,t,e),r)}function Ja(){}function Jc(e,t){var r=Kt();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&Wa(t,a[1])?a[0]:(r.memoizedState=[e,t],e)}function Qc(e,t){var r=Kt();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&Wa(t,a[1])?a[0]:(e=e(),r.memoizedState=[e,t],e)}function Yc(e,t,r){return(gr&21)===0?(e.baseState&&(e.baseState=!1,At=!0),e.memoizedState=r):(Zt(r,t)||(r=Nu(),Ze.lanes|=r,vr|=r,e.baseState=!0),t)}function Im(e,t){var r=Ue;Ue=r!==0&&4>r?r:4,e(!0);var a=Ba.transition;Ba.transition={};try{e(!1),t()}finally{Ue=r,Ba.transition=a}}function Xc(){return Kt().memoizedState}function $m(e,t,r){var a=Qn(e);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},Zc(e))ed(t,r);else if(r=Tc(e,t,r,a),r!==null){var d=Tt();sn(r,e,a,d),td(r,t,a)}}function Dm(e,t,r){var a=Qn(e),d={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(Zc(e))ed(t,d);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var v=t.lastRenderedState,x=f(v,r);if(d.hasEagerState=!0,d.eagerState=x,Zt(x,v)){var S=t.interleaved;S===null?(d.next=d,$a(t)):(d.next=S.next,S.next=d),t.interleaved=d;return}}catch{}finally{}r=Tc(e,t,d,a),r!==null&&(d=Tt(),sn(r,e,a,d),td(r,t,a))}}function Zc(e){var t=e.alternate;return e===Ze||t!==null&&t===Ze}function ed(e,t){Js=io=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function td(e,t,r){if((r&4194240)!==0){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,Yo(e,r)}}var lo={readContext:Vt,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useInsertionEffect:St,useLayoutEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useMutableSource:St,useSyncExternalStore:St,useId:St,unstable_isNewReconciler:!1},Um={readContext:Vt,useCallback:function(e,t){return gn().memoizedState=[e,t===void 0?null:t],e},useContext:Vt,useEffect:Hc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,oo(4194308,4,Vc.bind(null,t,e),r)},useLayoutEffect:function(e,t){return oo(4194308,4,e,t)},useInsertionEffect:function(e,t){return oo(4,2,e,t)},useMemo:function(e,t){var r=gn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var a=gn();return t=r!==void 0?r(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=$m.bind(null,Ze,e),[a.memoizedState,e]},useRef:function(e){var t=gn();return e={current:e},t.memoizedState=e},useState:Bc,useDebugValue:Ja,useDeferredValue:function(e){return gn().memoizedState=e},useTransition:function(){var e=Bc(!1),t=e[0];return e=Im.bind(null,e[1]),gn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var a=Ze,d=gn();if(Qe){if(r===void 0)throw Error(s(407));r=r()}else{if(r=t(),pt===null)throw Error(s(349));(gr&30)!==0||Dc(a,t,r)}d.memoizedState=r;var f={value:r,getSnapshot:t};return d.queue=f,Hc(Mc.bind(null,a,f,e),[e]),a.flags|=2048,Xs(9,Uc.bind(null,a,f,r,t),void 0,null),r},useId:function(){var e=gn(),t=pt.identifierPrefix;if(Qe){var r=Sn,a=kn;r=(a&~(1<<32-Xt(a)-1)).toString(32)+r,t=":"+t+"R"+r,r=Qs++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Lm++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Mm={readContext:Vt,useCallback:Jc,useContext:Vt,useEffect:Ka,useImperativeHandle:Kc,useInsertionEffect:qc,useLayoutEffect:Gc,useMemo:Qc,useReducer:Ga,useRef:Wc,useState:function(){return Ga(Ys)},useDebugValue:Ja,useDeferredValue:function(e){var t=Kt();return Yc(t,ct.memoizedState,e)},useTransition:function(){var e=Ga(Ys)[0],t=Kt().memoizedState;return[e,t]},useMutableSource:Ic,useSyncExternalStore:$c,useId:Xc,unstable_isNewReconciler:!1},Fm={readContext:Vt,useCallback:Jc,useContext:Vt,useEffect:Ka,useImperativeHandle:Kc,useInsertionEffect:qc,useLayoutEffect:Gc,useMemo:Qc,useReducer:Va,useRef:Wc,useState:function(){return Va(Ys)},useDebugValue:Ja,useDeferredValue:function(e){var t=Kt();return ct===null?t.memoizedState=e:Yc(t,ct.memoizedState,e)},useTransition:function(){var e=Va(Ys)[0],t=Kt().memoizedState;return[e,t]},useMutableSource:Ic,useSyncExternalStore:$c,useId:Xc,unstable_isNewReconciler:!1};function tn(e,t){if(e&&e.defaultProps){t=q({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Qa(e,t,r,a){t=e.memoizedState,r=r(a,t),r=r==null?t:q({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var uo={isMounted:function(e){return(e=e._reactInternals)?wt(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var a=Tt(),d=Qn(e),f=En(a,d);f.payload=t,r!=null&&(f.callback=r),t=Gn(e,f,d),t!==null&&(sn(t,e,d,a),to(t,e,d))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var a=Tt(),d=Qn(e),f=En(a,d);f.tag=1,f.payload=t,r!=null&&(f.callback=r),t=Gn(e,f,d),t!==null&&(sn(t,e,d,a),to(t,e,d))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Tt(),a=Qn(e),d=En(r,a);d.tag=2,t!=null&&(d.callback=t),t=Gn(e,d,a),t!==null&&(sn(t,e,a,r),to(t,e,a))}};function nd(e,t,r,a,d,f,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,f,v):t.prototype&&t.prototype.isPureReactComponent?!Us(r,a)||!Us(d,f):!0}function rd(e,t,r){var a=!1,d=Wn,f=t.contextType;return typeof f=="object"&&f!==null?f=Vt(f):(d=Ot(t)?dr:kt.current,a=t.contextTypes,f=(a=a!=null)?Wr(e,d):Wn),t=new t(r,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=uo,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=d,e.__reactInternalMemoizedMaskedChildContext=f),t}function sd(e,t,r,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==e&&uo.enqueueReplaceState(t,t.state,null)}function Ya(e,t,r,a){var d=e.stateNode;d.props=r,d.state=e.memoizedState,d.refs={},Da(e);var f=t.contextType;typeof f=="object"&&f!==null?d.context=Vt(f):(f=Ot(t)?dr:kt.current,d.context=Wr(e,f)),d.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(Qa(e,t,f,r),d.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(t=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),t!==d.state&&uo.enqueueReplaceState(d,d.state,null),no(e,r,d,a),d.state=e.memoizedState),typeof d.componentDidMount=="function"&&(e.flags|=4194308)}function Yr(e,t){try{var r="",a=t;do r+=he(a),a=a.return;while(a);var d=r}catch(f){d=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:d,digest:null}}function Xa(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Za(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var zm=typeof WeakMap=="function"?WeakMap:Map;function id(e,t,r){r=En(-1,r),r.tag=3,r.payload={element:null};var a=t.value;return r.callback=function(){vo||(vo=!0,ml=a),Za(e,t)},r}function od(e,t,r){r=En(-1,r),r.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var d=t.value;r.payload=function(){return a(d)},r.callback=function(){Za(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(r.callback=function(){Za(e,t),typeof a!="function"&&(Kn===null?Kn=new Set([this]):Kn.add(this));var v=t.stack;this.componentDidCatch(t.value,{componentStack:v!==null?v:""})}),r}function ad(e,t,r){var a=e.pingCache;if(a===null){a=e.pingCache=new zm;var d=new Set;a.set(t,d)}else d=a.get(t),d===void 0&&(d=new Set,a.set(t,d));d.has(r)||(d.add(r),e=tp.bind(null,e,t,r),t.then(e,e))}function ld(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ud(e,t,r,a,d){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=En(-1,1),t.tag=2,Gn(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=d,e)}var Bm=F.ReactCurrentOwner,At=!1;function Pt(e,t,r,a){t.child=e===null?Pc(t,null,r,a):Vr(t,e.child,r,a)}function cd(e,t,r,a,d){r=r.render;var f=t.ref;return Jr(t,d),a=Ha(e,t,r,a,f,d),r=qa(),e!==null&&!At?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,Nn(e,t,d)):(Qe&&r&&Na(t),t.flags|=1,Pt(e,t,a,d),t.child)}function dd(e,t,r,a,d){if(e===null){var f=r.type;return typeof f=="function"&&!_l(f)&&f.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=f,hd(e,t,f,a,d)):(e=ko(r.type,null,a,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,(e.lanes&d)===0){var v=f.memoizedProps;if(r=r.compare,r=r!==null?r:Us,r(v,a)&&e.ref===t.ref)return Nn(e,t,d)}return t.flags|=1,e=Xn(f,a),e.ref=t.ref,e.return=t,t.child=e}function hd(e,t,r,a,d){if(e!==null){var f=e.memoizedProps;if(Us(f,a)&&e.ref===t.ref)if(At=!1,t.pendingProps=a=f,(e.lanes&d)!==0)(e.flags&131072)!==0&&(At=!0);else return t.lanes=e.lanes,Nn(e,t,d)}return el(e,t,r,a,d)}function fd(e,t,r){var a=t.pendingProps,d=a.children,f=e!==null?e.memoizedState:null;if(a.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(Zr,Bt),Bt|=r;else{if((r&1073741824)===0)return e=f!==null?f.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ze(Zr,Bt),Bt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=f!==null?f.baseLanes:r,ze(Zr,Bt),Bt|=a}else f!==null?(a=f.baseLanes|r,t.memoizedState=null):a=r,ze(Zr,Bt),Bt|=a;return Pt(e,t,d,r),t.child}function md(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function el(e,t,r,a,d){var f=Ot(r)?dr:kt.current;return f=Wr(t,f),Jr(t,d),r=Ha(e,t,r,a,f,d),a=qa(),e!==null&&!At?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,Nn(e,t,d)):(Qe&&a&&Na(t),t.flags|=1,Pt(e,t,r,d),t.child)}function pd(e,t,r,a,d){if(Ot(r)){var f=!0;Vi(t)}else f=!1;if(Jr(t,d),t.stateNode===null)ho(e,t),rd(t,r,a),Ya(t,r,a,d),a=!0;else if(e===null){var v=t.stateNode,x=t.memoizedProps;v.props=x;var S=v.context,O=r.contextType;typeof O=="object"&&O!==null?O=Vt(O):(O=Ot(r)?dr:kt.current,O=Wr(t,O));var H=r.getDerivedStateFromProps,G=typeof H=="function"||typeof v.getSnapshotBeforeUpdate=="function";G||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(x!==a||S!==O)&&sd(t,v,a,O),qn=!1;var W=t.memoizedState;v.state=W,no(t,a,v,d),S=t.memoizedState,x!==a||W!==S||Rt.current||qn?(typeof H=="function"&&(Qa(t,r,H,a),S=t.memoizedState),(x=qn||nd(t,r,x,a,W,S,O))?(G||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(t.flags|=4194308)):(typeof v.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=S),v.props=a,v.state=S,v.context=O,a=x):(typeof v.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{v=t.stateNode,Rc(e,t),x=t.memoizedProps,O=t.type===t.elementType?x:tn(t.type,x),v.props=O,G=t.pendingProps,W=v.context,S=r.contextType,typeof S=="object"&&S!==null?S=Vt(S):(S=Ot(r)?dr:kt.current,S=Wr(t,S));var te=r.getDerivedStateFromProps;(H=typeof te=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(x!==G||W!==S)&&sd(t,v,a,S),qn=!1,W=t.memoizedState,v.state=W,no(t,a,v,d);var ie=t.memoizedState;x!==G||W!==ie||Rt.current||qn?(typeof te=="function"&&(Qa(t,r,te,a),ie=t.memoizedState),(O=qn||nd(t,r,O,a,W,ie,S)||!1)?(H||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(a,ie,S),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(a,ie,S)),typeof v.componentDidUpdate=="function"&&(t.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof v.componentDidUpdate!="function"||x===e.memoizedProps&&W===e.memoizedState||(t.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&W===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=ie),v.props=a,v.state=ie,v.context=S,a=O):(typeof v.componentDidUpdate!="function"||x===e.memoizedProps&&W===e.memoizedState||(t.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&W===e.memoizedState||(t.flags|=1024),a=!1)}return tl(e,t,r,a,f,d)}function tl(e,t,r,a,d,f){md(e,t);var v=(t.flags&128)!==0;if(!a&&!v)return d&&xc(t,r,!1),Nn(e,t,f);a=t.stateNode,Bm.current=t;var x=v&&typeof r.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&v?(t.child=Vr(t,e.child,null,f),t.child=Vr(t,null,x,f)):Pt(e,t,x,f),t.memoizedState=a.state,d&&xc(t,r,!0),t.child}function gd(e){var t=e.stateNode;t.pendingContext?yc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&yc(e,t.context,!1),Ua(e,t.containerInfo)}function vd(e,t,r,a,d){return Gr(),Ra(d),t.flags|=256,Pt(e,t,r,a),t.child}var nl={dehydrated:null,treeContext:null,retryLane:0};function rl(e){return{baseLanes:e,cachePool:null,transitions:null}}function yd(e,t,r){var a=t.pendingProps,d=Xe.current,f=!1,v=(t.flags&128)!==0,x;if((x=v)||(x=e!==null&&e.memoizedState===null?!1:(d&2)!==0),x?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(d|=1),ze(Xe,d&1),e===null)return Ta(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(v=a.children,e=a.fallback,f?(a=t.mode,f=t.child,v={mode:"hidden",children:v},(a&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=v):f=So(v,a,0,null),e=_r(e,a,r,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=rl(r),t.memoizedState=nl,e):sl(t,v));if(d=e.memoizedState,d!==null&&(x=d.dehydrated,x!==null))return Wm(e,t,v,a,x,d,r);if(f){f=a.fallback,v=t.mode,d=e.child,x=d.sibling;var S={mode:"hidden",children:a.children};return(v&1)===0&&t.child!==d?(a=t.child,a.childLanes=0,a.pendingProps=S,t.deletions=null):(a=Xn(d,S),a.subtreeFlags=d.subtreeFlags&14680064),x!==null?f=Xn(x,f):(f=_r(f,v,r,null),f.flags|=2),f.return=t,a.return=t,a.sibling=f,t.child=a,a=f,f=t.child,v=e.child.memoizedState,v=v===null?rl(r):{baseLanes:v.baseLanes|r,cachePool:null,transitions:v.transitions},f.memoizedState=v,f.childLanes=e.childLanes&~r,t.memoizedState=nl,a}return f=e.child,e=f.sibling,a=Xn(f,{mode:"visible",children:a.children}),(t.mode&1)===0&&(a.lanes=r),a.return=t,a.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function sl(e,t){return t=So({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function co(e,t,r,a){return a!==null&&Ra(a),Vr(t,e.child,null,r),e=sl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Wm(e,t,r,a,d,f,v){if(r)return t.flags&256?(t.flags&=-257,a=Xa(Error(s(422))),co(e,t,v,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=a.fallback,d=t.mode,a=So({mode:"visible",children:a.children},d,0,null),f=_r(f,d,v,null),f.flags|=2,a.return=t,f.return=t,a.sibling=f,t.child=a,(t.mode&1)!==0&&Vr(t,e.child,null,v),t.child.memoizedState=rl(v),t.memoizedState=nl,f);if((t.mode&1)===0)return co(e,t,v,null);if(d.data==="$!"){if(a=d.nextSibling&&d.nextSibling.dataset,a)var x=a.dgst;return a=x,f=Error(s(419)),a=Xa(f,a,void 0),co(e,t,v,a)}if(x=(v&e.childLanes)!==0,At||x){if(a=pt,a!==null){switch(v&-v){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(a.suspendedLanes|v))!==0?0:d,d!==0&&d!==f.retryLane&&(f.retryLane=d,jn(e,d),sn(a,e,d,-1))}return xl(),a=Xa(Error(s(421))),co(e,t,v,a)}return d.data==="$?"?(t.flags|=128,t.child=e.child,t=np.bind(null,e),d._reactRetry=t,null):(e=f.treeContext,zt=zn(d.nextSibling),Ft=t,Qe=!0,en=null,e!==null&&(qt[Gt++]=kn,qt[Gt++]=Sn,qt[Gt++]=hr,kn=e.id,Sn=e.overflow,hr=t),t=sl(t,a.children),t.flags|=4096,t)}function wd(e,t,r){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Ia(e.return,t,r)}function il(e,t,r,a,d){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:d}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=a,f.tail=r,f.tailMode=d)}function xd(e,t,r){var a=t.pendingProps,d=a.revealOrder,f=a.tail;if(Pt(e,t,a.children,r),a=Xe.current,(a&2)!==0)a=a&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&wd(e,r,t);else if(e.tag===19)wd(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(ze(Xe,a),(t.mode&1)===0)t.memoizedState=null;else switch(d){case"forwards":for(r=t.child,d=null;r!==null;)e=r.alternate,e!==null&&ro(e)===null&&(d=r),r=r.sibling;r=d,r===null?(d=t.child,t.child=null):(d=r.sibling,r.sibling=null),il(t,!1,d,r,f);break;case"backwards":for(r=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&ro(e)===null){t.child=d;break}e=d.sibling,d.sibling=r,r=d,d=e}il(t,!0,r,null,f);break;case"together":il(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ho(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Nn(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),vr|=t.lanes,(r&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,r=Xn(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Xn(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Hm(e,t,r){switch(t.tag){case 3:gd(t),Gr();break;case 5:Lc(t);break;case 1:Ot(t.type)&&Vi(t);break;case 4:Ua(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,d=t.memoizedProps.value;ze(Zi,a._currentValue),a._currentValue=d;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(ze(Xe,Xe.current&1),t.flags|=128,null):(r&t.child.childLanes)!==0?yd(e,t,r):(ze(Xe,Xe.current&1),e=Nn(e,t,r),e!==null?e.sibling:null);ze(Xe,Xe.current&1);break;case 19:if(a=(r&t.childLanes)!==0,(e.flags&128)!==0){if(a)return xd(e,t,r);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),ze(Xe,Xe.current),a)break;return null;case 22:case 23:return t.lanes=0,fd(e,t,r)}return Nn(e,t,r)}var _d,ol,bd,kd;_d=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},ol=function(){},bd=function(e,t,r,a){var d=e.memoizedProps;if(d!==a){e=t.stateNode,pr(pn.current);var f=null;switch(r){case"input":d=Me(e,d),a=Me(e,a),f=[];break;case"select":d=q({},d,{value:void 0}),a=q({},a,{value:void 0}),f=[];break;case"textarea":d=or(e,d),a=or(e,a),f=[];break;default:typeof d.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Hi)}bs(r,a);var v;r=null;for(O in d)if(!a.hasOwnProperty(O)&&d.hasOwnProperty(O)&&d[O]!=null)if(O==="style"){var x=d[O];for(v in x)x.hasOwnProperty(v)&&(r||(r={}),r[v]="")}else O!=="dangerouslySetInnerHTML"&&O!=="children"&&O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&O!=="autoFocus"&&(l.hasOwnProperty(O)?f||(f=[]):(f=f||[]).push(O,null));for(O in a){var S=a[O];if(x=d?.[O],a.hasOwnProperty(O)&&S!==x&&(S!=null||x!=null))if(O==="style")if(x){for(v in x)!x.hasOwnProperty(v)||S&&S.hasOwnProperty(v)||(r||(r={}),r[v]="");for(v in S)S.hasOwnProperty(v)&&x[v]!==S[v]&&(r||(r={}),r[v]=S[v])}else r||(f||(f=[]),f.push(O,r)),r=S;else O==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,x=x?x.__html:void 0,S!=null&&x!==S&&(f=f||[]).push(O,S)):O==="children"?typeof S!="string"&&typeof S!="number"||(f=f||[]).push(O,""+S):O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&(l.hasOwnProperty(O)?(S!=null&&O==="onScroll"&&qe("scroll",e),f||x===S||(f=[])):(f=f||[]).push(O,S))}r&&(f=f||[]).push("style",r);var O=f;(t.updateQueue=O)&&(t.flags|=4)}},kd=function(e,t,r,a){r!==a&&(t.flags|=4)};function Zs(e,t){if(!Qe)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function jt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,a=0;if(t)for(var d=e.child;d!==null;)r|=d.lanes|d.childLanes,a|=d.subtreeFlags&14680064,a|=d.flags&14680064,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)r|=d.lanes|d.childLanes,a|=d.subtreeFlags,a|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=a,e.childLanes=r,t}function qm(e,t,r){var a=t.pendingProps;switch(Ca(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(t),null;case 1:return Ot(t.type)&&Gi(),jt(t),null;case 3:return a=t.stateNode,Qr(),Ge(Rt),Ge(kt),za(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Yi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,en!==null&&(vl(en),en=null))),ol(e,t),jt(t),null;case 5:Ma(t);var d=pr(Ks.current);if(r=t.type,e!==null&&t.stateNode!=null)bd(e,t,r,a,d),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(s(166));return jt(t),null}if(e=pr(pn.current),Yi(t)){a=t.stateNode,r=t.type;var f=t.memoizedProps;switch(a[mn]=t,a[Ws]=f,e=(t.mode&1)!==0,r){case"dialog":qe("cancel",a),qe("close",a);break;case"iframe":case"object":case"embed":qe("load",a);break;case"video":case"audio":for(d=0;d<Fs.length;d++)qe(Fs[d],a);break;case"source":qe("error",a);break;case"img":case"image":case"link":qe("error",a),qe("load",a);break;case"details":qe("toggle",a);break;case"input":We(a,f),qe("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!f.multiple},qe("invalid",a);break;case"textarea":_s(a,f),qe("invalid",a)}bs(r,f),d=null;for(var v in f)if(f.hasOwnProperty(v)){var x=f[v];v==="children"?typeof x=="string"?a.textContent!==x&&(f.suppressHydrationWarning!==!0&&Wi(a.textContent,x,e),d=["children",x]):typeof x=="number"&&a.textContent!==""+x&&(f.suppressHydrationWarning!==!0&&Wi(a.textContent,x,e),d=["children",""+x]):l.hasOwnProperty(v)&&x!=null&&v==="onScroll"&&qe("scroll",a)}switch(r){case"input":Ut(a),yt(a,f,!0);break;case"textarea":Ut(a),Rr(a);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(a.onclick=Hi)}a=d,t.updateQueue=a,a!==null&&(t.flags|=4)}else{v=d.nodeType===9?d:d.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Or(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=v.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=v.createElement(r,{is:a.is}):(e=v.createElement(r),r==="select"&&(v=e,a.multiple?v.multiple=!0:a.size&&(v.size=a.size))):e=v.createElementNS(e,r),e[mn]=t,e[Ws]=a,_d(e,t,!1,!1),t.stateNode=e;e:{switch(v=lr(r,a),r){case"dialog":qe("cancel",e),qe("close",e),d=a;break;case"iframe":case"object":case"embed":qe("load",e),d=a;break;case"video":case"audio":for(d=0;d<Fs.length;d++)qe(Fs[d],e);d=a;break;case"source":qe("error",e),d=a;break;case"img":case"image":case"link":qe("error",e),qe("load",e),d=a;break;case"details":qe("toggle",e),d=a;break;case"input":We(e,a),d=Me(e,a),qe("invalid",e);break;case"option":d=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},d=q({},a,{value:void 0}),qe("invalid",e);break;case"textarea":_s(e,a),d=or(e,a),qe("invalid",e);break;default:d=a}bs(r,d),x=d;for(f in x)if(x.hasOwnProperty(f)){var S=x[f];f==="style"?ki(e,S):f==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,S!=null&&xi(e,S)):f==="children"?typeof S=="string"?(r!=="textarea"||S!=="")&&ar(e,S):typeof S=="number"&&ar(e,""+S):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(l.hasOwnProperty(f)?S!=null&&f==="onScroll"&&qe("scroll",e):S!=null&&I(e,f,S,v))}switch(r){case"input":Ut(e),yt(e,a,!1);break;case"textarea":Ut(e),Rr(e);break;case"option":a.value!=null&&e.setAttribute("value",""+ye(a.value));break;case"select":e.multiple=!!a.multiple,f=a.value,f!=null?wn(e,!!a.multiple,f,!1):a.defaultValue!=null&&wn(e,!!a.multiple,a.defaultValue,!0);break;default:typeof d.onClick=="function"&&(e.onclick=Hi)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return jt(t),null;case 6:if(e&&t.stateNode!=null)kd(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(s(166));if(r=pr(Ks.current),pr(pn.current),Yi(t)){if(a=t.stateNode,r=t.memoizedProps,a[mn]=t,(f=a.nodeValue!==r)&&(e=Ft,e!==null))switch(e.tag){case 3:Wi(a.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Wi(a.nodeValue,r,(e.mode&1)!==0)}f&&(t.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[mn]=t,t.stateNode=a}return jt(t),null;case 13:if(Ge(Xe),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Qe&&zt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Ec(),Gr(),t.flags|=98560,f=!1;else if(f=Yi(t),a!==null&&a.dehydrated!==null){if(e===null){if(!f)throw Error(s(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[mn]=t}else Gr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;jt(t),f=!1}else en!==null&&(vl(en),en=null),f=!0;if(!f)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=r,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Xe.current&1)!==0?dt===0&&(dt=3):xl())),t.updateQueue!==null&&(t.flags|=4),jt(t),null);case 4:return Qr(),ol(e,t),e===null&&zs(t.stateNode.containerInfo),jt(t),null;case 10:return La(t.type._context),jt(t),null;case 17:return Ot(t.type)&&Gi(),jt(t),null;case 19:if(Ge(Xe),f=t.memoizedState,f===null)return jt(t),null;if(a=(t.flags&128)!==0,v=f.rendering,v===null)if(a)Zs(f,!1);else{if(dt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(v=ro(e),v!==null){for(t.flags|=128,Zs(f,!1),a=v.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=r,r=t.child;r!==null;)f=r,e=a,f.flags&=14680066,v=f.alternate,v===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=v.childLanes,f.lanes=v.lanes,f.child=v.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=v.memoizedProps,f.memoizedState=v.memoizedState,f.updateQueue=v.updateQueue,f.type=v.type,e=v.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ze(Xe,Xe.current&1|2),t.child}e=e.sibling}f.tail!==null&&rt()>es&&(t.flags|=128,a=!0,Zs(f,!1),t.lanes=4194304)}else{if(!a)if(e=ro(v),e!==null){if(t.flags|=128,a=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Zs(f,!0),f.tail===null&&f.tailMode==="hidden"&&!v.alternate&&!Qe)return jt(t),null}else 2*rt()-f.renderingStartTime>es&&r!==1073741824&&(t.flags|=128,a=!0,Zs(f,!1),t.lanes=4194304);f.isBackwards?(v.sibling=t.child,t.child=v):(r=f.last,r!==null?r.sibling=v:t.child=v,f.last=v)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=rt(),t.sibling=null,r=Xe.current,ze(Xe,a?r&1|2:r&1),t):(jt(t),null);case 22:case 23:return wl(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&(t.mode&1)!==0?(Bt&1073741824)!==0&&(jt(t),t.subtreeFlags&6&&(t.flags|=8192)):jt(t),null;case 24:return null;case 25:return null}throw Error(s(156,t.tag))}function Gm(e,t){switch(Ca(t),t.tag){case 1:return Ot(t.type)&&Gi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Qr(),Ge(Rt),Ge(kt),za(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Ma(t),null;case 13:if(Ge(Xe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));Gr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ge(Xe),null;case 4:return Qr(),null;case 10:return La(t.type._context),null;case 22:case 23:return wl(),null;case 24:return null;default:return null}}var fo=!1,Et=!1,Vm=typeof WeakSet=="function"?WeakSet:Set,re=null;function Xr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){tt(e,t,a)}else r.current=null}function al(e,t,r){try{r()}catch(a){tt(e,t,a)}}var Sd=!1;function Km(e,t){if(wa=Oi,e=nc(),da(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var d=a.anchorOffset,f=a.focusNode;a=a.focusOffset;try{r.nodeType,f.nodeType}catch{r=null;break e}var v=0,x=-1,S=-1,O=0,H=0,G=e,W=null;t:for(;;){for(var te;G!==r||d!==0&&G.nodeType!==3||(x=v+d),G!==f||a!==0&&G.nodeType!==3||(S=v+a),G.nodeType===3&&(v+=G.nodeValue.length),(te=G.firstChild)!==null;)W=G,G=te;for(;;){if(G===e)break t;if(W===r&&++O===d&&(x=v),W===f&&++H===a&&(S=v),(te=G.nextSibling)!==null)break;G=W,W=G.parentNode}G=te}r=x===-1||S===-1?null:{start:x,end:S}}else r=null}r=r||{start:0,end:0}}else r=null;for(xa={focusedElem:e,selectionRange:r},Oi=!1,re=t;re!==null;)if(t=re,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,re=e;else for(;re!==null;){t=re;try{var ie=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(ie!==null){var ae=ie.memoizedProps,st=ie.memoizedState,T=t.stateNode,E=T.getSnapshotBeforeUpdate(t.elementType===t.type?ae:tn(t.type,ae),st);T.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var R=t.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(V){tt(t,t.return,V)}if(e=t.sibling,e!==null){e.return=t.return,re=e;break}re=t.return}return ie=Sd,Sd=!1,ie}function ei(e,t,r){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var d=a=a.next;do{if((d.tag&e)===e){var f=d.destroy;d.destroy=void 0,f!==void 0&&al(t,r,f)}d=d.next}while(d!==a)}}function mo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var a=r.create;r.destroy=a()}r=r.next}while(r!==t)}}function ll(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function jd(e){var t=e.alternate;t!==null&&(e.alternate=null,jd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[mn],delete t[Ws],delete t[Sa],delete t[Tm],delete t[Rm])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ed(e){return e.tag===5||e.tag===3||e.tag===4}function Nd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ed(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ul(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Hi));else if(a!==4&&(e=e.child,e!==null))for(ul(e,t,r),e=e.sibling;e!==null;)ul(e,t,r),e=e.sibling}function cl(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(cl(e,t,r),e=e.sibling;e!==null;)cl(e,t,r),e=e.sibling}var xt=null,nn=!1;function Vn(e,t,r){for(r=r.child;r!==null;)Cd(e,t,r),r=r.sibling}function Cd(e,t,r){if(fn&&typeof fn.onCommitFiberUnmount=="function")try{fn.onCommitFiberUnmount(Ei,r)}catch{}switch(r.tag){case 5:Et||Xr(r,t);case 6:var a=xt,d=nn;xt=null,Vn(e,t,r),xt=a,nn=d,xt!==null&&(nn?(e=xt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):xt.removeChild(r.stateNode));break;case 18:xt!==null&&(nn?(e=xt,r=r.stateNode,e.nodeType===8?ka(e.parentNode,r):e.nodeType===1&&ka(e,r),Os(e)):ka(xt,r.stateNode));break;case 4:a=xt,d=nn,xt=r.stateNode.containerInfo,nn=!0,Vn(e,t,r),xt=a,nn=d;break;case 0:case 11:case 14:case 15:if(!Et&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){d=a=a.next;do{var f=d,v=f.destroy;f=f.tag,v!==void 0&&((f&2)!==0||(f&4)!==0)&&al(r,t,v),d=d.next}while(d!==a)}Vn(e,t,r);break;case 1:if(!Et&&(Xr(r,t),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(x){tt(r,t,x)}Vn(e,t,r);break;case 21:Vn(e,t,r);break;case 22:r.mode&1?(Et=(a=Et)||r.memoizedState!==null,Vn(e,t,r),Et=a):Vn(e,t,r);break;default:Vn(e,t,r)}}function Pd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Vm),t.forEach(function(a){var d=rp.bind(null,e,a);r.has(a)||(r.add(a),a.then(d,d))})}}function rn(e,t){var r=t.deletions;if(r!==null)for(var a=0;a<r.length;a++){var d=r[a];try{var f=e,v=t,x=v;e:for(;x!==null;){switch(x.tag){case 5:xt=x.stateNode,nn=!1;break e;case 3:xt=x.stateNode.containerInfo,nn=!0;break e;case 4:xt=x.stateNode.containerInfo,nn=!0;break e}x=x.return}if(xt===null)throw Error(s(160));Cd(f,v,d),xt=null,nn=!1;var S=d.alternate;S!==null&&(S.return=null),d.return=null}catch(O){tt(d,t,O)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Td(t,e),t=t.sibling}function Td(e,t){var r=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(rn(t,e),vn(e),a&4){try{ei(3,e,e.return),mo(3,e)}catch(ae){tt(e,e.return,ae)}try{ei(5,e,e.return)}catch(ae){tt(e,e.return,ae)}}break;case 1:rn(t,e),vn(e),a&512&&r!==null&&Xr(r,r.return);break;case 5:if(rn(t,e),vn(e),a&512&&r!==null&&Xr(r,r.return),e.flags&32){var d=e.stateNode;try{ar(d,"")}catch(ae){tt(e,e.return,ae)}}if(a&4&&(d=e.stateNode,d!=null)){var f=e.memoizedProps,v=r!==null?r.memoizedProps:f,x=e.type,S=e.updateQueue;if(e.updateQueue=null,S!==null)try{x==="input"&&f.type==="radio"&&f.name!=null&&et(d,f),lr(x,v);var O=lr(x,f);for(v=0;v<S.length;v+=2){var H=S[v],G=S[v+1];H==="style"?ki(d,G):H==="dangerouslySetInnerHTML"?xi(d,G):H==="children"?ar(d,G):I(d,H,G,O)}switch(x){case"input":He(d,f);break;case"textarea":Tr(d,f);break;case"select":var W=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!f.multiple;var te=f.value;te!=null?wn(d,!!f.multiple,te,!1):W!==!!f.multiple&&(f.defaultValue!=null?wn(d,!!f.multiple,f.defaultValue,!0):wn(d,!!f.multiple,f.multiple?[]:"",!1))}d[Ws]=f}catch(ae){tt(e,e.return,ae)}}break;case 6:if(rn(t,e),vn(e),a&4){if(e.stateNode===null)throw Error(s(162));d=e.stateNode,f=e.memoizedProps;try{d.nodeValue=f}catch(ae){tt(e,e.return,ae)}}break;case 3:if(rn(t,e),vn(e),a&4&&r!==null&&r.memoizedState.isDehydrated)try{Os(t.containerInfo)}catch(ae){tt(e,e.return,ae)}break;case 4:rn(t,e),vn(e);break;case 13:rn(t,e),vn(e),d=e.child,d.flags&8192&&(f=d.memoizedState!==null,d.stateNode.isHidden=f,!f||d.alternate!==null&&d.alternate.memoizedState!==null||(fl=rt())),a&4&&Pd(e);break;case 22:if(H=r!==null&&r.memoizedState!==null,e.mode&1?(Et=(O=Et)||H,rn(t,e),Et=O):rn(t,e),vn(e),a&8192){if(O=e.memoizedState!==null,(e.stateNode.isHidden=O)&&!H&&(e.mode&1)!==0)for(re=e,H=e.child;H!==null;){for(G=re=H;re!==null;){switch(W=re,te=W.child,W.tag){case 0:case 11:case 14:case 15:ei(4,W,W.return);break;case 1:Xr(W,W.return);var ie=W.stateNode;if(typeof ie.componentWillUnmount=="function"){a=W,r=W.return;try{t=a,ie.props=t.memoizedProps,ie.state=t.memoizedState,ie.componentWillUnmount()}catch(ae){tt(a,r,ae)}}break;case 5:Xr(W,W.return);break;case 22:if(W.memoizedState!==null){Ad(G);continue}}te!==null?(te.return=W,re=te):Ad(G)}H=H.sibling}e:for(H=null,G=e;;){if(G.tag===5){if(H===null){H=G;try{d=G.stateNode,O?(f=d.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(x=G.stateNode,S=G.memoizedProps.style,v=S!=null&&S.hasOwnProperty("display")?S.display:null,x.style.display=bi("display",v))}catch(ae){tt(e,e.return,ae)}}}else if(G.tag===6){if(H===null)try{G.stateNode.nodeValue=O?"":G.memoizedProps}catch(ae){tt(e,e.return,ae)}}else if((G.tag!==22&&G.tag!==23||G.memoizedState===null||G===e)&&G.child!==null){G.child.return=G,G=G.child;continue}if(G===e)break e;for(;G.sibling===null;){if(G.return===null||G.return===e)break e;H===G&&(H=null),G=G.return}H===G&&(H=null),G.sibling.return=G.return,G=G.sibling}}break;case 19:rn(t,e),vn(e),a&4&&Pd(e);break;case 21:break;default:rn(t,e),vn(e)}}function vn(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Ed(r)){var a=r;break e}r=r.return}throw Error(s(160))}switch(a.tag){case 5:var d=a.stateNode;a.flags&32&&(ar(d,""),a.flags&=-33);var f=Nd(e);cl(e,f,d);break;case 3:case 4:var v=a.stateNode.containerInfo,x=Nd(e);ul(e,x,v);break;default:throw Error(s(161))}}catch(S){tt(e,e.return,S)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Jm(e,t,r){re=e,Rd(e)}function Rd(e,t,r){for(var a=(e.mode&1)!==0;re!==null;){var d=re,f=d.child;if(d.tag===22&&a){var v=d.memoizedState!==null||fo;if(!v){var x=d.alternate,S=x!==null&&x.memoizedState!==null||Et;x=fo;var O=Et;if(fo=v,(Et=S)&&!O)for(re=d;re!==null;)v=re,S=v.child,v.tag===22&&v.memoizedState!==null?Ld(d):S!==null?(S.return=v,re=S):Ld(d);for(;f!==null;)re=f,Rd(f),f=f.sibling;re=d,fo=x,Et=O}Od(e)}else(d.subtreeFlags&8772)!==0&&f!==null?(f.return=d,re=f):Od(e)}}function Od(e){for(;re!==null;){var t=re;if((t.flags&8772)!==0){var r=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Et||mo(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Et)if(r===null)a.componentDidMount();else{var d=t.elementType===t.type?r.memoizedProps:tn(t.type,r.memoizedProps);a.componentDidUpdate(d,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&Ac(t,f,a);break;case 3:var v=t.updateQueue;if(v!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Ac(t,v,r)}break;case 5:var x=t.stateNode;if(r===null&&t.flags&4){r=x;var S=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":S.autoFocus&&r.focus();break;case"img":S.src&&(r.src=S.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var O=t.alternate;if(O!==null){var H=O.memoizedState;if(H!==null){var G=H.dehydrated;G!==null&&Os(G)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}Et||t.flags&512&&ll(t)}catch(W){tt(t,t.return,W)}}if(t===e){re=null;break}if(r=t.sibling,r!==null){r.return=t.return,re=r;break}re=t.return}}function Ad(e){for(;re!==null;){var t=re;if(t===e){re=null;break}var r=t.sibling;if(r!==null){r.return=t.return,re=r;break}re=t.return}}function Ld(e){for(;re!==null;){var t=re;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{mo(4,t)}catch(S){tt(t,r,S)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var d=t.return;try{a.componentDidMount()}catch(S){tt(t,d,S)}}var f=t.return;try{ll(t)}catch(S){tt(t,f,S)}break;case 5:var v=t.return;try{ll(t)}catch(S){tt(t,v,S)}}}catch(S){tt(t,t.return,S)}if(t===e){re=null;break}var x=t.sibling;if(x!==null){x.return=t.return,re=x;break}re=t.return}}var Qm=Math.ceil,po=F.ReactCurrentDispatcher,dl=F.ReactCurrentOwner,Jt=F.ReactCurrentBatchConfig,Oe=0,pt=null,at=null,_t=0,Bt=0,Zr=Bn(0),dt=0,ti=null,vr=0,go=0,hl=0,ni=null,Lt=null,fl=0,es=1/0,Cn=null,vo=!1,ml=null,Kn=null,yo=!1,Jn=null,wo=0,ri=0,pl=null,xo=-1,_o=0;function Tt(){return(Oe&6)!==0?rt():xo!==-1?xo:xo=rt()}function Qn(e){return(e.mode&1)===0?1:(Oe&2)!==0&&_t!==0?_t&-_t:Am.transition!==null?(_o===0&&(_o=Nu()),_o):(e=Ue,e!==0||(e=window.event,e=e===void 0?16:$u(e.type)),e)}function sn(e,t,r,a){if(50<ri)throw ri=0,pl=null,Error(s(185));Ns(e,r,a),((Oe&2)===0||e!==pt)&&(e===pt&&((Oe&2)===0&&(go|=r),dt===4&&Yn(e,_t)),It(e,a),r===1&&Oe===0&&(t.mode&1)===0&&(es=rt()+500,Ki&&Hn()))}function It(e,t){var r=e.callbackNode;Af(e,t);var a=Pi(e,e===pt?_t:0);if(a===0)r!==null&&Su(r),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(r!=null&&Su(r),t===1)e.tag===0?Om($d.bind(null,e)):_c($d.bind(null,e)),Cm(function(){(Oe&6)===0&&Hn()}),r=null;else{switch(Cu(a)){case 1:r=Ko;break;case 4:r=ju;break;case 16:r=ji;break;case 536870912:r=Eu;break;default:r=ji}r=Hd(r,Id.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Id(e,t){if(xo=-1,_o=0,(Oe&6)!==0)throw Error(s(327));var r=e.callbackNode;if(ts()&&e.callbackNode!==r)return null;var a=Pi(e,e===pt?_t:0);if(a===0)return null;if((a&30)!==0||(a&e.expiredLanes)!==0||t)t=bo(e,a);else{t=a;var d=Oe;Oe|=2;var f=Ud();(pt!==e||_t!==t)&&(Cn=null,es=rt()+500,wr(e,t));do try{Zm();break}catch(x){Dd(e,x)}while(!0);Aa(),po.current=f,Oe=d,at!==null?t=0:(pt=null,_t=0,t=dt)}if(t!==0){if(t===2&&(d=Jo(e),d!==0&&(a=d,t=gl(e,d))),t===1)throw r=ti,wr(e,0),Yn(e,a),It(e,rt()),r;if(t===6)Yn(e,a);else{if(d=e.current.alternate,(a&30)===0&&!Ym(d)&&(t=bo(e,a),t===2&&(f=Jo(e),f!==0&&(a=f,t=gl(e,f))),t===1))throw r=ti,wr(e,0),Yn(e,a),It(e,rt()),r;switch(e.finishedWork=d,e.finishedLanes=a,t){case 0:case 1:throw Error(s(345));case 2:xr(e,Lt,Cn);break;case 3:if(Yn(e,a),(a&130023424)===a&&(t=fl+500-rt(),10<t)){if(Pi(e,0)!==0)break;if(d=e.suspendedLanes,(d&a)!==a){Tt(),e.pingedLanes|=e.suspendedLanes&d;break}e.timeoutHandle=ba(xr.bind(null,e,Lt,Cn),t);break}xr(e,Lt,Cn);break;case 4:if(Yn(e,a),(a&4194240)===a)break;for(t=e.eventTimes,d=-1;0<a;){var v=31-Xt(a);f=1<<v,v=t[v],v>d&&(d=v),a&=~f}if(a=d,a=rt()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Qm(a/1960))-a,10<a){e.timeoutHandle=ba(xr.bind(null,e,Lt,Cn),a);break}xr(e,Lt,Cn);break;case 5:xr(e,Lt,Cn);break;default:throw Error(s(329))}}}return It(e,rt()),e.callbackNode===r?Id.bind(null,e):null}function gl(e,t){var r=ni;return e.current.memoizedState.isDehydrated&&(wr(e,t).flags|=256),e=bo(e,t),e!==2&&(t=Lt,Lt=r,t!==null&&vl(t)),e}function vl(e){Lt===null?Lt=e:Lt.push.apply(Lt,e)}function Ym(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var d=r[a],f=d.getSnapshot;d=d.value;try{if(!Zt(f(),d))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Yn(e,t){for(t&=~hl,t&=~go,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Xt(t),a=1<<r;e[r]=-1,t&=~a}}function $d(e){if((Oe&6)!==0)throw Error(s(327));ts();var t=Pi(e,0);if((t&1)===0)return It(e,rt()),null;var r=bo(e,t);if(e.tag!==0&&r===2){var a=Jo(e);a!==0&&(t=a,r=gl(e,a))}if(r===1)throw r=ti,wr(e,0),Yn(e,t),It(e,rt()),r;if(r===6)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xr(e,Lt,Cn),It(e,rt()),null}function yl(e,t){var r=Oe;Oe|=1;try{return e(t)}finally{Oe=r,Oe===0&&(es=rt()+500,Ki&&Hn())}}function yr(e){Jn!==null&&Jn.tag===0&&(Oe&6)===0&&ts();var t=Oe;Oe|=1;var r=Jt.transition,a=Ue;try{if(Jt.transition=null,Ue=1,e)return e()}finally{Ue=a,Jt.transition=r,Oe=t,(Oe&6)===0&&Hn()}}function wl(){Bt=Zr.current,Ge(Zr)}function wr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Nm(r)),at!==null)for(r=at.return;r!==null;){var a=r;switch(Ca(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Gi();break;case 3:Qr(),Ge(Rt),Ge(kt),za();break;case 5:Ma(a);break;case 4:Qr();break;case 13:Ge(Xe);break;case 19:Ge(Xe);break;case 10:La(a.type._context);break;case 22:case 23:wl()}r=r.return}if(pt=e,at=e=Xn(e.current,null),_t=Bt=t,dt=0,ti=null,hl=go=vr=0,Lt=ni=null,mr!==null){for(t=0;t<mr.length;t++)if(r=mr[t],a=r.interleaved,a!==null){r.interleaved=null;var d=a.next,f=r.pending;if(f!==null){var v=f.next;f.next=d,a.next=v}r.pending=a}mr=null}return e}function Dd(e,t){do{var r=at;try{if(Aa(),so.current=lo,io){for(var a=Ze.memoizedState;a!==null;){var d=a.queue;d!==null&&(d.pending=null),a=a.next}io=!1}if(gr=0,mt=ct=Ze=null,Js=!1,Qs=0,dl.current=null,r===null||r.return===null){dt=1,ti=t,at=null;break}e:{var f=e,v=r.return,x=r,S=t;if(t=_t,x.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){var O=S,H=x,G=H.tag;if((H.mode&1)===0&&(G===0||G===11||G===15)){var W=H.alternate;W?(H.updateQueue=W.updateQueue,H.memoizedState=W.memoizedState,H.lanes=W.lanes):(H.updateQueue=null,H.memoizedState=null)}var te=ld(v);if(te!==null){te.flags&=-257,ud(te,v,x,f,t),te.mode&1&&ad(f,O,t),t=te,S=O;var ie=t.updateQueue;if(ie===null){var ae=new Set;ae.add(S),t.updateQueue=ae}else ie.add(S);break e}else{if((t&1)===0){ad(f,O,t),xl();break e}S=Error(s(426))}}else if(Qe&&x.mode&1){var st=ld(v);if(st!==null){(st.flags&65536)===0&&(st.flags|=256),ud(st,v,x,f,t),Ra(Yr(S,x));break e}}f=S=Yr(S,x),dt!==4&&(dt=2),ni===null?ni=[f]:ni.push(f),f=v;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var T=id(f,S,t);Oc(f,T);break e;case 1:x=S;var E=f.type,R=f.stateNode;if((f.flags&128)===0&&(typeof E.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(Kn===null||!Kn.has(R)))){f.flags|=65536,t&=-t,f.lanes|=t;var V=od(f,x,t);Oc(f,V);break e}}f=f.return}while(f!==null)}Fd(r)}catch(ue){t=ue,at===r&&r!==null&&(at=r=r.return);continue}break}while(!0)}function Ud(){var e=po.current;return po.current=lo,e===null?lo:e}function xl(){(dt===0||dt===3||dt===2)&&(dt=4),pt===null||(vr&268435455)===0&&(go&268435455)===0||Yn(pt,_t)}function bo(e,t){var r=Oe;Oe|=2;var a=Ud();(pt!==e||_t!==t)&&(Cn=null,wr(e,t));do try{Xm();break}catch(d){Dd(e,d)}while(!0);if(Aa(),Oe=r,po.current=a,at!==null)throw Error(s(261));return pt=null,_t=0,dt}function Xm(){for(;at!==null;)Md(at)}function Zm(){for(;at!==null&&!Sf();)Md(at)}function Md(e){var t=Wd(e.alternate,e,Bt);e.memoizedProps=e.pendingProps,t===null?Fd(e):at=t,dl.current=null}function Fd(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&32768)===0){if(r=qm(r,t,Bt),r!==null){at=r;return}}else{if(r=Gm(r,t),r!==null){r.flags&=32767,at=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{dt=6,at=null;return}}if(t=t.sibling,t!==null){at=t;return}at=t=e}while(t!==null);dt===0&&(dt=5)}function xr(e,t,r){var a=Ue,d=Jt.transition;try{Jt.transition=null,Ue=1,ep(e,t,r,a)}finally{Jt.transition=d,Ue=a}return null}function ep(e,t,r,a){do ts();while(Jn!==null);if((Oe&6)!==0)throw Error(s(327));r=e.finishedWork;var d=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var f=r.lanes|r.childLanes;if(Lf(e,f),e===pt&&(at=pt=null,_t=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||yo||(yo=!0,Hd(ji,function(){return ts(),null})),f=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||f){f=Jt.transition,Jt.transition=null;var v=Ue;Ue=1;var x=Oe;Oe|=4,dl.current=null,Km(e,r),Td(r,e),xm(xa),Oi=!!wa,xa=wa=null,e.current=r,Jm(r),jf(),Oe=x,Ue=v,Jt.transition=f}else e.current=r;if(yo&&(yo=!1,Jn=e,wo=d),f=e.pendingLanes,f===0&&(Kn=null),Cf(r.stateNode),It(e,rt()),t!==null)for(a=e.onRecoverableError,r=0;r<t.length;r++)d=t[r],a(d.value,{componentStack:d.stack,digest:d.digest});if(vo)throw vo=!1,e=ml,ml=null,e;return(wo&1)!==0&&e.tag!==0&&ts(),f=e.pendingLanes,(f&1)!==0?e===pl?ri++:(ri=0,pl=e):ri=0,Hn(),null}function ts(){if(Jn!==null){var e=Cu(wo),t=Jt.transition,r=Ue;try{if(Jt.transition=null,Ue=16>e?16:e,Jn===null)var a=!1;else{if(e=Jn,Jn=null,wo=0,(Oe&6)!==0)throw Error(s(331));var d=Oe;for(Oe|=4,re=e.current;re!==null;){var f=re,v=f.child;if((re.flags&16)!==0){var x=f.deletions;if(x!==null){for(var S=0;S<x.length;S++){var O=x[S];for(re=O;re!==null;){var H=re;switch(H.tag){case 0:case 11:case 15:ei(8,H,f)}var G=H.child;if(G!==null)G.return=H,re=G;else for(;re!==null;){H=re;var W=H.sibling,te=H.return;if(jd(H),H===O){re=null;break}if(W!==null){W.return=te,re=W;break}re=te}}}var ie=f.alternate;if(ie!==null){var ae=ie.child;if(ae!==null){ie.child=null;do{var st=ae.sibling;ae.sibling=null,ae=st}while(ae!==null)}}re=f}}if((f.subtreeFlags&2064)!==0&&v!==null)v.return=f,re=v;else e:for(;re!==null;){if(f=re,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:ei(9,f,f.return)}var T=f.sibling;if(T!==null){T.return=f.return,re=T;break e}re=f.return}}var E=e.current;for(re=E;re!==null;){v=re;var R=v.child;if((v.subtreeFlags&2064)!==0&&R!==null)R.return=v,re=R;else e:for(v=E;re!==null;){if(x=re,(x.flags&2048)!==0)try{switch(x.tag){case 0:case 11:case 15:mo(9,x)}}catch(ue){tt(x,x.return,ue)}if(x===v){re=null;break e}var V=x.sibling;if(V!==null){V.return=x.return,re=V;break e}re=x.return}}if(Oe=d,Hn(),fn&&typeof fn.onPostCommitFiberRoot=="function")try{fn.onPostCommitFiberRoot(Ei,e)}catch{}a=!0}return a}finally{Ue=r,Jt.transition=t}}return!1}function zd(e,t,r){t=Yr(r,t),t=id(e,t,1),e=Gn(e,t,1),t=Tt(),e!==null&&(Ns(e,1,t),It(e,t))}function tt(e,t,r){if(e.tag===3)zd(e,e,r);else for(;t!==null;){if(t.tag===3){zd(t,e,r);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Kn===null||!Kn.has(a))){e=Yr(r,e),e=od(t,e,1),t=Gn(t,e,1),e=Tt(),t!==null&&(Ns(t,1,e),It(t,e));break}}t=t.return}}function tp(e,t,r){var a=e.pingCache;a!==null&&a.delete(t),t=Tt(),e.pingedLanes|=e.suspendedLanes&r,pt===e&&(_t&r)===r&&(dt===4||dt===3&&(_t&130023424)===_t&&500>rt()-fl?wr(e,0):hl|=r),It(e,t)}function Bd(e,t){t===0&&((e.mode&1)===0?t=1:(t=Ci,Ci<<=1,(Ci&130023424)===0&&(Ci=4194304)));var r=Tt();e=jn(e,t),e!==null&&(Ns(e,t,r),It(e,r))}function np(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Bd(e,r)}function rp(e,t){var r=0;switch(e.tag){case 13:var a=e.stateNode,d=e.memoizedState;d!==null&&(r=d.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(s(314))}a!==null&&a.delete(t),Bd(e,r)}var Wd;Wd=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Rt.current)At=!0;else{if((e.lanes&r)===0&&(t.flags&128)===0)return At=!1,Hm(e,t,r);At=(e.flags&131072)!==0}else At=!1,Qe&&(t.flags&1048576)!==0&&bc(t,Qi,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;ho(e,t),e=t.pendingProps;var d=Wr(t,kt.current);Jr(t,r),d=Ha(null,t,a,e,d,r);var f=qa();return t.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ot(a)?(f=!0,Vi(t)):f=!1,t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Da(t),d.updater=uo,t.stateNode=d,d._reactInternals=t,Ya(t,a,e,r),t=tl(null,t,a,!0,f,r)):(t.tag=0,Qe&&f&&Na(t),Pt(null,t,d,r),t=t.child),t;case 16:a=t.elementType;e:{switch(ho(e,t),e=t.pendingProps,d=a._init,a=d(a._payload),t.type=a,d=t.tag=ip(a),e=tn(a,e),d){case 0:t=el(null,t,a,e,r);break e;case 1:t=pd(null,t,a,e,r);break e;case 11:t=cd(null,t,a,e,r);break e;case 14:t=dd(null,t,a,tn(a.type,e),r);break e}throw Error(s(306,a,""))}return t;case 0:return a=t.type,d=t.pendingProps,d=t.elementType===a?d:tn(a,d),el(e,t,a,d,r);case 1:return a=t.type,d=t.pendingProps,d=t.elementType===a?d:tn(a,d),pd(e,t,a,d,r);case 3:e:{if(gd(t),e===null)throw Error(s(387));a=t.pendingProps,f=t.memoizedState,d=f.element,Rc(e,t),no(t,a,null,r);var v=t.memoizedState;if(a=v.element,f.isDehydrated)if(f={element:a,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){d=Yr(Error(s(423)),t),t=vd(e,t,a,r,d);break e}else if(a!==d){d=Yr(Error(s(424)),t),t=vd(e,t,a,r,d);break e}else for(zt=zn(t.stateNode.containerInfo.firstChild),Ft=t,Qe=!0,en=null,r=Pc(t,null,a,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Gr(),a===d){t=Nn(e,t,r);break e}Pt(e,t,a,r)}t=t.child}return t;case 5:return Lc(t),e===null&&Ta(t),a=t.type,d=t.pendingProps,f=e!==null?e.memoizedProps:null,v=d.children,_a(a,d)?v=null:f!==null&&_a(a,f)&&(t.flags|=32),md(e,t),Pt(e,t,v,r),t.child;case 6:return e===null&&Ta(t),null;case 13:return yd(e,t,r);case 4:return Ua(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Vr(t,null,a,r):Pt(e,t,a,r),t.child;case 11:return a=t.type,d=t.pendingProps,d=t.elementType===a?d:tn(a,d),cd(e,t,a,d,r);case 7:return Pt(e,t,t.pendingProps,r),t.child;case 8:return Pt(e,t,t.pendingProps.children,r),t.child;case 12:return Pt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(a=t.type._context,d=t.pendingProps,f=t.memoizedProps,v=d.value,ze(Zi,a._currentValue),a._currentValue=v,f!==null)if(Zt(f.value,v)){if(f.children===d.children&&!Rt.current){t=Nn(e,t,r);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var x=f.dependencies;if(x!==null){v=f.child;for(var S=x.firstContext;S!==null;){if(S.context===a){if(f.tag===1){S=En(-1,r&-r),S.tag=2;var O=f.updateQueue;if(O!==null){O=O.shared;var H=O.pending;H===null?S.next=S:(S.next=H.next,H.next=S),O.pending=S}}f.lanes|=r,S=f.alternate,S!==null&&(S.lanes|=r),Ia(f.return,r,t),x.lanes|=r;break}S=S.next}}else if(f.tag===10)v=f.type===t.type?null:f.child;else if(f.tag===18){if(v=f.return,v===null)throw Error(s(341));v.lanes|=r,x=v.alternate,x!==null&&(x.lanes|=r),Ia(v,r,t),v=f.sibling}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===t){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}Pt(e,t,d.children,r),t=t.child}return t;case 9:return d=t.type,a=t.pendingProps.children,Jr(t,r),d=Vt(d),a=a(d),t.flags|=1,Pt(e,t,a,r),t.child;case 14:return a=t.type,d=tn(a,t.pendingProps),d=tn(a.type,d),dd(e,t,a,d,r);case 15:return hd(e,t,t.type,t.pendingProps,r);case 17:return a=t.type,d=t.pendingProps,d=t.elementType===a?d:tn(a,d),ho(e,t),t.tag=1,Ot(a)?(e=!0,Vi(t)):e=!1,Jr(t,r),rd(t,a,d),Ya(t,a,d,r),tl(null,t,a,!0,e,r);case 19:return xd(e,t,r);case 22:return fd(e,t,r)}throw Error(s(156,t.tag))};function Hd(e,t){return ku(e,t)}function sp(e,t,r,a){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qt(e,t,r,a){return new sp(e,t,r,a)}function _l(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ip(e){if(typeof e=="function")return _l(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ee)return 11;if(e===$)return 14}return 2}function Xn(e,t){var r=e.alternate;return r===null?(r=Qt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ko(e,t,r,a,d,f){var v=2;if(a=e,typeof e=="function")_l(e)&&(v=1);else if(typeof e=="string")v=5;else e:switch(e){case Y:return _r(r.children,d,f,t);case oe:v=8,d|=8;break;case X:return e=Qt(12,r,t,d|2),e.elementType=X,e.lanes=f,e;case ne:return e=Qt(13,r,t,d),e.elementType=ne,e.lanes=f,e;case de:return e=Qt(19,r,t,d),e.elementType=de,e.lanes=f,e;case se:return So(r,d,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ge:v=10;break e;case le:v=9;break e;case Ee:v=11;break e;case $:v=14;break e;case Q:v=16,a=null;break e}throw Error(s(130,e==null?e:typeof e,""))}return t=Qt(v,r,t,d),t.elementType=e,t.type=a,t.lanes=f,t}function _r(e,t,r,a){return e=Qt(7,e,a,t),e.lanes=r,e}function So(e,t,r,a){return e=Qt(22,e,a,t),e.elementType=se,e.lanes=r,e.stateNode={isHidden:!1},e}function bl(e,t,r){return e=Qt(6,e,null,t),e.lanes=r,e}function kl(e,t,r){return t=Qt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function op(e,t,r,a,d){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qo(0),this.expirationTimes=Qo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qo(0),this.identifierPrefix=a,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Sl(e,t,r,a,d,f,v,x,S){return e=new op(e,t,r,x,S),t===1?(t=1,f===!0&&(t|=8)):t=0,f=Qt(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Da(f),e}function ap(e,t,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:U,key:a==null?null:""+a,children:e,containerInfo:t,implementation:r}}function qd(e){if(!e)return Wn;e=e._reactInternals;e:{if(wt(e)!==e||e.tag!==1)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ot(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(s(171))}if(e.tag===1){var r=e.type;if(Ot(r))return wc(e,r,t)}return t}function Gd(e,t,r,a,d,f,v,x,S){return e=Sl(r,a,!0,e,d,f,v,x,S),e.context=qd(null),r=e.current,a=Tt(),d=Qn(r),f=En(a,d),f.callback=t??null,Gn(r,f,d),e.current.lanes=d,Ns(e,d,a),It(e,a),e}function jo(e,t,r,a){var d=t.current,f=Tt(),v=Qn(d);return r=qd(r),t.context===null?t.context=r:t.pendingContext=r,t=En(f,v),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=Gn(d,t,v),e!==null&&(sn(e,d,v,f),to(e,d,v)),v}function Eo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Vd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function jl(e,t){Vd(e,t),(e=e.alternate)&&Vd(e,t)}function lp(){return null}var Kd=typeof reportError=="function"?reportError:function(e){console.error(e)};function El(e){this._internalRoot=e}No.prototype.render=El.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));jo(e,t,null,null)},No.prototype.unmount=El.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;yr(function(){jo(null,e,null,null)}),t[_n]=null}};function No(e){this._internalRoot=e}No.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ru();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Un.length&&t!==0&&t<Un[r].priority;r++);Un.splice(r,0,e),r===0&&Lu(e)}};function Nl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Co(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Jd(){}function up(e,t,r,a,d){if(d){if(typeof a=="function"){var f=a;a=function(){var O=Eo(v);f.call(O)}}var v=Gd(t,a,e,0,null,!1,!1,"",Jd);return e._reactRootContainer=v,e[_n]=v.current,zs(e.nodeType===8?e.parentNode:e),yr(),v}for(;d=e.lastChild;)e.removeChild(d);if(typeof a=="function"){var x=a;a=function(){var O=Eo(S);x.call(O)}}var S=Sl(e,0,!1,null,null,!1,!1,"",Jd);return e._reactRootContainer=S,e[_n]=S.current,zs(e.nodeType===8?e.parentNode:e),yr(function(){jo(t,S,r,a)}),S}function Po(e,t,r,a,d){var f=r._reactRootContainer;if(f){var v=f;if(typeof d=="function"){var x=d;d=function(){var S=Eo(v);x.call(S)}}jo(t,v,e,d)}else v=up(r,t,e,d,a);return Eo(v)}Pu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Es(t.pendingLanes);r!==0&&(Yo(t,r|1),It(t,rt()),(Oe&6)===0&&(es=rt()+500,Hn()))}break;case 13:yr(function(){var a=jn(e,1);if(a!==null){var d=Tt();sn(a,e,1,d)}}),jl(e,1)}},Xo=function(e){if(e.tag===13){var t=jn(e,134217728);if(t!==null){var r=Tt();sn(t,e,134217728,r)}jl(e,134217728)}},Tu=function(e){if(e.tag===13){var t=Qn(e),r=jn(e,t);if(r!==null){var a=Tt();sn(r,e,t,a)}jl(e,t)}},Ru=function(){return Ue},Ou=function(e,t){var r=Ue;try{return Ue=e,t()}finally{Ue=r}},js=function(e,t,r){switch(t){case"input":if(He(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==e&&a.form===e.form){var d=qi(a);if(!d)throw Error(s(90));Ht(a),He(a,d)}}}break;case"textarea":Tr(e,r);break;case"select":t=r.value,t!=null&&wn(e,!!r.multiple,t,!1)}},Ae=yl,ot=yr;var cp={usingClientEntryPoint:!1,Events:[Hs,zr,qi,Re,ke,yl]},si={findFiberByHostInstance:cr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},dp={bundleType:si.bundleType,version:si.version,rendererPackageName:si.rendererPackageName,rendererConfig:si.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:F.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=_u(e),e===null?null:e.stateNode},findFiberByHostInstance:si.findFiberByHostInstance||lp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var To=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!To.isDisabled&&To.supportsFiber)try{Ei=To.inject(dp),fn=To}catch{}}return $t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cp,$t.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nl(t))throw Error(s(200));return ap(e,t,null,r)},$t.createRoot=function(e,t){if(!Nl(e))throw Error(s(299));var r=!1,a="",d=Kd;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(d=t.onRecoverableError)),t=Sl(e,1,!1,null,null,r,!1,a,d),e[_n]=t.current,zs(e.nodeType===8?e.parentNode:e),new El(t)},$t.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=_u(t),e=e===null?null:e.stateNode,e},$t.flushSync=function(e){return yr(e)},$t.hydrate=function(e,t,r){if(!Co(t))throw Error(s(200));return Po(null,e,t,!0,r)},$t.hydrateRoot=function(e,t,r){if(!Nl(e))throw Error(s(405));var a=r!=null&&r.hydratedSources||null,d=!1,f="",v=Kd;if(r!=null&&(r.unstable_strictMode===!0&&(d=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onRecoverableError!==void 0&&(v=r.onRecoverableError)),t=Gd(t,null,e,1,r??null,d,!1,f,v),e[_n]=t.current,zs(e),a)for(e=0;e<a.length;e++)r=a[e],d=r._getVersion,d=d(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,d]:t.mutableSourceEagerHydrationData.push(r,d);return new No(t)},$t.render=function(e,t,r){if(!Co(t))throw Error(s(200));return Po(null,e,t,!1,r)},$t.unmountComponentAtNode=function(e){if(!Co(e))throw Error(s(40));return e._reactRootContainer?(yr(function(){Po(null,null,e,!1,function(){e._reactRootContainer=null,e[_n]=null})}),!0):!1},$t.unstable_batchedUpdates=yl,$t.unstable_renderSubtreeIntoContainer=function(e,t,r,a){if(!Co(r))throw Error(s(200));if(e==null||e._reactInternals===void 0)throw Error(s(38));return Po(e,t,r,!1,a)},$t.version="18.3.1-next-f1338f8080-20240426",$t}var rh;function xp(){if(rh)return Tl.exports;rh=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(n){console.error(n)}}return i(),Tl.exports=wp(),Tl.exports}var sh;function _p(){if(sh)return Ro;sh=1;var i=xp();return Ro.createRoot=i.createRoot,Ro.hydrateRoot=i.hydrateRoot,Ro}var bp=_p();const kp=au(bp);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ih="popstate";function Sp(i={}){function n(o,l){let{pathname:u,search:h,hash:m}=o.location;return Vl("",{pathname:u,search:h,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function s(o,l){return typeof l=="string"?l:di(l)}return Ep(n,s,null,i)}function Ye(i,n){if(i===!1||i===null||typeof i>"u")throw new Error(n)}function un(i,n){if(!i){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function jp(){return Math.random().toString(36).substring(2,10)}function oh(i,n){return{usr:i.state,key:i.key,idx:n}}function Vl(i,n,s=null,o){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof n=="string"?vs(n):n,state:s,key:n&&n.key||o||jp()}}function di({pathname:i="/",search:n="",hash:s=""}){return n&&n!=="?"&&(i+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(i+=s.charAt(0)==="#"?s:"#"+s),i}function vs(i){let n={};if(i){let s=i.indexOf("#");s>=0&&(n.hash=i.substring(s),i=i.substring(0,s));let o=i.indexOf("?");o>=0&&(n.search=i.substring(o),i=i.substring(0,o)),i&&(n.pathname=i)}return n}function Ep(i,n,s,o={}){let{window:l=document.defaultView,v5Compat:u=!1}=o,h=l.history,m="POP",p=null,g=y();g==null&&(g=0,h.replaceState({...h.state,idx:g},""));function y(){return(h.state||{idx:null}).idx}function w(){m="POP";let C=y(),D=C==null?null:C-g;g=C,p&&p({action:m,location:P.location,delta:D})}function k(C,D){m="PUSH";let N=Vl(P.location,C,D);g=y()+1;let I=oh(N,g),F=P.createHref(N);try{h.pushState(I,"",F)}catch(Z){if(Z instanceof DOMException&&Z.name==="DataCloneError")throw Z;l.location.assign(F)}u&&p&&p({action:m,location:P.location,delta:1})}function j(C,D){m="REPLACE";let N=Vl(P.location,C,D);g=y();let I=oh(N,g),F=P.createHref(N);h.replaceState(I,"",F),u&&p&&p({action:m,location:P.location,delta:0})}function A(C){return Np(C)}let P={get action(){return m},get location(){return i(l,h)},listen(C){if(p)throw new Error("A history only accepts one active listener");return l.addEventListener(ih,w),p=C,()=>{l.removeEventListener(ih,w),p=null}},createHref(C){return n(l,C)},createURL:A,encodeLocation(C){let D=A(C);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:k,replace:j,go(C){return h.go(C)}};return P}function Np(i,n=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),Ye(s,"No window.location.(origin|href) available to create URL");let o=typeof i=="string"?i:di(i);return o=o.replace(/ $/,"%20"),!n&&o.startsWith("//")&&(o=s+o),new URL(o,s)}function Fh(i,n,s="/"){return Cp(i,n,s,!1)}function Cp(i,n,s,o){let l=typeof n=="string"?vs(n):n,u=Rn(l.pathname||"/",s);if(u==null)return null;let h=zh(i);Pp(h);let m=null;for(let p=0;m==null&&p<h.length;++p){let g=Fp(u);m=Up(h[p],g,o)}return m}function zh(i,n=[],s=[],o="",l=!1){let u=(h,m,p=l,g)=>{let y={relativePath:g===void 0?h.path||"":g,caseSensitive:h.caseSensitive===!0,childrenIndex:m,route:h};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(o)&&p)return;Ye(y.relativePath.startsWith(o),`Absolute route path "${y.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(o.length)}let w=Tn([o,y.relativePath]),k=s.concat(y);h.children&&h.children.length>0&&(Ye(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),zh(h.children,n,k,w,p)),!(h.path==null&&!h.index)&&n.push({path:w,score:$p(w,h.index),routesMeta:k})};return i.forEach((h,m)=>{if(h.path===""||!h.path?.includes("?"))u(h,m);else for(let p of Bh(h.path))u(h,m,!0,p)}),n}function Bh(i){let n=i.split("/");if(n.length===0)return[];let[s,...o]=n,l=s.endsWith("?"),u=s.replace(/\?$/,"");if(o.length===0)return l?[u,""]:[u];let h=Bh(o.join("/")),m=[];return m.push(...h.map(p=>p===""?u:[u,p].join("/"))),l&&m.push(...h),m.map(p=>i.startsWith("/")&&p===""?"/":p)}function Pp(i){i.sort((n,s)=>n.score!==s.score?s.score-n.score:Dp(n.routesMeta.map(o=>o.childrenIndex),s.routesMeta.map(o=>o.childrenIndex)))}var Tp=/^:[\w-]+$/,Rp=3,Op=2,Ap=1,Lp=10,Ip=-2,ah=i=>i==="*";function $p(i,n){let s=i.split("/"),o=s.length;return s.some(ah)&&(o+=Ip),n&&(o+=Op),s.filter(l=>!ah(l)).reduce((l,u)=>l+(Tp.test(u)?Rp:u===""?Ap:Lp),o)}function Dp(i,n){return i.length===n.length&&i.slice(0,-1).every((o,l)=>o===n[l])?i[i.length-1]-n[n.length-1]:0}function Up(i,n,s=!1){let{routesMeta:o}=i,l={},u="/",h=[];for(let m=0;m<o.length;++m){let p=o[m],g=m===o.length-1,y=u==="/"?n:n.slice(u.length)||"/",w=Fo({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},y),k=p.route;if(!w&&g&&s&&!o[o.length-1].route.index&&(w=Fo({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},y)),!w)return null;Object.assign(l,w.params),h.push({params:l,pathname:Tn([u,w.pathname]),pathnameBase:Hp(Tn([u,w.pathnameBase])),route:k}),w.pathnameBase!=="/"&&(u=Tn([u,w.pathnameBase]))}return h}function Fo(i,n){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[s,o]=Mp(i.path,i.caseSensitive,i.end),l=n.match(s);if(!l)return null;let u=l[0],h=u.replace(/(.)\/+$/,"$1"),m=l.slice(1);return{params:o.reduce((g,{paramName:y,isOptional:w},k)=>{if(y==="*"){let A=m[k]||"";h=u.slice(0,u.length-A.length).replace(/(.)\/+$/,"$1")}const j=m[k];return w&&!j?g[y]=void 0:g[y]=(j||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:h,pattern:i}}function Mp(i,n=!1,s=!0){un(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let o=[],l="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,m,p)=>(o.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(o.push({paramName:"*"}),l+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?l+="\\/*$":i!==""&&i!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,n?void 0:"i"),o]}function Fp(i){try{return i.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return un(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),i}}function Rn(i,n){if(n==="/")return i;if(!i.toLowerCase().startsWith(n.toLowerCase()))return null;let s=n.endsWith("/")?n.length-1:n.length,o=i.charAt(s);return o&&o!=="/"?null:i.slice(s)||"/"}function zp(i,n="/"){let{pathname:s,search:o="",hash:l=""}=typeof i=="string"?vs(i):i;return{pathname:s?s.startsWith("/")?s:Bp(s,n):n,search:qp(o),hash:Gp(l)}}function Bp(i,n){let s=n.replace(/\/+$/,"").split("/");return i.split("/").forEach(l=>{l===".."?s.length>1&&s.pop():l!=="."&&s.push(l)}),s.length>1?s.join("/"):"/"}function Al(i,n,s,o){return`Cannot include a '${i}' character in a manually specified \`to.${n}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Wp(i){return i.filter((n,s)=>s===0||n.route.path&&n.route.path.length>0)}function uu(i){let n=Wp(i);return n.map((s,o)=>o===n.length-1?s.pathname:s.pathnameBase)}function cu(i,n,s,o=!1){let l;typeof i=="string"?l=vs(i):(l={...i},Ye(!l.pathname||!l.pathname.includes("?"),Al("?","pathname","search",l)),Ye(!l.pathname||!l.pathname.includes("#"),Al("#","pathname","hash",l)),Ye(!l.search||!l.search.includes("#"),Al("#","search","hash",l)));let u=i===""||l.pathname==="",h=u?"/":l.pathname,m;if(h==null)m=s;else{let w=n.length-1;if(!o&&h.startsWith("..")){let k=h.split("/");for(;k[0]==="..";)k.shift(),w-=1;l.pathname=k.join("/")}m=w>=0?n[w]:"/"}let p=zp(l,m),g=h&&h!=="/"&&h.endsWith("/"),y=(u||h===".")&&s.endsWith("/");return!p.pathname.endsWith("/")&&(g||y)&&(p.pathname+="/"),p}var Tn=i=>i.join("/").replace(/\/\/+/g,"/"),Hp=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),qp=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,Gp=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function Vp(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var Wh=["POST","PUT","PATCH","DELETE"];new Set(Wh);var Kp=["GET",...Wh];new Set(Kp);var ys=_.createContext(null);ys.displayName="DataRouter";var qo=_.createContext(null);qo.displayName="DataRouterState";_.createContext(!1);var Hh=_.createContext({isTransitioning:!1});Hh.displayName="ViewTransition";var Jp=_.createContext(new Map);Jp.displayName="Fetchers";var Qp=_.createContext(null);Qp.displayName="Await";var cn=_.createContext(null);cn.displayName="Navigation";var gi=_.createContext(null);gi.displayName="Location";var dn=_.createContext({outlet:null,matches:[],isDataRoute:!1});dn.displayName="Route";var du=_.createContext(null);du.displayName="RouteError";function Yp(i,{relative:n}={}){Ye(ws(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:o}=_.useContext(cn),{hash:l,pathname:u,search:h}=vi(i,{relative:n}),m=u;return s!=="/"&&(m=u==="/"?s:Tn([s,u])),o.createHref({pathname:m,search:h,hash:l})}function ws(){return _.useContext(gi)!=null}function On(){return Ye(ws(),"useLocation() may be used only in the context of a <Router> component."),_.useContext(gi).location}var qh="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Gh(i){_.useContext(cn).static||_.useLayoutEffect(i)}function hu(){let{isDataRoute:i}=_.useContext(dn);return i?dg():Xp()}function Xp(){Ye(ws(),"useNavigate() may be used only in the context of a <Router> component.");let i=_.useContext(ys),{basename:n,navigator:s}=_.useContext(cn),{matches:o}=_.useContext(dn),{pathname:l}=On(),u=JSON.stringify(uu(o)),h=_.useRef(!1);return Gh(()=>{h.current=!0}),_.useCallback((p,g={})=>{if(un(h.current,qh),!h.current)return;if(typeof p=="number"){s.go(p);return}let y=cu(p,JSON.parse(u),l,g.relative==="path");i==null&&n!=="/"&&(y.pathname=y.pathname==="/"?n:Tn([n,y.pathname])),(g.replace?s.replace:s.push)(y,g.state,g)},[n,s,u,l,i])}_.createContext(null);function Zp(){let{matches:i}=_.useContext(dn),n=i[i.length-1];return n?n.params:{}}function vi(i,{relative:n}={}){let{matches:s}=_.useContext(dn),{pathname:o}=On(),l=JSON.stringify(uu(s));return _.useMemo(()=>cu(i,JSON.parse(l),o,n==="path"),[i,l,o,n])}function eg(i,n){return Vh(i,n)}function Vh(i,n,s,o,l){Ye(ws(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=_.useContext(cn),{matches:h}=_.useContext(dn),m=h[h.length-1],p=m?m.params:{},g=m?m.pathname:"/",y=m?m.pathnameBase:"/",w=m&&m.route;{let N=w&&w.path||"";Kh(g,!w||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let k=On(),j;if(n){let N=typeof n=="string"?vs(n):n;Ye(y==="/"||N.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${N.pathname}" was given in the \`location\` prop.`),j=N}else j=k;let A=j.pathname||"/",P=A;if(y!=="/"){let N=y.replace(/^\//,"").split("/");P="/"+A.replace(/^\//,"").split("/").slice(N.length).join("/")}let C=Fh(i,{pathname:P});un(w||C!=null,`No routes matched location "${j.pathname}${j.search}${j.hash}" `),un(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${j.pathname}${j.search}${j.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let D=ig(C&&C.map(N=>Object.assign({},N,{params:Object.assign({},p,N.params),pathname:Tn([y,u.encodeLocation?u.encodeLocation(N.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?y:Tn([y,u.encodeLocation?u.encodeLocation(N.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathnameBase])})),h,s,o,l);return n&&D?_.createElement(gi.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...j},navigationType:"POP"}},D):D}function tg(){let i=cg(),n=Vp(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),s=i instanceof Error?i.stack:null,o="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:o},u={padding:"2px 4px",backgroundColor:o},h=null;return console.error("Error handled by React Router default ErrorBoundary:",i),h=_.createElement(_.Fragment,null,_.createElement("p",null," Hey developer "),_.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",_.createElement("code",{style:u},"ErrorBoundary")," or"," ",_.createElement("code",{style:u},"errorElement")," prop on your route.")),_.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},n),s?_.createElement("pre",{style:l},s):null,h)}var ng=_.createElement(tg,null),rg=class extends _.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,n){return n.location!==i.location||n.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:n.error,location:n.location,revalidation:i.revalidation||n.revalidation}}componentDidCatch(i,n){this.props.unstable_onError?this.props.unstable_onError(i,n):console.error("React Router caught the following error during render",i)}render(){return this.state.error!==void 0?_.createElement(dn.Provider,{value:this.props.routeContext},_.createElement(du.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function sg({routeContext:i,match:n,children:s}){let o=_.useContext(ys);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),_.createElement(dn.Provider,{value:i},s)}function ig(i,n=[],s=null,o=null,l=null){if(i==null){if(!s)return null;if(s.errors)i=s.matches;else if(n.length===0&&!s.initialized&&s.matches.length>0)i=s.matches;else return null}let u=i,h=s?.errors;if(h!=null){let g=u.findIndex(y=>y.route.id&&h?.[y.route.id]!==void 0);Ye(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),u=u.slice(0,Math.min(u.length,g+1))}let m=!1,p=-1;if(s)for(let g=0;g<u.length;g++){let y=u[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(p=g),y.route.id){let{loaderData:w,errors:k}=s,j=y.route.loader&&!w.hasOwnProperty(y.route.id)&&(!k||k[y.route.id]===void 0);if(y.route.lazy||j){m=!0,p>=0?u=u.slice(0,p+1):u=[u[0]];break}}}return u.reduceRight((g,y,w)=>{let k,j=!1,A=null,P=null;s&&(k=h&&y.route.id?h[y.route.id]:void 0,A=y.route.errorElement||ng,m&&(p<0&&w===0?(Kh("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),j=!0,P=null):p===w&&(j=!0,P=y.route.hydrateFallbackElement||null)));let C=n.concat(u.slice(0,w+1)),D=()=>{let N;return k?N=A:j?N=P:y.route.Component?N=_.createElement(y.route.Component,null):y.route.element?N=y.route.element:N=g,_.createElement(sg,{match:y,routeContext:{outlet:g,matches:C,isDataRoute:s!=null},children:N})};return s&&(y.route.ErrorBoundary||y.route.errorElement||w===0)?_.createElement(rg,{location:s.location,revalidation:s.revalidation,component:A,error:k,children:D(),routeContext:{outlet:null,matches:C,isDataRoute:!0},unstable_onError:o}):D()},null)}function fu(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function og(i){let n=_.useContext(ys);return Ye(n,fu(i)),n}function ag(i){let n=_.useContext(qo);return Ye(n,fu(i)),n}function lg(i){let n=_.useContext(dn);return Ye(n,fu(i)),n}function mu(i){let n=lg(i),s=n.matches[n.matches.length-1];return Ye(s.route.id,`${i} can only be used on routes that contain a unique "id"`),s.route.id}function ug(){return mu("useRouteId")}function cg(){let i=_.useContext(du),n=ag("useRouteError"),s=mu("useRouteError");return i!==void 0?i:n.errors?.[s]}function dg(){let{router:i}=og("useNavigate"),n=mu("useNavigate"),s=_.useRef(!1);return Gh(()=>{s.current=!0}),_.useCallback(async(l,u={})=>{un(s.current,qh),s.current&&(typeof l=="number"?i.navigate(l):await i.navigate(l,{fromRouteId:n,...u}))},[i,n])}var lh={};function Kh(i,n,s){!n&&!lh[i]&&(lh[i]=!0,un(!1,s))}_.memo(hg);function hg({routes:i,future:n,state:s,unstable_onError:o}){return Vh(i,void 0,s,o,n)}function Jh({to:i,replace:n,state:s,relative:o}){Ye(ws(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=_.useContext(cn);un(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=_.useContext(dn),{pathname:h}=On(),m=hu(),p=cu(i,uu(u),h,o==="path"),g=JSON.stringify(p);return _.useEffect(()=>{m(JSON.parse(g),{replace:n,state:s,relative:o})},[m,g,o,n,s]),null}function on(i){Ye(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function fg({basename:i="/",children:n=null,location:s,navigationType:o="POP",navigator:l,static:u=!1}){Ye(!ws(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=i.replace(/^\/*/,"/"),m=_.useMemo(()=>({basename:h,navigator:l,static:u,future:{}}),[h,l,u]);typeof s=="string"&&(s=vs(s));let{pathname:p="/",search:g="",hash:y="",state:w=null,key:k="default"}=s,j=_.useMemo(()=>{let A=Rn(p,h);return A==null?null:{location:{pathname:A,search:g,hash:y,state:w,key:k},navigationType:o}},[h,p,g,y,w,k,o]);return un(j!=null,`<Router basename="${h}"> is not able to match the URL "${p}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:_.createElement(cn.Provider,{value:m},_.createElement(gi.Provider,{children:n,value:j}))}function mg({children:i,location:n}){return eg(Kl(i),n)}function Kl(i,n=[]){let s=[];return _.Children.forEach(i,(o,l)=>{if(!_.isValidElement(o))return;let u=[...n,l];if(o.type===_.Fragment){s.push.apply(s,Kl(o.props.children,u));return}Ye(o.type===on,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ye(!o.props.index||!o.props.children,"An index route cannot have child routes.");let h={id:o.props.id||u.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,middleware:o.props.middleware,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(h.children=Kl(o.props.children,u)),s.push(h)}),s}var Uo="get",Mo="application/x-www-form-urlencoded";function Go(i){return i!=null&&typeof i.tagName=="string"}function pg(i){return Go(i)&&i.tagName.toLowerCase()==="button"}function gg(i){return Go(i)&&i.tagName.toLowerCase()==="form"}function vg(i){return Go(i)&&i.tagName.toLowerCase()==="input"}function yg(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function wg(i,n){return i.button===0&&(!n||n==="_self")&&!yg(i)}var Oo=null;function xg(){if(Oo===null)try{new FormData(document.createElement("form"),0),Oo=!1}catch{Oo=!0}return Oo}var _g=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ll(i){return i!=null&&!_g.has(i)?(un(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Mo}"`),null):i}function bg(i,n){let s,o,l,u,h;if(gg(i)){let m=i.getAttribute("action");o=m?Rn(m,n):null,s=i.getAttribute("method")||Uo,l=Ll(i.getAttribute("enctype"))||Mo,u=new FormData(i)}else if(pg(i)||vg(i)&&(i.type==="submit"||i.type==="image")){let m=i.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=i.getAttribute("formaction")||m.getAttribute("action");if(o=p?Rn(p,n):null,s=i.getAttribute("formmethod")||m.getAttribute("method")||Uo,l=Ll(i.getAttribute("formenctype"))||Ll(m.getAttribute("enctype"))||Mo,u=new FormData(m,i),!xg()){let{name:g,type:y,value:w}=i;if(y==="image"){let k=g?`${g}.`:"";u.append(`${k}x`,"0"),u.append(`${k}y`,"0")}else g&&u.append(g,w)}}else{if(Go(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=Uo,o=null,l=Mo,h=i}return u&&l==="text/plain"&&(h=u,u=void 0),{action:o,method:s.toLowerCase(),encType:l,formData:u,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function pu(i,n){if(i===!1||i===null||typeof i>"u")throw new Error(n)}function kg(i,n,s){let o=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return o.pathname==="/"?o.pathname=`_root.${s}`:n&&Rn(o.pathname,n)==="/"?o.pathname=`${n.replace(/\/$/,"")}/_root.${s}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${s}`,o}async function Sg(i,n){if(i.id in n)return n[i.id];try{let s=await import(i.module);return n[i.id]=s,s}catch(s){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function jg(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function Eg(i,n,s){let o=await Promise.all(i.map(async l=>{let u=n.routes[l.route.id];if(u){let h=await Sg(u,s);return h.links?h.links():[]}return[]}));return Tg(o.flat(1).filter(jg).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function uh(i,n,s,o,l,u){let h=(p,g)=>s[g]?p.route.id!==s[g].route.id:!0,m=(p,g)=>s[g].pathname!==p.pathname||s[g].route.path?.endsWith("*")&&s[g].params["*"]!==p.params["*"];return u==="assets"?n.filter((p,g)=>h(p,g)||m(p,g)):u==="data"?n.filter((p,g)=>{let y=o.routes[p.route.id];if(!y||!y.hasLoader)return!1;if(h(p,g)||m(p,g))return!0;if(p.route.shouldRevalidate){let w=p.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:s[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function Ng(i,n,{includeHydrateFallback:s}={}){return Cg(i.map(o=>{let l=n.routes[o.route.id];if(!l)return[];let u=[l.module];return l.clientActionModule&&(u=u.concat(l.clientActionModule)),l.clientLoaderModule&&(u=u.concat(l.clientLoaderModule)),s&&l.hydrateFallbackModule&&(u=u.concat(l.hydrateFallbackModule)),l.imports&&(u=u.concat(l.imports)),u}).flat(1))}function Cg(i){return[...new Set(i)]}function Pg(i){let n={},s=Object.keys(i).sort();for(let o of s)n[o]=i[o];return n}function Tg(i,n){let s=new Set;return new Set(n),i.reduce((o,l)=>{let u=JSON.stringify(Pg(l));return s.has(u)||(s.add(u),o.push({key:u,link:l})),o},[])}function Qh(){let i=_.useContext(ys);return pu(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function Rg(){let i=_.useContext(qo);return pu(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var gu=_.createContext(void 0);gu.displayName="FrameworkContext";function Yh(){let i=_.useContext(gu);return pu(i,"You must render this element inside a <HydratedRouter> element"),i}function Og(i,n){let s=_.useContext(gu),[o,l]=_.useState(!1),[u,h]=_.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:g,onMouseLeave:y,onTouchStart:w}=n,k=_.useRef(null);_.useEffect(()=>{if(i==="render"&&h(!0),i==="viewport"){let P=D=>{D.forEach(N=>{h(N.isIntersecting)})},C=new IntersectionObserver(P,{threshold:.5});return k.current&&C.observe(k.current),()=>{C.disconnect()}}},[i]),_.useEffect(()=>{if(o){let P=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(P)}}},[o]);let j=()=>{l(!0)},A=()=>{l(!1),h(!1)};return s?i!=="intent"?[u,k,{}]:[u,k,{onFocus:oi(m,j),onBlur:oi(p,A),onMouseEnter:oi(g,j),onMouseLeave:oi(y,A),onTouchStart:oi(w,j)}]:[!1,k,{}]}function oi(i,n){return s=>{i&&i(s),s.defaultPrevented||n(s)}}function Ag({page:i,...n}){let{router:s}=Qh(),o=_.useMemo(()=>Fh(s.routes,i,s.basename),[s.routes,i,s.basename]);return o?_.createElement(Ig,{page:i,matches:o,...n}):null}function Lg(i){let{manifest:n,routeModules:s}=Yh(),[o,l]=_.useState([]);return _.useEffect(()=>{let u=!1;return Eg(i,n,s).then(h=>{u||l(h)}),()=>{u=!0}},[i,n,s]),o}function Ig({page:i,matches:n,...s}){let o=On(),{manifest:l,routeModules:u}=Yh(),{basename:h}=Qh(),{loaderData:m,matches:p}=Rg(),g=_.useMemo(()=>uh(i,n,p,l,o,"data"),[i,n,p,l,o]),y=_.useMemo(()=>uh(i,n,p,l,o,"assets"),[i,n,p,l,o]),w=_.useMemo(()=>{if(i===o.pathname+o.search+o.hash)return[];let A=new Set,P=!1;if(n.forEach(D=>{let N=l.routes[D.route.id];!N||!N.hasLoader||(!g.some(I=>I.route.id===D.route.id)&&D.route.id in m&&u[D.route.id]?.shouldRevalidate||N.hasClientLoader?P=!0:A.add(D.route.id))}),A.size===0)return[];let C=kg(i,h,"data");return P&&A.size>0&&C.searchParams.set("_routes",n.filter(D=>A.has(D.route.id)).map(D=>D.route.id).join(",")),[C.pathname+C.search]},[h,m,o,l,g,n,i,u]),k=_.useMemo(()=>Ng(y,l),[y,l]),j=Lg(y);return _.createElement(_.Fragment,null,w.map(A=>_.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...s})),k.map(A=>_.createElement("link",{key:A,rel:"modulepreload",href:A,...s})),j.map(({key:A,link:P})=>_.createElement("link",{key:A,nonce:s.nonce,...P})))}function $g(...i){return n=>{i.forEach(s=>{typeof s=="function"?s(n):s!=null&&(s.current=n)})}}var Xh=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Xh&&(window.__reactRouterVersion="7.9.4")}catch{}function Dg({basename:i,children:n,window:s}){let o=_.useRef();o.current==null&&(o.current=Sp({window:s,v5Compat:!0}));let l=o.current,[u,h]=_.useState({action:l.action,location:l.location}),m=_.useCallback(p=>{_.startTransition(()=>h(p))},[h]);return _.useLayoutEffect(()=>l.listen(m),[l,m]),_.createElement(fg,{basename:i,children:n,location:u.location,navigationType:u.action,navigator:l})}var Zh=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,it=_.forwardRef(function({onClick:n,discover:s="render",prefetch:o="none",relative:l,reloadDocument:u,replace:h,state:m,target:p,to:g,preventScrollReset:y,viewTransition:w,...k},j){let{basename:A}=_.useContext(cn),P=typeof g=="string"&&Zh.test(g),C,D=!1;if(typeof g=="string"&&P&&(C=g,Xh))try{let X=new URL(window.location.href),ge=g.startsWith("//")?new URL(X.protocol+g):new URL(g),le=Rn(ge.pathname,A);ge.origin===X.origin&&le!=null?g=le+ge.search+ge.hash:D=!0}catch{un(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let N=Yp(g,{relative:l}),[I,F,Z]=Og(o,k),U=zg(g,{replace:h,state:m,target:p,preventScrollReset:y,relative:l,viewTransition:w});function Y(X){n&&n(X),X.defaultPrevented||U(X)}let oe=_.createElement("a",{...k,...Z,href:C||N,onClick:D||u?n:Y,ref:$g(j,F),target:p,"data-discover":!P&&s==="render"?"true":void 0});return I&&!P?_.createElement(_.Fragment,null,oe,_.createElement(Ag,{page:N})):oe});it.displayName="Link";var Ug=_.forwardRef(function({"aria-current":n="page",caseSensitive:s=!1,className:o="",end:l=!1,style:u,to:h,viewTransition:m,children:p,...g},y){let w=vi(h,{relative:g.relative}),k=On(),j=_.useContext(qo),{navigator:A,basename:P}=_.useContext(cn),C=j!=null&&Gg(w)&&m===!0,D=A.encodeLocation?A.encodeLocation(w).pathname:w.pathname,N=k.pathname,I=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;s||(N=N.toLowerCase(),I=I?I.toLowerCase():null,D=D.toLowerCase()),I&&P&&(I=Rn(I,P)||I);const F=D!=="/"&&D.endsWith("/")?D.length-1:D.length;let Z=N===D||!l&&N.startsWith(D)&&N.charAt(F)==="/",U=I!=null&&(I===D||!l&&I.startsWith(D)&&I.charAt(D.length)==="/"),Y={isActive:Z,isPending:U,isTransitioning:C},oe=Z?n:void 0,X;typeof o=="function"?X=o(Y):X=[o,Z?"active":null,U?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let ge=typeof u=="function"?u(Y):u;return _.createElement(it,{...g,"aria-current":oe,className:X,ref:y,style:ge,to:h,viewTransition:m},typeof p=="function"?p(Y):p)});Ug.displayName="NavLink";var Mg=_.forwardRef(({discover:i="render",fetcherKey:n,navigate:s,reloadDocument:o,replace:l,state:u,method:h=Uo,action:m,onSubmit:p,relative:g,preventScrollReset:y,viewTransition:w,...k},j)=>{let A=Hg(),P=qg(m,{relative:g}),C=h.toLowerCase()==="get"?"get":"post",D=typeof m=="string"&&Zh.test(m),N=I=>{if(p&&p(I),I.defaultPrevented)return;I.preventDefault();let F=I.nativeEvent.submitter,Z=F?.getAttribute("formmethod")||h;A(F||I.currentTarget,{fetcherKey:n,method:Z,navigate:s,replace:l,state:u,relative:g,preventScrollReset:y,viewTransition:w})};return _.createElement("form",{ref:j,method:C,action:P,onSubmit:o?p:N,...k,"data-discover":!D&&i==="render"?"true":void 0})});Mg.displayName="Form";function Fg(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ef(i){let n=_.useContext(ys);return Ye(n,Fg(i)),n}function zg(i,{target:n,replace:s,state:o,preventScrollReset:l,relative:u,viewTransition:h}={}){let m=hu(),p=On(),g=vi(i,{relative:u});return _.useCallback(y=>{if(wg(y,n)){y.preventDefault();let w=s!==void 0?s:di(p)===di(g);m(i,{replace:w,state:o,preventScrollReset:l,relative:u,viewTransition:h})}},[p,m,g,s,o,n,i,l,u,h])}var Bg=0,Wg=()=>`__${String(++Bg)}__`;function Hg(){let{router:i}=ef("useSubmit"),{basename:n}=_.useContext(cn),s=ug();return _.useCallback(async(o,l={})=>{let{action:u,method:h,encType:m,formData:p,body:g}=bg(o,n);if(l.navigate===!1){let y=l.fetcherKey||Wg();await i.fetch(y,s,l.action||u,{preventScrollReset:l.preventScrollReset,formData:p,body:g,formMethod:l.method||h,formEncType:l.encType||m,flushSync:l.flushSync})}else await i.navigate(l.action||u,{preventScrollReset:l.preventScrollReset,formData:p,body:g,formMethod:l.method||h,formEncType:l.encType||m,replace:l.replace,state:l.state,fromRouteId:s,flushSync:l.flushSync,viewTransition:l.viewTransition})},[i,n,s])}function qg(i,{relative:n}={}){let{basename:s}=_.useContext(cn),o=_.useContext(dn);Ye(o,"useFormAction must be used inside a RouteContext");let[l]=o.matches.slice(-1),u={...vi(i||".",{relative:n})},h=On();if(i==null){u.search=h.search;let m=new URLSearchParams(u.search),p=m.getAll("index");if(p.some(y=>y==="")){m.delete("index"),p.filter(w=>w).forEach(w=>m.append("index",w));let y=m.toString();u.search=y?`?${y}`:""}}return(!i||i===".")&&l.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(u.pathname=u.pathname==="/"?s:Tn([s,u.pathname])),di(u)}function Gg(i,{relative:n}={}){let s=_.useContext(Hh);Ye(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=ef("useViewTransitionState"),l=vi(i,{relative:n});if(!s.isTransitioning)return!1;let u=Rn(s.currentLocation.pathname,o)||s.currentLocation.pathname,h=Rn(s.nextLocation.pathname,o)||s.nextLocation.pathname;return Fo(l.pathname,h)!=null||Fo(l.pathname,u)!=null}const Vg="modulepreload",Kg=function(i){return"/"+i},ch={},yi=function(n,s,o){let l=Promise.resolve();if(s&&s.length>0){let g=function(y){return Promise.all(y.map(w=>Promise.resolve(w).then(k=>({status:"fulfilled",value:k}),k=>({status:"rejected",reason:k}))))};var h=g;document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),p=m?.nonce||m?.getAttribute("nonce");l=g(s.map(y=>{if(y=Kg(y),y in ch)return;ch[y]=!0;const w=y.endsWith(".css"),k=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${k}`))return;const j=document.createElement("link");if(j.rel=w?"stylesheet":Vg,w||(j.as="script"),j.crossOrigin="",j.href=y,p&&j.setAttribute("nonce",p),document.head.appendChild(j),w)return new Promise((A,P)=>{j.addEventListener("load",A),j.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${y}`)))})}))}function u(m){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=m,window.dispatchEvent(p),!p.defaultPrevented)throw m}return l.then(m=>{for(const p of m||[])p.status==="rejected"&&u(p.reason);return n().catch(u)})},Jg=i=>{let n;return i?n=i:typeof fetch>"u"?n=(...s)=>yi(async()=>{const{default:o}=await Promise.resolve().then(()=>xs);return{default:o}},[]).then(({default:o})=>o(...s)):n=fetch,(...s)=>n(...s)};class vu extends Error{constructor(n,s="FunctionsError",o){super(n),this.name=s,this.context=o}}class dh extends vu{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class hh extends vu{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class fh extends vu{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var Jl;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(Jl||(Jl={}));var Qg=function(i,n,s,o){function l(u){return u instanceof s?u:new s(function(h){h(u)})}return new(s||(s=Promise))(function(u,h){function m(y){try{g(o.next(y))}catch(w){h(w)}}function p(y){try{g(o.throw(y))}catch(w){h(w)}}function g(y){y.done?u(y.value):l(y.value).then(m,p)}g((o=o.apply(i,n||[])).next())})};class Yg{constructor(n,{headers:s={},customFetch:o,region:l=Jl.Any}={}){this.url=n,this.headers=s,this.region=l,this.fetch=Jg(o)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return Qg(this,arguments,void 0,function*(s,o={}){var l;try{const{headers:u,method:h,body:m,signal:p}=o;let g={},{region:y}=o;y||(y=this.region);const w=new URL(`${this.url}/${s}`);y&&y!=="any"&&(g["x-region"]=y,w.searchParams.set("forceFunctionRegion",y));let k;m&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)&&(typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(g["Content-Type"]="application/octet-stream",k=m):typeof m=="string"?(g["Content-Type"]="text/plain",k=m):typeof FormData<"u"&&m instanceof FormData?k=m:(g["Content-Type"]="application/json",k=JSON.stringify(m)));const j=yield this.fetch(w.toString(),{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},g),this.headers),u),body:k,signal:p}).catch(D=>{throw D.name==="AbortError"?D:new dh(D)}),A=j.headers.get("x-relay-error");if(A&&A==="true")throw new hh(j);if(!j.ok)throw new fh(j);let P=((l=j.headers.get("Content-Type"))!==null&&l!==void 0?l:"text/plain").split(";")[0].trim(),C;return P==="application/json"?C=yield j.json():P==="application/octet-stream"?C=yield j.blob():P==="text/event-stream"?C=j:P==="multipart/form-data"?C=yield j.formData():C=yield j.text(),{data:C,error:null,response:j}}catch(u){return u instanceof Error&&u.name==="AbortError"?{data:null,error:new dh(u)}:{data:null,error:u,response:u instanceof fh||u instanceof hh?u.context:void 0}}})}}var vt={},ns={},rs={},ss={},is={},os={},Xg=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},gs=Xg();const Zg=gs.fetch,tf=gs.fetch.bind(gs),nf=gs.Headers,e0=gs.Request,t0=gs.Response,xs=Object.freeze(Object.defineProperty({__proto__:null,Headers:nf,Request:e0,Response:t0,default:tf,fetch:Zg},Symbol.toStringTag,{value:"Module"})),n0=fp(xs);var Ao={},mh;function rf(){if(mh)return Ao;mh=1,Object.defineProperty(Ao,"__esModule",{value:!0});class i extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return Ao.default=i,Ao}var ph;function sf(){if(ph)return os;ph=1;var i=os&&os.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(os,"__esModule",{value:!0});const n=i(n0),s=i(rf());class o{constructor(u){var h,m;this.shouldThrowOnError=!1,this.method=u.method,this.url=u.url,this.headers=new Headers(u.headers),this.schema=u.schema,this.body=u.body,this.shouldThrowOnError=(h=u.shouldThrowOnError)!==null&&h!==void 0?h:!1,this.signal=u.signal,this.isMaybeSingle=(m=u.isMaybeSingle)!==null&&m!==void 0?m:!1,u.fetch?this.fetch=u.fetch:typeof fetch>"u"?this.fetch=n.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(u,h){return this.headers=new Headers(this.headers),this.headers.set(u,h),this}then(u,h){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const m=this.fetch;let p=m(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async g=>{var y,w,k,j;let A=null,P=null,C=null,D=g.status,N=g.statusText;if(g.ok){if(this.method!=="HEAD"){const U=await g.text();U===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((y=this.headers.get("Accept"))===null||y===void 0)&&y.includes("application/vnd.pgrst.plan+text"))?P=U:P=JSON.parse(U))}const F=(w=this.headers.get("Prefer"))===null||w===void 0?void 0:w.match(/count=(exact|planned|estimated)/),Z=(k=g.headers.get("content-range"))===null||k===void 0?void 0:k.split("/");F&&Z&&Z.length>1&&(C=parseInt(Z[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(P)&&(P.length>1?(A={code:"PGRST116",details:`Results contain ${P.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},P=null,C=null,D=406,N="Not Acceptable"):P.length===1?P=P[0]:P=null)}else{const F=await g.text();try{A=JSON.parse(F),Array.isArray(A)&&g.status===404&&(P=[],A=null,D=200,N="OK")}catch{g.status===404&&F===""?(D=204,N="No Content"):A={message:F}}if(A&&this.isMaybeSingle&&(!((j=A?.details)===null||j===void 0)&&j.includes("0 rows"))&&(A=null,D=200,N="OK"),A&&this.shouldThrowOnError)throw new s.default(A)}return{error:A,data:P,count:C,status:D,statusText:N}});return this.shouldThrowOnError||(p=p.catch(g=>{var y,w,k;return{error:{message:`${(y=g?.name)!==null&&y!==void 0?y:"FetchError"}: ${g?.message}`,details:`${(w=g?.stack)!==null&&w!==void 0?w:""}`,hint:"",code:`${(k=g?.code)!==null&&k!==void 0?k:""}`},data:null,count:null,status:0,statusText:""}})),p.then(u,h)}returns(){return this}overrideTypes(){return this}}return os.default=o,os}var gh;function of(){if(gh)return is;gh=1;var i=is&&is.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(is,"__esModule",{value:!0});const n=i(sf());class s extends n.default{select(l){let u=!1;const h=(l??"*").split("").map(m=>/\s/.test(m)&&!u?"":(m==='"'&&(u=!u),m)).join("");return this.url.searchParams.set("select",h),this.headers.append("Prefer","return=representation"),this}order(l,{ascending:u=!0,nullsFirst:h,foreignTable:m,referencedTable:p=m}={}){const g=p?`${p}.order`:"order",y=this.url.searchParams.get(g);return this.url.searchParams.set(g,`${y?`${y},`:""}${l}.${u?"asc":"desc"}${h===void 0?"":h?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:u,referencedTable:h=u}={}){const m=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(m,`${l}`),this}range(l,u,{foreignTable:h,referencedTable:m=h}={}){const p=typeof m>"u"?"offset":`${m}.offset`,g=typeof m>"u"?"limit":`${m}.limit`;return this.url.searchParams.set(p,`${l}`),this.url.searchParams.set(g,`${u-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:l=!1,verbose:u=!1,settings:h=!1,buffers:m=!1,wal:p=!1,format:g="text"}={}){var y;const w=[l?"analyze":null,u?"verbose":null,h?"settings":null,m?"buffers":null,p?"wal":null].filter(Boolean).join("|"),k=(y=this.headers.get("Accept"))!==null&&y!==void 0?y:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${g}; for="${k}"; options=${w};`),g==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(l){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${l}`),this}}return is.default=s,is}var vh;function yu(){if(vh)return ss;vh=1;var i=ss&&ss.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(ss,"__esModule",{value:!0});const n=i(of());class s extends n.default{eq(l,u){return this.url.searchParams.append(l,`eq.${u}`),this}neq(l,u){return this.url.searchParams.append(l,`neq.${u}`),this}gt(l,u){return this.url.searchParams.append(l,`gt.${u}`),this}gte(l,u){return this.url.searchParams.append(l,`gte.${u}`),this}lt(l,u){return this.url.searchParams.append(l,`lt.${u}`),this}lte(l,u){return this.url.searchParams.append(l,`lte.${u}`),this}like(l,u){return this.url.searchParams.append(l,`like.${u}`),this}likeAllOf(l,u){return this.url.searchParams.append(l,`like(all).{${u.join(",")}}`),this}likeAnyOf(l,u){return this.url.searchParams.append(l,`like(any).{${u.join(",")}}`),this}ilike(l,u){return this.url.searchParams.append(l,`ilike.${u}`),this}ilikeAllOf(l,u){return this.url.searchParams.append(l,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(l,u){return this.url.searchParams.append(l,`ilike(any).{${u.join(",")}}`),this}is(l,u){return this.url.searchParams.append(l,`is.${u}`),this}in(l,u){const h=Array.from(new Set(u)).map(m=>typeof m=="string"&&new RegExp("[,()]").test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(l,`in.(${h})`),this}contains(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cs.{${u.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(u)}`),this}containedBy(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cd.{${u.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(u)}`),this}rangeGt(l,u){return this.url.searchParams.append(l,`sr.${u}`),this}rangeGte(l,u){return this.url.searchParams.append(l,`nxl.${u}`),this}rangeLt(l,u){return this.url.searchParams.append(l,`sl.${u}`),this}rangeLte(l,u){return this.url.searchParams.append(l,`nxr.${u}`),this}rangeAdjacent(l,u){return this.url.searchParams.append(l,`adj.${u}`),this}overlaps(l,u){return typeof u=="string"?this.url.searchParams.append(l,`ov.${u}`):this.url.searchParams.append(l,`ov.{${u.join(",")}}`),this}textSearch(l,u,{config:h,type:m}={}){let p="";m==="plain"?p="pl":m==="phrase"?p="ph":m==="websearch"&&(p="w");const g=h===void 0?"":`(${h})`;return this.url.searchParams.append(l,`${p}fts${g}.${u}`),this}match(l){return Object.entries(l).forEach(([u,h])=>{this.url.searchParams.append(u,`eq.${h}`)}),this}not(l,u,h){return this.url.searchParams.append(l,`not.${u}.${h}`),this}or(l,{foreignTable:u,referencedTable:h=u}={}){const m=h?`${h}.or`:"or";return this.url.searchParams.append(m,`(${l})`),this}filter(l,u,h){return this.url.searchParams.append(l,`${u}.${h}`),this}}return ss.default=s,ss}var yh;function af(){if(yh)return rs;yh=1;var i=rs&&rs.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(rs,"__esModule",{value:!0});const n=i(yu());class s{constructor(l,{headers:u={},schema:h,fetch:m}){this.url=l,this.headers=new Headers(u),this.schema=h,this.fetch=m}select(l,u){const{head:h=!1,count:m}=u??{},p=h?"HEAD":"GET";let g=!1;const y=(l??"*").split("").map(w=>/\s/.test(w)&&!g?"":(w==='"'&&(g=!g),w)).join("");return this.url.searchParams.set("select",y),m&&this.headers.append("Prefer",`count=${m}`),new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(l,{count:u,defaultToNull:h=!0}={}){var m;const p="POST";if(u&&this.headers.append("Prefer",`count=${u}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const g=l.reduce((y,w)=>y.concat(Object.keys(w)),[]);if(g.length>0){const y=[...new Set(g)].map(w=>`"${w}"`);this.url.searchParams.set("columns",y.join(","))}}return new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}upsert(l,{onConflict:u,ignoreDuplicates:h=!1,count:m,defaultToNull:p=!0}={}){var g;const y="POST";if(this.headers.append("Prefer",`resolution=${h?"ignore":"merge"}-duplicates`),u!==void 0&&this.url.searchParams.set("on_conflict",u),m&&this.headers.append("Prefer",`count=${m}`),p||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const w=l.reduce((k,j)=>k.concat(Object.keys(j)),[]);if(w.length>0){const k=[...new Set(w)].map(j=>`"${j}"`);this.url.searchParams.set("columns",k.join(","))}}return new n.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}update(l,{count:u}={}){var h;const m="PATCH";return u&&this.headers.append("Prefer",`count=${u}`),new n.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}delete({count:l}={}){var u;const h="DELETE";return l&&this.headers.append("Prefer",`count=${l}`),new n.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return rs.default=s,rs}var wh;function r0(){if(wh)return ns;wh=1;var i=ns&&ns.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(ns,"__esModule",{value:!0});const n=i(af()),s=i(yu());class o{constructor(u,{headers:h={},schema:m,fetch:p}={}){this.url=u,this.headers=new Headers(h),this.schemaName=m,this.fetch=p}from(u){const h=new URL(`${this.url}/${u}`);return new n.default(h,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new o(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,h={},{head:m=!1,get:p=!1,count:g}={}){var y;let w;const k=new URL(`${this.url}/rpc/${u}`);let j;m||p?(w=m?"HEAD":"GET",Object.entries(h).filter(([P,C])=>C!==void 0).map(([P,C])=>[P,Array.isArray(C)?`{${C.join(",")}}`:`${C}`]).forEach(([P,C])=>{k.searchParams.append(P,C)})):(w="POST",j=h);const A=new Headers(this.headers);return g&&A.set("Prefer",`count=${g}`),new s.default({method:w,url:k,headers:A,schema:this.schemaName,body:j,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}}return ns.default=o,ns}var xh;function s0(){if(xh)return vt;xh=1;var i=vt&&vt.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(vt,"__esModule",{value:!0}),vt.PostgrestError=vt.PostgrestBuilder=vt.PostgrestTransformBuilder=vt.PostgrestFilterBuilder=vt.PostgrestQueryBuilder=vt.PostgrestClient=void 0;const n=i(r0());vt.PostgrestClient=n.default;const s=i(af());vt.PostgrestQueryBuilder=s.default;const o=i(yu());vt.PostgrestFilterBuilder=o.default;const l=i(of());vt.PostgrestTransformBuilder=l.default;const u=i(sf());vt.PostgrestBuilder=u.default;const h=i(rf());return vt.PostgrestError=h.default,vt.default={PostgrestClient:n.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:o.default,PostgrestTransformBuilder:l.default,PostgrestBuilder:u.default,PostgrestError:h.default},vt}var i0=s0();const o0=au(i0),{PostgrestClient:a0,PostgrestQueryBuilder:Fy,PostgrestFilterBuilder:zy,PostgrestTransformBuilder:By,PostgrestBuilder:Wy,PostgrestError:Hy}=o0;class l0{static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const s=process.versions;if(s&&s.node){const o=s.node,l=parseInt(o.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let s=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(s+=`

Suggested solution: ${n.workaround}`),new Error(s)}static createWebSocket(n,s){const o=this.getWebSocketConstructor();return new o(n,s)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const u0="2.75.0",c0=`realtime-js/${u0}`,d0="1.0.0",Ql=1e4,h0=1e3,f0=100;var li;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(li||(li={}));var ht;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(ht||(ht={}));var ln;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(ln||(ln={}));var Yl;(function(i){i.websocket="websocket"})(Yl||(Yl={}));var Er;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(Er||(Er={}));class m0{constructor(){this.HEADER_LENGTH=1}decode(n,s){return n.constructor===ArrayBuffer?s(this._binaryDecode(n)):s(typeof n=="string"?JSON.parse(n):{})}_binaryDecode(n){const s=new DataView(n),o=new TextDecoder;return this._decodeBroadcast(n,s,o)}_decodeBroadcast(n,s,o){const l=s.getUint8(1),u=s.getUint8(2);let h=this.HEADER_LENGTH+2;const m=o.decode(n.slice(h,h+l));h=h+l;const p=o.decode(n.slice(h,h+u));h=h+u;const g=JSON.parse(o.decode(n.slice(h,n.byteLength)));return{ref:null,topic:m,event:p,payload:g}}}class lf{constructor(n,s){this.callback=n,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Be;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(Be||(Be={}));const _h=(i,n,s={})=>{var o;const l=(o=s.skipTypes)!==null&&o!==void 0?o:[];return n?Object.keys(n).reduce((u,h)=>(u[h]=p0(h,i,n,l),u),{}):{}},p0=(i,n,s,o)=>{const l=n.find(m=>m.name===i),u=l?.type,h=s[i];return u&&!o.includes(u)?uf(u,h):Xl(h)},uf=(i,n)=>{if(i.charAt(0)==="_"){const s=i.slice(1,i.length);return w0(n,s)}switch(i){case Be.bool:return g0(n);case Be.float4:case Be.float8:case Be.int2:case Be.int4:case Be.int8:case Be.numeric:case Be.oid:return v0(n);case Be.json:case Be.jsonb:return y0(n);case Be.timestamp:return x0(n);case Be.abstime:case Be.date:case Be.daterange:case Be.int4range:case Be.int8range:case Be.money:case Be.reltime:case Be.text:case Be.time:case Be.timestamptz:case Be.timetz:case Be.tsrange:case Be.tstzrange:return Xl(n);default:return Xl(n)}},Xl=i=>i,g0=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},v0=i=>{if(typeof i=="string"){const n=parseFloat(i);if(!Number.isNaN(n))return n}return i},y0=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(n){return console.log(`JSON parse error: ${n}`),i}return i},w0=(i,n)=>{if(typeof i!="string")return i;const s=i.length-1,o=i[s];if(i[0]==="{"&&o==="}"){let u;const h=i.slice(1,s);try{u=JSON.parse("["+h+"]")}catch{u=h?h.split(","):[]}return u.map(m=>uf(n,m))}return i},x0=i=>typeof i=="string"?i.replace(" ","T"):i,cf=i=>{let n=i;return n=n.replace(/^ws/i,"http"),n=n.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),n.replace(/\/+$/,"")+"/api/broadcast"};class Il{constructor(n,s,o={},l=Ql){this.channel=n,this.event=s,this.payload=o,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,s){var o;return this._hasReceived(n)&&s((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:n,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:s}){this.recHooks.filter(o=>o.status===n).forEach(o=>o.callback(s))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var bh;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(bh||(bh={}));class ui{constructor(n,s){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},l=>{const{onJoin:u,onLeave:h,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ui.syncState(this.state,l,u,h),this.pendingDiffs.forEach(p=>{this.state=ui.syncDiff(this.state,p,u,h)}),this.pendingDiffs=[],m()}),this.channel._on(o.diff,{},l=>{const{onJoin:u,onLeave:h,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=ui.syncDiff(this.state,l,u,h),m())}),this.onJoin((l,u,h)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:u,newPresences:h})}),this.onLeave((l,u,h)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:u,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,s,o,l){const u=this.cloneDeep(n),h=this.transformState(s),m={},p={};return this.map(u,(g,y)=>{h[g]||(p[g]=y)}),this.map(h,(g,y)=>{const w=u[g];if(w){const k=y.map(C=>C.presence_ref),j=w.map(C=>C.presence_ref),A=y.filter(C=>j.indexOf(C.presence_ref)<0),P=w.filter(C=>k.indexOf(C.presence_ref)<0);A.length>0&&(m[g]=A),P.length>0&&(p[g]=P)}else m[g]=y}),this.syncDiff(u,{joins:m,leaves:p},o,l)}static syncDiff(n,s,o,l){const{joins:u,leaves:h}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return o||(o=()=>{}),l||(l=()=>{}),this.map(u,(m,p)=>{var g;const y=(g=n[m])!==null&&g!==void 0?g:[];if(n[m]=this.cloneDeep(p),y.length>0){const w=n[m].map(j=>j.presence_ref),k=y.filter(j=>w.indexOf(j.presence_ref)<0);n[m].unshift(...k)}o(m,y,p)}),this.map(h,(m,p)=>{let g=n[m];if(!g)return;const y=p.map(w=>w.presence_ref);g=g.filter(w=>y.indexOf(w.presence_ref)<0),n[m]=g,l(m,g,p),g.length===0&&delete n[m]}),n}static map(n,s){return Object.getOwnPropertyNames(n).map(o=>s(o,n[o]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((s,o)=>{const l=n[o];return"metas"in l?s[o]=l.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):s[o]=l,s},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var kh;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(kh||(kh={}));var ci;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(ci||(ci={}));var Pn;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(Pn||(Pn={}));class wu{constructor(n,s={config:{}},o){var l,u;if(this.topic=n,this.params=s,this.socket=o,this.bindings={},this.state=ht.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Il(this,ln.join,this.params,this.timeout),this.rejoinTimer=new lf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ht.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(h=>h.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ht.closed,this.socket._remove(this)}),this._onError(h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=ht.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ht.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=ht.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ln.reply,{},(h,m)=>{this._trigger(this._replyEventName(m),h)}),this.presence=new ui(this),this.broadcastEndpointURL=cf(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((u=(l=this.params.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,s=this.timeout){var o,l,u;if(this.socket.isConnected()||this.socket.connect(),this.state==ht.closed){const{config:{broadcast:h,presence:m,private:p}}=this.params,g=(l=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(j=>j.filter))!==null&&l!==void 0?l:[],y=!!this.bindings[ci.PRESENCE]&&this.bindings[ci.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,w={},k={broadcast:h,presence:Object.assign(Object.assign({},m),{enabled:y}),postgres_changes:g,private:p};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(j=>n?.(Pn.CHANNEL_ERROR,j)),this._onClose(()=>n?.(Pn.CLOSED)),this.updateJoinPayload(Object.assign({config:k},w)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:j})=>{var A;if(this.socket.setAuth(),j===void 0){n?.(Pn.SUBSCRIBED);return}else{const P=this.bindings.postgres_changes,C=(A=P?.length)!==null&&A!==void 0?A:0,D=[];for(let N=0;N<C;N++){const I=P[N],{filter:{event:F,schema:Z,table:U,filter:Y}}=I,oe=j&&j[N];if(oe&&oe.event===F&&oe.schema===Z&&oe.table===U&&oe.filter===Y)D.push(Object.assign(Object.assign({},I),{id:oe.id}));else{this.unsubscribe(),this.state=ht.errored,n?.(Pn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=D,n&&n(Pn.SUBSCRIBED);return}}).receive("error",j=>{this.state=ht.errored,n?.(Pn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(j).join(", ")||"error")))}).receive("timeout",()=>{n?.(Pn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,s={}){return await this.send({type:"presence",event:"track",payload:n},s.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,s,o){return this.state===ht.joined&&n===ci.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(n,s,o)}async send(n,s={}){var o,l;if(!this._canPush()&&n.type==="broadcast"){const{event:u,payload:h}=n,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:h,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(o=s.timeout)!==null&&o!==void 0?o:this.timeout);return await((l=g.body)===null||l===void 0?void 0:l.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var h,m,p;const g=this._push(n.type,n,s.timeout||this.timeout);n.type==="broadcast"&&!(!((p=(m=(h=this.params)===null||h===void 0?void 0:h.config)===null||m===void 0?void 0:m.broadcast)===null||p===void 0)&&p.ack)&&u("ok"),g.receive("ok",()=>u("ok")),g.receive("error",()=>u("error")),g.receive("timeout",()=>u("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=ht.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ln.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(l=>{o=new Il(this,ln.leave,{},n),o.receive("ok",()=>{s(),l("ok")}).receive("timeout",()=>{s(),l("timed out")}).receive("error",()=>{l("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ht.closed,this.bindings={}}async _fetchWithTimeout(n,s,o){const l=new AbortController,u=setTimeout(()=>l.abort(),o),h=await this.socket.fetch(n,Object.assign(Object.assign({},s),{signal:l.signal}));return clearTimeout(u),h}_push(n,s,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new Il(this,n,s,o);return this._canPush()?l.send():this._addToPushBuffer(l),l}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>f0){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(n,s,o){return s}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,s,o){var l,u;const h=n.toLocaleLowerCase(),{close:m,error:p,leave:g,join:y}=ln;if(o&&[m,p,g,y].indexOf(h)>=0&&o!==this._joinRef())return;let k=this._onMessage(h,s,o);if(s&&!k)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(j=>{var A,P,C;return((A=j.filter)===null||A===void 0?void 0:A.event)==="*"||((C=(P=j.filter)===null||P===void 0?void 0:P.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===h}).map(j=>j.callback(k,o)):(u=this.bindings[h])===null||u===void 0||u.filter(j=>{var A,P,C,D,N,I;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in j){const F=j.id,Z=(A=j.filter)===null||A===void 0?void 0:A.event;return F&&((P=s.ids)===null||P===void 0?void 0:P.includes(F))&&(Z==="*"||Z?.toLocaleLowerCase()===((C=s.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const F=(N=(D=j?.filter)===null||D===void 0?void 0:D.event)===null||N===void 0?void 0:N.toLocaleLowerCase();return F==="*"||F===((I=s?.event)===null||I===void 0?void 0:I.toLocaleLowerCase())}else return j.type.toLocaleLowerCase()===h}).map(j=>{if(typeof k=="object"&&"ids"in k){const A=k.data,{schema:P,table:C,commit_timestamp:D,type:N,errors:I}=A;k=Object.assign(Object.assign({},{schema:P,table:C,commit_timestamp:D,eventType:N,new:{},old:{},errors:I}),this._getPayloadRecords(A))}j.callback(k,o)})}_isClosed(){return this.state===ht.closed}_isJoined(){return this.state===ht.joined}_isJoining(){return this.state===ht.joining}_isLeaving(){return this.state===ht.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,s,o){const l=n.toLocaleLowerCase(),u={type:l,filter:s,callback:o};return this.bindings[l]?this.bindings[l].push(u):this.bindings[l]=[u],this}_off(n,s){const o=n.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(l=>{var u;return!(((u=l.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===o&&wu.isEqual(l.filter,s))})),this}static isEqual(n,s){if(Object.keys(n).length!==Object.keys(s).length)return!1;for(const o in n)if(n[o]!==s[o])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(ln.close,{},n)}_onError(n){this._on(ln.error,{},s=>n(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ht.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const s={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(s.new=_h(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(s.old=_h(n.columns,n.old_record)),s}}const $l=()=>{},Lo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},_0=[1e3,2e3,5e3,1e4],b0=1e4,k0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class S0{constructor(n,s){var o;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ql,this.transport=null,this.heartbeatIntervalMs=Lo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=$l,this.ref=0,this.reconnectTimer=null,this.logger=$l,this.conn=null,this.sendBuffer=[],this.serializer=new m0,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=l=>{let u;return l?u=l:typeof fetch>"u"?u=(...h)=>yi(async()=>{const{default:m}=await Promise.resolve().then(()=>xs);return{default:m}},void 0).then(({default:m})=>m(...h)).catch(m=>{throw new Error(`Failed to load @supabase/node-fetch: ${m.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):u=fetch,(...h)=>u(...h)},!(!((o=s?.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${n}/${Yl.websocket}`,this.httpEndpoint=cf(n),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=l0.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const s=n.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:d0}))}disconnect(n,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},n?this.conn.close(n,s??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const s=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const n=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,s,o){this.logger(n,s,o)}connectionState(){switch(this.conn&&this.conn.readyState){case li.connecting:return Er.Connecting;case li.open:return Er.Open;case li.closing:return Er.Closing;default:return Er.Closed}}isConnected(){return this.connectionState()===Er.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,s={config:{}}){const o=`realtime:${n}`,l=this.getChannels().find(u=>u.topic===o);if(l)return l;{const u=new wu(`realtime:${n}`,s,this);return this.channels.push(u),u}}push(n){const{topic:s,event:o,payload:l,ref:u}=n,h=()=>{this.encode(n,m=>{var p;(p=this.conn)===null||p===void 0||p.send(m)})};this.log("push",`${s} ${o} (${u})`,l),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(h0,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},Lo.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let s=this.channels.find(o=>o.topic===n&&(o._isJoined()||o._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${n}"`),s.unsubscribe())}_remove(n){this.channels=this.channels.filter(s=>s.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply")try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error")}catch(g){this.log("error","error in heartbeat callback",g)}s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:l,payload:u,ref:h}=s,m=h?`(${h})`:"",p=u.status||"";this.log("receive",`${p} ${o} ${l} ${m}`.trim(),u),this.channels.filter(g=>g._isMember(o)).forEach(g=>g._trigger(l,u,h)),this._triggerStateCallbacks("message",s)})}_clearTimer(n){var s;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(n){var s;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(ln.error))}_appendParams(n,s){if(Object.keys(s).length===0)return n;const o=n.match(/\?/)?"&":"?",l=new URLSearchParams(s);return`${n}${o}${l}`}_workerObjectUrl(n){let s;if(n)s=n;else{const o=new Blob([k0],{type:"application/javascript"});s=URL.createObjectURL(o)}return s}_setConnectionState(n,s=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(n=null){let s;n?s=n:this.accessToken?s=await this.accessToken():s=this.accessTokenValue,this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(o=>{const l={access_token:s,version:c0};s&&o.updateJoinPayload(l),o.joinedOnce&&o._isJoined()&&o._push(ln.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this.setAuth().catch(s=>{this.log("error",`error setting auth in ${n}`,s)})}_triggerStateCallbacks(n,s){try{this.stateChangeCallbacks[n].forEach(o=>{try{o(s)}catch(l){this.log("error",`error in ${n} callback`,l)}})}catch(o){this.log("error",`error triggering ${n} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new lf(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Lo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var s,o,l,u,h,m,p,g,y;if(this.transport=(s=n?.transport)!==null&&s!==void 0?s:null,this.timeout=(o=n?.timeout)!==null&&o!==void 0?o:Ql,this.heartbeatIntervalMs=(l=n?.heartbeatIntervalMs)!==null&&l!==void 0?l:Lo.HEARTBEAT_INTERVAL,this.worker=(u=n?.worker)!==null&&u!==void 0?u:!1,this.accessToken=(h=n?.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(m=n?.heartbeatCallback)!==null&&m!==void 0?m:$l,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=n?.reconnectAfterMs)!==null&&p!==void 0?p:(w=>_0[w-1]||b0),this.encode=(g=n?.encode)!==null&&g!==void 0?g:((w,k)=>k(JSON.stringify(w))),this.decode=(y=n?.decode)!==null&&y!==void 0?y:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}class xu extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function ut(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class j0 extends xu{constructor(n,s,o){super(n),this.name="StorageApiError",this.status=s,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Zl extends xu{constructor(n,s){super(n),this.name="StorageUnknownError",this.originalError=s}}var E0=function(i,n,s,o){function l(u){return u instanceof s?u:new s(function(h){h(u)})}return new(s||(s=Promise))(function(u,h){function m(y){try{g(o.next(y))}catch(w){h(w)}}function p(y){try{g(o.throw(y))}catch(w){h(w)}}function g(y){y.done?u(y.value):l(y.value).then(m,p)}g((o=o.apply(i,n||[])).next())})};const df=i=>{let n;return i?n=i:typeof fetch>"u"?n=(...s)=>yi(async()=>{const{default:o}=await Promise.resolve().then(()=>xs);return{default:o}},void 0).then(({default:o})=>o(...s)):n=fetch,(...s)=>n(...s)},N0=()=>E0(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield yi(()=>Promise.resolve().then(()=>xs),void 0)).Response:Response}),eu=i=>{if(Array.isArray(i))return i.map(s=>eu(s));if(typeof i=="function"||i!==Object(i))return i;const n={};return Object.entries(i).forEach(([s,o])=>{const l=s.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));n[l]=eu(o)}),n},C0=i=>{if(typeof i!="object"||i===null)return!1;const n=Object.getPrototypeOf(i);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)};var Pr=function(i,n,s,o){function l(u){return u instanceof s?u:new s(function(h){h(u)})}return new(s||(s=Promise))(function(u,h){function m(y){try{g(o.next(y))}catch(w){h(w)}}function p(y){try{g(o.throw(y))}catch(w){h(w)}}function g(y){y.done?u(y.value):l(y.value).then(m,p)}g((o=o.apply(i,n||[])).next())})};const Dl=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),P0=(i,n,s)=>Pr(void 0,void 0,void 0,function*(){const o=yield N0();i instanceof o&&!s?.noResolveJson?i.json().then(l=>{const u=i.status||500,h=l?.statusCode||u+"";n(new j0(Dl(l),u,h))}).catch(l=>{n(new Zl(Dl(l),l))}):n(new Zl(Dl(i),i))}),T0=(i,n,s,o)=>{const l={method:i,headers:n?.headers||{}};return i==="GET"||!o?l:(C0(o)?(l.headers=Object.assign({"Content-Type":"application/json"},n?.headers),l.body=JSON.stringify(o)):l.body=o,n?.duplex&&(l.duplex=n.duplex),Object.assign(Object.assign({},l),s))};function wi(i,n,s,o,l,u){return Pr(this,void 0,void 0,function*(){return new Promise((h,m)=>{i(s,T0(n,o,l,u)).then(p=>{if(!p.ok)throw p;return o?.noResolveJson?p:p.json()}).then(p=>h(p)).catch(p=>P0(p,m,o))})})}function zo(i,n,s,o){return Pr(this,void 0,void 0,function*(){return wi(i,"GET",n,s,o)})}function yn(i,n,s,o,l){return Pr(this,void 0,void 0,function*(){return wi(i,"POST",n,o,l,s)})}function tu(i,n,s,o,l){return Pr(this,void 0,void 0,function*(){return wi(i,"PUT",n,o,l,s)})}function R0(i,n,s,o){return Pr(this,void 0,void 0,function*(){return wi(i,"HEAD",n,Object.assign(Object.assign({},s),{noResolveJson:!0}),o)})}function hf(i,n,s,o,l){return Pr(this,void 0,void 0,function*(){return wi(i,"DELETE",n,o,l,s)})}var O0=function(i,n,s,o){function l(u){return u instanceof s?u:new s(function(h){h(u)})}return new(s||(s=Promise))(function(u,h){function m(y){try{g(o.next(y))}catch(w){h(w)}}function p(y){try{g(o.throw(y))}catch(w){h(w)}}function g(y){y.done?u(y.value):l(y.value).then(m,p)}g((o=o.apply(i,n||[])).next())})};class A0{constructor(n,s){this.downloadFn=n,this.shouldThrowOnError=s}then(n,s){return this.execute().then(n,s)}execute(){return O0(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ut(n))return{data:null,error:n};throw n}})}}var L0=function(i,n,s,o){function l(u){return u instanceof s?u:new s(function(h){h(u)})}return new(s||(s=Promise))(function(u,h){function m(y){try{g(o.next(y))}catch(w){h(w)}}function p(y){try{g(o.throw(y))}catch(w){h(w)}}function g(y){y.done?u(y.value):l(y.value).then(m,p)}g((o=o.apply(i,n||[])).next())})};class I0{constructor(n,s){this.downloadFn=n,this.shouldThrowOnError=s}asStream(){return new A0(this.downloadFn,this.shouldThrowOnError)}then(n,s){return this.execute().then(n,s)}execute(){return L0(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ut(n))return{data:null,error:n};throw n}})}}var Dt=function(i,n,s,o){function l(u){return u instanceof s?u:new s(function(h){h(u)})}return new(s||(s=Promise))(function(u,h){function m(y){try{g(o.next(y))}catch(w){h(w)}}function p(y){try{g(o.throw(y))}catch(w){h(w)}}function g(y){y.done?u(y.value):l(y.value).then(m,p)}g((o=o.apply(i,n||[])).next())})};const $0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Sh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class D0{constructor(n,s={},o,l){this.shouldThrowOnError=!1,this.url=n,this.headers=s,this.bucketId=o,this.fetch=df(l)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(n,s,o,l){return Dt(this,void 0,void 0,function*(){try{let u;const h=Object.assign(Object.assign({},Sh),l);let m=Object.assign(Object.assign({},this.headers),n==="POST"&&{"x-upsert":String(h.upsert)});const p=h.metadata;typeof Blob<"u"&&o instanceof Blob?(u=new FormData,u.append("cacheControl",h.cacheControl),p&&u.append("metadata",this.encodeMetadata(p)),u.append("",o)):typeof FormData<"u"&&o instanceof FormData?(u=o,u.append("cacheControl",h.cacheControl),p&&u.append("metadata",this.encodeMetadata(p))):(u=o,m["cache-control"]=`max-age=${h.cacheControl}`,m["content-type"]=h.contentType,p&&(m["x-metadata"]=this.toBase64(this.encodeMetadata(p)))),l?.headers&&(m=Object.assign(Object.assign({},m),l.headers));const g=this._removeEmptyFolders(s),y=this._getFinalPath(g),w=yield(n=="PUT"?tu:yn)(this.fetch,`${this.url}/object/${y}`,u,Object.assign({headers:m},h?.duplex?{duplex:h.duplex}:{}));return{data:{path:g,id:w.Id,fullPath:w.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(ut(u))return{data:null,error:u};throw u}})}upload(n,s,o){return Dt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,s,o)})}uploadToSignedUrl(n,s,o,l){return Dt(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(n),h=this._getFinalPath(u),m=new URL(this.url+`/object/upload/sign/${h}`);m.searchParams.set("token",s);try{let p;const g=Object.assign({upsert:Sh.upsert},l),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(g.upsert)});typeof Blob<"u"&&o instanceof Blob?(p=new FormData,p.append("cacheControl",g.cacheControl),p.append("",o)):typeof FormData<"u"&&o instanceof FormData?(p=o,p.append("cacheControl",g.cacheControl)):(p=o,y["cache-control"]=`max-age=${g.cacheControl}`,y["content-type"]=g.contentType);const w=yield tu(this.fetch,m.toString(),p,{headers:y});return{data:{path:u,fullPath:w.Key},error:null}}catch(p){if(this.shouldThrowOnError)throw p;if(ut(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(n,s){return Dt(this,void 0,void 0,function*(){try{let o=this._getFinalPath(n);const l=Object.assign({},this.headers);s?.upsert&&(l["x-upsert"]="true");const u=yield yn(this.fetch,`${this.url}/object/upload/sign/${o}`,{},{headers:l}),h=new URL(this.url+u.url),m=h.searchParams.get("token");if(!m)throw new xu("No token returned by API");return{data:{signedUrl:h.toString(),path:n,token:m},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ut(o))return{data:null,error:o};throw o}})}update(n,s,o){return Dt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,s,o)})}move(n,s,o){return Dt(this,void 0,void 0,function*(){try{return{data:yield yn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:s,destinationBucket:o?.destinationBucket},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(ut(l))return{data:null,error:l};throw l}})}copy(n,s,o){return Dt(this,void 0,void 0,function*(){try{return{data:{path:(yield yn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:s,destinationBucket:o?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(ut(l))return{data:null,error:l};throw l}})}createSignedUrl(n,s,o){return Dt(this,void 0,void 0,function*(){try{let l=this._getFinalPath(n),u=yield yn(this.fetch,`${this.url}/object/sign/${l}`,Object.assign({expiresIn:s},o?.transform?{transform:o.transform}:{}),{headers:this.headers});const h=o?.download?`&download=${o.download===!0?"":o.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${h}`)},{data:u,error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(ut(l))return{data:null,error:l};throw l}})}createSignedUrls(n,s,o){return Dt(this,void 0,void 0,function*(){try{const l=yield yn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:n},{headers:this.headers}),u=o?.download?`&download=${o.download===!0?"":o.download}`:"";return{data:l.map(h=>Object.assign(Object.assign({},h),{signedUrl:h.signedURL?encodeURI(`${this.url}${h.signedURL}${u}`):null})),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(ut(l))return{data:null,error:l};throw l}})}download(n,s){const l=typeof s?.transform<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString(s?.transform||{}),h=u?`?${u}`:"",m=this._getFinalPath(n),p=()=>zo(this.fetch,`${this.url}/${l}/${m}${h}`,{headers:this.headers,noResolveJson:!0});return new I0(p,this.shouldThrowOnError)}info(n){return Dt(this,void 0,void 0,function*(){const s=this._getFinalPath(n);try{const o=yield zo(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:eu(o),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ut(o))return{data:null,error:o};throw o}})}exists(n){return Dt(this,void 0,void 0,function*(){const s=this._getFinalPath(n);try{return yield R0(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ut(o)&&o instanceof Zl){const l=o.originalError;if([400,404].includes(l?.status))return{data:!1,error:o}}throw o}})}getPublicUrl(n,s){const o=this._getFinalPath(n),l=[],u=s?.download?`download=${s.download===!0?"":s.download}`:"";u!==""&&l.push(u);const m=typeof s?.transform<"u"?"render/image":"object",p=this.transformOptsToQueryString(s?.transform||{});p!==""&&l.push(p);let g=l.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${m}/public/${o}${g}`)}}}remove(n){return Dt(this,void 0,void 0,function*(){try{return{data:yield hf(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ut(s))return{data:null,error:s};throw s}})}list(n,s,o){return Dt(this,void 0,void 0,function*(){try{const l=Object.assign(Object.assign(Object.assign({},$0),s),{prefix:n||""});return{data:yield yn(this.fetch,`${this.url}/object/list/${this.bucketId}`,l,{headers:this.headers},o),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(ut(l))return{data:null,error:l};throw l}})}listV2(n,s){return Dt(this,void 0,void 0,function*(){try{const o=Object.assign({},n);return{data:yield yn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,o,{headers:this.headers},s),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ut(o))return{data:null,error:o};throw o}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const s=[];return n.width&&s.push(`width=${n.width}`),n.height&&s.push(`height=${n.height}`),n.resize&&s.push(`resize=${n.resize}`),n.format&&s.push(`format=${n.format}`),n.quality&&s.push(`quality=${n.quality}`),s.join("&")}}const U0="2.75.0",M0={"X-Client-Info":`storage-js/${U0}`};var as=function(i,n,s,o){function l(u){return u instanceof s?u:new s(function(h){h(u)})}return new(s||(s=Promise))(function(u,h){function m(y){try{g(o.next(y))}catch(w){h(w)}}function p(y){try{g(o.throw(y))}catch(w){h(w)}}function g(y){y.done?u(y.value):l(y.value).then(m,p)}g((o=o.apply(i,n||[])).next())})};class F0{constructor(n,s={},o,l){this.shouldThrowOnError=!1;const u=new URL(n);l?.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},M0),s),this.fetch=df(o)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return as(this,void 0,void 0,function*(){try{return{data:yield zo(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ut(n))return{data:null,error:n};throw n}})}getBucket(n){return as(this,void 0,void 0,function*(){try{return{data:yield zo(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ut(s))return{data:null,error:s};throw s}})}createBucket(n){return as(this,arguments,void 0,function*(s,o={public:!1}){try{return{data:yield yn(this.fetch,`${this.url}/bucket`,{id:s,name:s,type:o.type,public:o.public,file_size_limit:o.fileSizeLimit,allowed_mime_types:o.allowedMimeTypes},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(ut(l))return{data:null,error:l};throw l}})}updateBucket(n,s){return as(this,void 0,void 0,function*(){try{return{data:yield tu(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ut(o))return{data:null,error:o};throw o}})}emptyBucket(n){return as(this,void 0,void 0,function*(){try{return{data:yield yn(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ut(s))return{data:null,error:s};throw s}})}deleteBucket(n){return as(this,void 0,void 0,function*(){try{return{data:yield hf(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ut(s))return{data:null,error:s};throw s}})}}class z0 extends F0{constructor(n,s={},o,l){super(n,s,o,l)}from(n){return new D0(this.url,this.headers,n,this.fetch)}}const B0="2.75.0";let ai="";typeof Deno<"u"?ai="deno":typeof document<"u"?ai="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ai="react-native":ai="node";const W0={"X-Client-Info":`supabase-js-${ai}/${B0}`},H0={headers:W0},q0={schema:"public"},G0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},V0={};var K0=function(i,n,s,o){function l(u){return u instanceof s?u:new s(function(h){h(u)})}return new(s||(s=Promise))(function(u,h){function m(y){try{g(o.next(y))}catch(w){h(w)}}function p(y){try{g(o.throw(y))}catch(w){h(w)}}function g(y){y.done?u(y.value):l(y.value).then(m,p)}g((o=o.apply(i,n||[])).next())})};const J0=i=>{let n;return i?n=i:typeof fetch>"u"?n=tf:n=fetch,(...s)=>n(...s)},Q0=()=>typeof Headers>"u"?nf:Headers,Y0=(i,n,s)=>{const o=J0(s),l=Q0();return(u,h)=>K0(void 0,void 0,void 0,function*(){var m;const p=(m=yield n())!==null&&m!==void 0?m:i;let g=new l(h?.headers);return g.has("apikey")||g.set("apikey",i),g.has("Authorization")||g.set("Authorization",`Bearer ${p}`),o(u,Object.assign(Object.assign({},h),{headers:g}))})};var X0=function(i,n,s,o){function l(u){return u instanceof s?u:new s(function(h){h(u)})}return new(s||(s=Promise))(function(u,h){function m(y){try{g(o.next(y))}catch(w){h(w)}}function p(y){try{g(o.throw(y))}catch(w){h(w)}}function g(y){y.done?u(y.value):l(y.value).then(m,p)}g((o=o.apply(i,n||[])).next())})};function Z0(i){return i.endsWith("/")?i:i+"/"}function ev(i,n){var s,o;const{db:l,auth:u,realtime:h,global:m}=i,{db:p,auth:g,realtime:y,global:w}=n,k={db:Object.assign(Object.assign({},p),l),auth:Object.assign(Object.assign({},g),u),realtime:Object.assign(Object.assign({},y),h),storage:{},global:Object.assign(Object.assign(Object.assign({},w),m),{headers:Object.assign(Object.assign({},(s=w?.headers)!==null&&s!==void 0?s:{}),(o=m?.headers)!==null&&o!==void 0?o:{})}),accessToken:()=>X0(this,void 0,void 0,function*(){return""})};return i.accessToken?k.accessToken=i.accessToken:delete k.accessToken,k}function tv(i){const n=i?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Z0(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const ff="2.75.0",fs=30*1e3,nu=3,Ul=nu*fs,nv="http://localhost:9999",rv="supabase.auth.token",sv={"X-Client-Info":`gotrue-js/${ff}`},ru="X-Supabase-Api-Version",mf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},iv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ov=600*1e3;class hi extends Error{constructor(n,s,o){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=o}}function pe(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class av extends hi{constructor(n,s,o){super(n,s,o),this.name="AuthApiError",this.status=s,this.code=o}}function lv(i){return pe(i)&&i.name==="AuthApiError"}class Nr extends hi{constructor(n,s){super(n),this.name="AuthUnknownError",this.originalError=s}}class sr extends hi{constructor(n,s,o,l){super(n,o,l),this.name=s,this.status=o}}class nr extends sr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function uv(i){return pe(i)&&i.name==="AuthSessionMissingError"}class ls extends sr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Io extends sr{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class $o extends sr{constructor(n,s=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function cv(i){return pe(i)&&i.name==="AuthImplicitGrantRedirectError"}class jh extends sr{constructor(n,s=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class su extends sr{constructor(n,s){super(n,"AuthRetryableFetchError",s,void 0)}}function Ml(i){return pe(i)&&i.name==="AuthRetryableFetchError"}class Eh extends sr{constructor(n,s,o){super(n,"AuthWeakPasswordError",s,"weak_password"),this.reasons=o}}class iu extends sr{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const Bo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Nh=` 	
\r=`.split(""),dv=(()=>{const i=new Array(128);for(let n=0;n<i.length;n+=1)i[n]=-1;for(let n=0;n<Nh.length;n+=1)i[Nh[n].charCodeAt(0)]=-2;for(let n=0;n<Bo.length;n+=1)i[Bo[n].charCodeAt(0)]=n;return i})();function Ch(i,n,s){if(i!==null)for(n.queue=n.queue<<8|i,n.queuedBits+=8;n.queuedBits>=6;){const o=n.queue>>n.queuedBits-6&63;s(Bo[o]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const o=n.queue>>n.queuedBits-6&63;s(Bo[o]),n.queuedBits-=6}}function pf(i,n,s){const o=dv[i];if(o>-1)for(n.queue=n.queue<<6|o,n.queuedBits+=6;n.queuedBits>=8;)s(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function Ph(i){const n=[],s=h=>{n.push(String.fromCodePoint(h))},o={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},u=h=>{mv(h,o,s)};for(let h=0;h<i.length;h+=1)pf(i.charCodeAt(h),l,u);return n.join("")}function hv(i,n){if(i<=127){n(i);return}else if(i<=2047){n(192|i>>6),n(128|i&63);return}else if(i<=65535){n(224|i>>12),n(128|i>>6&63),n(128|i&63);return}else if(i<=1114111){n(240|i>>18),n(128|i>>12&63),n(128|i>>6&63),n(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function fv(i,n){for(let s=0;s<i.length;s+=1){let o=i.charCodeAt(s);if(o>55295&&o<=56319){const l=(o-55296)*1024&65535;o=(i.charCodeAt(s+1)-56320&65535|l)+65536,s+=1}hv(o,n)}}function mv(i,n,s){if(n.utf8seq===0){if(i<=127){s(i);return}for(let o=1;o<6;o+=1)if((i>>7-o&1)===0){n.utf8seq=o;break}if(n.utf8seq===2)n.codepoint=i&31;else if(n.utf8seq===3)n.codepoint=i&15;else if(n.utf8seq===4)n.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|i&63,n.utf8seq-=1,n.utf8seq===0&&s(n.codepoint)}}function ps(i){const n=[],s={queue:0,queuedBits:0},o=l=>{n.push(l)};for(let l=0;l<i.length;l+=1)pf(i.charCodeAt(l),s,o);return new Uint8Array(n)}function pv(i){const n=[];return fv(i,s=>n.push(s)),new Uint8Array(n)}function Cr(i){const n=[],s={queue:0,queuedBits:0},o=l=>{n.push(l)};return i.forEach(l=>Ch(l,s,o)),Ch(null,s,o),n.join("")}function gv(i){return Math.round(Date.now()/1e3)+i}function vv(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){const n=Math.random()*16|0;return(i=="x"?n:n&3|8).toString(16)})}const Wt=()=>typeof window<"u"&&typeof document<"u",br={tested:!1,writable:!1},gf=()=>{if(!Wt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(br.tested)return br.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),br.tested=!0,br.writable=!0}catch{br.tested=!0,br.writable=!1}return br.writable};function yv(i){const n={},s=new URL(i);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((l,u)=>{n[u]=l})}catch{}return s.searchParams.forEach((o,l)=>{n[l]=o}),n}const vf=i=>{let n;return i?n=i:typeof fetch>"u"?n=(...s)=>yi(async()=>{const{default:o}=await Promise.resolve().then(()=>xs);return{default:o}},void 0).then(({default:o})=>o(...s)):n=fetch,(...s)=>n(...s)},wv=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",ms=async(i,n,s)=>{await i.setItem(n,JSON.stringify(s))},kr=async(i,n)=>{const s=await i.getItem(n);if(!s)return null;try{return JSON.parse(s)}catch{return s}},er=async(i,n)=>{await i.removeItem(n)};class Vo{constructor(){this.promise=new Vo.promiseConstructor((n,s)=>{this.resolve=n,this.reject=s})}}Vo.promiseConstructor=Promise;function Fl(i){const n=i.split(".");if(n.length!==3)throw new iu("Invalid JWT structure");for(let o=0;o<n.length;o++)if(!iv.test(n[o]))throw new iu("JWT not in base64url format");return{header:JSON.parse(Ph(n[0])),payload:JSON.parse(Ph(n[1])),signature:ps(n[2]),raw:{header:n[0],payload:n[1]}}}async function xv(i){return await new Promise(n=>{setTimeout(()=>n(null),i)})}function _v(i,n){return new Promise((o,l)=>{(async()=>{for(let u=0;u<1/0;u++)try{const h=await i(u);if(!n(u,null,h)){o(h);return}}catch(h){if(!n(u,h)){l(h);return}}})()})}function bv(i){return("0"+i.toString(16)).substr(-2)}function kv(){const n=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=s.length;let l="";for(let u=0;u<56;u++)l+=s.charAt(Math.floor(Math.random()*o));return l}return crypto.getRandomValues(n),Array.from(n,bv).join("")}async function Sv(i){const s=new TextEncoder().encode(i),o=await crypto.subtle.digest("SHA-256",s),l=new Uint8Array(o);return Array.from(l).map(u=>String.fromCharCode(u)).join("")}async function jv(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const s=await Sv(i);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function us(i,n,s=!1){const o=kv();let l=o;s&&(l+="/PASSWORD_RECOVERY"),await ms(i,`${n}-code-verifier`,l);const u=await jv(o);return[u,o===u?"plain":"s256"]}const Ev=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Nv(i){const n=i.headers.get(ru);if(!n||!n.match(Ev))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function Cv(i){if(!i)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(i<=n)throw new Error("JWT has expired")}function Pv(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Tv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function cs(i){if(!Tv.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function zl(){const i={};return new Proxy(i,{get:(n,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const o=s.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Th(i){return JSON.parse(JSON.stringify(i))}var Rv=function(i,n){var s={};for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&n.indexOf(o)<0&&(s[o]=i[o]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(i);l<o.length;l++)n.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(i,o[l])&&(s[o[l]]=i[o[l]]);return s};const Sr=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Ov=[502,503,504];async function Rh(i){var n;if(!wv(i))throw new su(Sr(i),0);if(Ov.includes(i.status))throw new su(Sr(i),i.status);let s;try{s=await i.json()}catch(u){throw new Nr(Sr(u),u)}let o;const l=Nv(i);if(l&&l.getTime()>=mf["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?o=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(o=s.error_code),o){if(o==="weak_password")throw new Eh(Sr(s),i.status,((n=s.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(o==="session_not_found")throw new nr}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((u,h)=>u&&typeof h=="string",!0))throw new Eh(Sr(s),i.status,s.weak_password.reasons);throw new av(Sr(s),i.status||500,o)}const Av=(i,n,s,o)=>{const l={method:i,headers:n?.headers||{}};return i==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),l.body=JSON.stringify(o),Object.assign(Object.assign({},l),s))};async function je(i,n,s,o){var l;const u=Object.assign({},o?.headers);u[ru]||(u[ru]=mf["2024-01-01"].name),o?.jwt&&(u.Authorization=`Bearer ${o.jwt}`);const h=(l=o?.query)!==null&&l!==void 0?l:{};o?.redirectTo&&(h.redirect_to=o.redirectTo);const m=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",p=await Lv(i,n,s+m,{headers:u,noResolveJson:o?.noResolveJson},{},o?.body);return o?.xform?o?.xform(p):{data:Object.assign({},p),error:null}}async function Lv(i,n,s,o,l,u){const h=Av(n,o,l,u);let m;try{m=await i(s,Object.assign({},h))}catch(p){throw console.error(p),new su(Sr(p),0)}if(m.ok||await Rh(m),o?.noResolveJson)return m;try{return await m.json()}catch(p){await Rh(p)}}function an(i){var n;let s=null;Dv(i)&&(s=Object.assign({},i),i.expires_at||(s.expires_at=gv(i.expires_in)));const o=(n=i.user)!==null&&n!==void 0?n:i;return{data:{session:s,user:o},error:null}}function Oh(i){const n=an(i);return!n.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0)&&(n.data.weak_password=i.weak_password),n}function rr(i){var n;return{data:{user:(n=i.user)!==null&&n!==void 0?n:i},error:null}}function Iv(i){return{data:i,error:null}}function $v(i){const{action_link:n,email_otp:s,hashed_token:o,redirect_to:l,verification_type:u}=i,h=Rv(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:n,email_otp:s,hashed_token:o,redirect_to:l,verification_type:u},p=Object.assign({},h);return{data:{properties:m,user:p},error:null}}function Ah(i){return i}function Dv(i){return i.access_token&&i.refresh_token&&i.expires_in}const Bl=["global","local","others"];var Uv=function(i,n){var s={};for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&n.indexOf(o)<0&&(s[o]=i[o]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(i);l<o.length;l++)n.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(i,o[l])&&(s[o[l]]=i[o[l]]);return s};class Mv{constructor({url:n="",headers:s={},fetch:o}){this.url=n,this.headers=s,this.fetch=vf(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,s=Bl[0]){if(Bl.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Bl.join(", ")}`);try{return await je(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(o){if(pe(o))return{data:null,error:o};throw o}}async inviteUserByEmail(n,s={}){try{return await je(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:rr})}catch(o){if(pe(o))return{data:{user:null},error:o};throw o}}async generateLink(n){try{const{options:s}=n,o=Uv(n,["options"]),l=Object.assign(Object.assign({},o),s);return"newEmail"in o&&(l.new_email=o?.newEmail,delete l.newEmail),await je(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:$v,redirectTo:s?.redirectTo})}catch(s){if(pe(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(n){try{return await je(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:rr})}catch(s){if(pe(s))return{data:{user:null},error:s};throw s}}async listUsers(n){var s,o,l,u,h,m,p;try{const g={nextPage:null,lastPage:0,total:0},y=await je(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(s=n?.page)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:"",per_page:(u=(l=n?.perPage)===null||l===void 0?void 0:l.toString())!==null&&u!==void 0?u:""},xform:Ah});if(y.error)throw y.error;const w=await y.json(),k=(h=y.headers.get("x-total-count"))!==null&&h!==void 0?h:0,j=(p=(m=y.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return j.length>0&&(j.forEach(A=>{const P=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(A.split(";")[1].split("=")[1]);g[`${C}Page`]=P}),g.total=parseInt(k)),{data:Object.assign(Object.assign({},w),g),error:null}}catch(g){if(pe(g))return{data:{users:[]},error:g};throw g}}async getUserById(n){cs(n);try{return await je(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:rr})}catch(s){if(pe(s))return{data:{user:null},error:s};throw s}}async updateUserById(n,s){cs(n);try{return await je(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:s,headers:this.headers,xform:rr})}catch(o){if(pe(o))return{data:{user:null},error:o};throw o}}async deleteUser(n,s=!1){cs(n);try{return await je(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:s},xform:rr})}catch(o){if(pe(o))return{data:{user:null},error:o};throw o}}async _listFactors(n){cs(n.userId);try{const{data:s,error:o}=await je(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:s,error:o}}catch(s){if(pe(s))return{data:null,error:s};throw s}}async _deleteFactor(n){cs(n.userId),cs(n.id);try{return{data:await je(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(s){if(pe(s))return{data:null,error:s};throw s}}async _listOAuthClients(n){var s,o,l,u,h,m,p;try{const g={nextPage:null,lastPage:0,total:0},y=await je(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(s=n?.page)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:"",per_page:(u=(l=n?.perPage)===null||l===void 0?void 0:l.toString())!==null&&u!==void 0?u:""},xform:Ah});if(y.error)throw y.error;const w=await y.json(),k=(h=y.headers.get("x-total-count"))!==null&&h!==void 0?h:0,j=(p=(m=y.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return j.length>0&&(j.forEach(A=>{const P=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(A.split(";")[1].split("=")[1]);g[`${C}Page`]=P}),g.total=parseInt(k)),{data:Object.assign(Object.assign({},w),g),error:null}}catch(g){if(pe(g))return{data:{clients:[]},error:g};throw g}}async _createOAuthClient(n){try{return await je(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(pe(s))return{data:null,error:s};throw s}}async _getOAuthClient(n){try{return await je(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(pe(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(n){try{return await je(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(pe(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(n){try{return await je(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(pe(s))return{data:null,error:s};throw s}}}function Lh(i={}){return{getItem:n=>i[n]||null,setItem:(n,s)=>{i[n]=s},removeItem:n=>{delete i[n]}}}const ds={debug:!!(globalThis&&gf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class yf extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class Fv extends yf{}async function zv(i,n,s){ds.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,n);const o=new globalThis.AbortController;return n>0&&setTimeout(()=>{o.abort(),ds.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async l=>{if(l){ds.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,l.name);try{return await s()}finally{ds.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,l.name)}}else{if(n===0)throw ds.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new Fv(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(ds.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function Bv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function wf(i){if(!/^0x[a-fA-F0-9]{40}$/.test(i))throw new Error(`@supabase/auth-js: Address "${i}" is invalid.`);return i.toLowerCase()}function Wv(i){return parseInt(i,16)}function Hv(i){const n=new TextEncoder().encode(i);return"0x"+Array.from(n,o=>o.toString(16).padStart(2,"0")).join("")}function qv(i){var n;const{chainId:s,domain:o,expirationTime:l,issuedAt:u=new Date,nonce:h,notBefore:m,requestId:p,resources:g,scheme:y,uri:w,version:k}=i;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(h&&h.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${h}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(k!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${k}`);if(!((n=i.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${i.statement}`)}const j=wf(i.address),A=y?`${y}://${o}`:o,P=i.statement?`${i.statement}
`:"",C=`${A} wants you to sign in with your Ethereum account:
${j}

${P}`;let D=`URI: ${w}
Version: ${k}
Chain ID: ${s}${h?`
Nonce: ${h}`:""}
Issued At: ${u.toISOString()}`;if(l&&(D+=`
Expiration Time: ${l.toISOString()}`),m&&(D+=`
Not Before: ${m.toISOString()}`),p&&(D+=`
Request ID: ${p}`),g){let N=`
Resources:`;for(const I of g){if(!I||typeof I!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${I}`);N+=`
- ${I}`}D+=N}return`${C}
${D}`}class lt extends Error{constructor({message:n,code:s,cause:o,name:l}){var u;super(n,{cause:o}),this.__isWebAuthnError=!0,this.name=(u=l??(o instanceof Error?o.name:void 0))!==null&&u!==void 0?u:"Unknown Error",this.code=s}}class Wo extends lt{constructor(n,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:n}),this.name="WebAuthnUnknownError",this.originalError=s}}function Gv({error:i,options:n}){var s,o,l;const{publicKey:u}=n;if(!u)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(n.signal instanceof AbortSignal)return new lt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else if(i.name==="ConstraintError"){if(((s=u.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new lt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:i});if(n.mediation==="conditional"&&((o=u.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new lt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:i});if(((l=u.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new lt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:i})}else{if(i.name==="InvalidStateError")return new lt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:i});if(i.name==="NotAllowedError")return new lt({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="NotSupportedError")return u.pubKeyCredParams.filter(m=>m.type==="public-key").length===0?new lt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:i}):new lt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:i});if(i.name==="SecurityError"){const h=window.location.hostname;if(_f(h)){if(u.rp.id!==h)return new lt({message:`The RP ID "${u.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new lt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="TypeError"){if(u.user.id.byteLength<1||u.user.id.byteLength>64)return new lt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:i})}else if(i.name==="UnknownError")return new lt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new lt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}function Vv({error:i,options:n}){const{publicKey:s}=n;if(!s)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(n.signal instanceof AbortSignal)return new lt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else{if(i.name==="NotAllowedError")return new lt({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="SecurityError"){const o=window.location.hostname;if(_f(o)){if(s.rpId!==o)return new lt({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new lt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="UnknownError")return new lt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new lt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}var xf=function(i,n){var s={};for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&n.indexOf(o)<0&&(s[o]=i[o]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(i);l<o.length;l++)n.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(i,o[l])&&(s[o[l]]=i[o[l]]);return s};class Kv{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const Jv=new Kv;function Qv(i){if(!i)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(i);const{challenge:n,user:s,excludeCredentials:o}=i,l=xf(i,["challenge","user","excludeCredentials"]),u=ps(n).buffer,h=Object.assign(Object.assign({},s),{id:ps(s.id).buffer}),m=Object.assign(Object.assign({},l),{challenge:u,user:h});if(o&&o.length>0){m.excludeCredentials=new Array(o.length);for(let p=0;p<o.length;p++){const g=o[p];m.excludeCredentials[p]=Object.assign(Object.assign({},g),{id:ps(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return m}function Yv(i){if(!i)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(i);const{challenge:n,allowCredentials:s}=i,o=xf(i,["challenge","allowCredentials"]),l=ps(n).buffer,u=Object.assign(Object.assign({},o),{challenge:l});if(s&&s.length>0){u.allowCredentials=new Array(s.length);for(let h=0;h<s.length;h++){const m=s[h];u.allowCredentials[h]=Object.assign(Object.assign({},m),{id:ps(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return u}function Xv(i){var n;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const s=i;return{id:i.id,rawId:i.id,response:{attestationObject:Cr(new Uint8Array(i.response.attestationObject)),clientDataJSON:Cr(new Uint8Array(i.response.clientDataJSON))},type:"public-key",clientExtensionResults:i.getClientExtensionResults(),authenticatorAttachment:(n=s.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function Zv(i){var n;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const s=i,o=i.getClientExtensionResults(),l=i.response;return{id:i.id,rawId:i.id,response:{authenticatorData:Cr(new Uint8Array(l.authenticatorData)),clientDataJSON:Cr(new Uint8Array(l.clientDataJSON)),signature:Cr(new Uint8Array(l.signature)),userHandle:l.userHandle?Cr(new Uint8Array(l.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(n=s.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function _f(i){return i==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(i)}function Ih(){var i,n;return!!(Wt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((i=navigator?.credentials)===null||i===void 0?void 0:i.create)=="function"&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.get)=="function")}async function ey(i){try{const n=await navigator.credentials.create(i);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Wo("Browser returned unexpected credential type",n)}:{data:null,error:new Wo("Empty credential response",n)}}catch(n){return{data:null,error:Gv({error:n,options:i})}}}async function ty(i){try{const n=await navigator.credentials.get(i);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Wo("Browser returned unexpected credential type",n)}:{data:null,error:new Wo("Empty credential response",n)}}catch(n){return{data:null,error:Vv({error:n,options:i})}}}const ny={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},ry={userVerification:"preferred",hints:["security-key"]};function Ho(...i){const n=l=>l!==null&&typeof l=="object"&&!Array.isArray(l),s=l=>l instanceof ArrayBuffer||ArrayBuffer.isView(l),o={};for(const l of i)if(l)for(const u in l){const h=l[u];if(h!==void 0)if(Array.isArray(h))o[u]=h;else if(s(h))o[u]=h;else if(n(h)){const m=o[u];n(m)?o[u]=Ho(m,h):o[u]=Ho(h)}else o[u]=h}return o}function sy(i,n){return Ho(ny,i,n||{})}function iy(i,n){return Ho(ry,i,n||{})}class oy{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:s,friendlyName:o,signal:l},u){try{const{data:h,error:m}=await this.client.mfa.challenge({factorId:n,webauthn:s});if(!h)return{data:null,error:m};const p=l??Jv.createNewAbortSignal();if(h.webauthn.type==="create"){const{user:g}=h.webauthn.credential_options.publicKey;g.name||(g.name=`${g.id}:${o}`),g.displayName||(g.displayName=g.name)}switch(h.webauthn.type){case"create":{const g=sy(h.webauthn.credential_options.publicKey,u?.create),{data:y,error:w}=await ey({publicKey:g,signal:p});return y?{data:{factorId:n,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:y}},error:null}:{data:null,error:w}}case"request":{const g=iy(h.webauthn.credential_options.publicKey,u?.request),{data:y,error:w}=await ty(Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:g,signal:p}));return y?{data:{factorId:n,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:y}},error:null}:{data:null,error:w}}}}catch(h){return pe(h)?{data:null,error:h}:{data:null,error:new Nr("Unexpected error in challenge",h)}}}async _verify({challengeId:n,factorId:s,webauthn:o}){return this.client.mfa.verify({factorId:s,challengeId:n,webauthn:o})}async _authenticate({factorId:n,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:l}},u){if(!s)return{data:null,error:new hi("rpId is required for WebAuthn authentication")};try{if(!Ih())return{data:null,error:new Nr("Browser does not support WebAuthn",null)};const{data:h,error:m}=await this.challenge({factorId:n,webauthn:{rpId:s,rpOrigins:o},signal:l},{request:u});if(!h)return{data:null,error:m};const{webauthn:p}=h;return this._verify({factorId:n,challengeId:h.challengeId,webauthn:{type:p.type,rpId:s,rpOrigins:o,credential_response:p.credential_response}})}catch(h){return pe(h)?{data:null,error:h}:{data:null,error:new Nr("Unexpected error in authenticate",h)}}}async _register({friendlyName:n,rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:l},u){if(!s)return{data:null,error:new hi("rpId is required for WebAuthn registration")};try{if(!Ih())return{data:null,error:new Nr("Browser does not support WebAuthn",null)};const{data:h,error:m}=await this._enroll({friendlyName:n});if(!h)return await this.client.mfa.listFactors().then(y=>{var w;return(w=y.data)===null||w===void 0?void 0:w.all.find(k=>k.factor_type==="webauthn"&&k.friendly_name===n&&k.status!=="unverified")}).then(y=>y?this.client.mfa.unenroll({factorId:y?.id}):void 0),{data:null,error:m};const{data:p,error:g}=await this._challenge({factorId:h.id,friendlyName:h.friendly_name,webauthn:{rpId:s,rpOrigins:o},signal:l},{create:u});return p?this._verify({factorId:h.id,challengeId:p.challengeId,webauthn:{rpId:s,rpOrigins:o,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:g}}catch(h){return pe(h)?{data:null,error:h}:{data:null,error:new Nr("Unexpected error in register",h)}}}}Bv();const ay={url:nv,storageKey:rv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:sv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function $h(i,n,s){return await s()}const hs={};class fi{get jwks(){var n,s;return(s=(n=hs[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(n){hs[this.storageKey]=Object.assign(Object.assign({},hs[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,s;return(s=(n=hs[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){hs[this.storageKey]=Object.assign(Object.assign({},hs[this.storageKey]),{cachedAt:n})}constructor(n){var s,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=fi.nextInstanceID,fi.nextInstanceID+=1,this.instanceID>0&&Wt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const l=Object.assign(Object.assign({},ay),n);if(this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.persistSession=l.persistSession,this.storageKey=l.storageKey,this.autoRefreshToken=l.autoRefreshToken,this.admin=new Mv({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=vf(l.fetch),this.lock=l.lock||$h,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,l.lock?this.lock=l.lock:Wt()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=zv:this.lock=$h,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new oy(this)},this.persistSession?(l.storage?this.storage=l.storage:gf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Lh(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=Lh(this.memoryStorage)),Wt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}_debug(...n){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ff}) ${new Date().toISOString()}`,...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{const s=yv(window.location.href);let o="none";if(this._isImplicitGrantCallback(s)?o="implicit":await this._isPKCECallback(s)&&(o="pkce"),Wt()&&this.detectSessionInUrl&&o!=="none"){const{data:l,error:u}=await this._getSessionFromURL(s,o);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),cv(u)){const p=(n=u.details)===null||n===void 0?void 0:n.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:h,redirectType:m}=l;return this._debug("#_initialize()","detected session in URL",h,"redirect type",m),await this._saveSession(h),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return pe(s)?{error:s}:{error:new Nr("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var s,o,l;try{const u=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(s=n?.options)===null||s===void 0?void 0:s.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(l=n?.options)===null||l===void 0?void 0:l.captchaToken}},xform:an}),{data:h,error:m}=u;if(m||!h)return{data:{user:null,session:null},error:m};const p=h.session,g=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:g,session:p},error:null}}catch(u){if(pe(u))return{data:{user:null,session:null},error:u};throw u}}async signUp(n){var s,o,l;try{let u;if("email"in n){const{email:y,password:w,options:k}=n;let j=null,A=null;this.flowType==="pkce"&&([j,A]=await us(this.storage,this.storageKey)),u=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:k?.emailRedirectTo,body:{email:y,password:w,data:(s=k?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:k?.captchaToken},code_challenge:j,code_challenge_method:A},xform:an})}else if("phone"in n){const{phone:y,password:w,options:k}=n;u=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:w,data:(o=k?.data)!==null&&o!==void 0?o:{},channel:(l=k?.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:k?.captchaToken}},xform:an})}else throw new Io("You must provide either an email or phone number and a password");const{data:h,error:m}=u;if(m||!h)return{data:{user:null,session:null},error:m};const p=h.session,g=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:g,session:p},error:null}}catch(u){if(pe(u))return{data:{user:null,session:null},error:u};throw u}}async signInWithPassword(n){try{let s;if("email"in n){const{email:u,password:h,options:m}=n;s=await je(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:h,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:Oh})}else if("phone"in n){const{phone:u,password:h,options:m}=n;s=await je(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:h,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:Oh})}else throw new Io("You must provide either an email or phone number and a password");const{data:o,error:l}=s;return l?{data:{user:null,session:null},error:l}:!o||!o.session||!o.user?{data:{user:null,session:null},error:new ls}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:l})}catch(s){if(pe(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(n){var s,o,l,u;return await this._handleProviderSignIn(n.provider,{redirectTo:(s=n.options)===null||s===void 0?void 0:s.redirectTo,scopes:(o=n.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=n.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(u=n.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:s}=n;switch(s){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(n){var s,o,l,u,h,m,p,g,y,w,k;let j,A;if("message"in n)j=n.message,A=n.signature;else{const{chain:P,wallet:C,statement:D,options:N}=n;let I;if(Wt())if(typeof C=="object")I=C;else{const X=window;if("ethereum"in X&&typeof X.ethereum=="object"&&"request"in X.ethereum&&typeof X.ethereum.request=="function")I=X.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!N?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=C}const F=new URL((s=N?.url)!==null&&s!==void 0?s:window.location.href),Z=await I.request({method:"eth_requestAccounts"}).then(X=>X).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Z||Z.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const U=wf(Z[0]);let Y=(o=N?.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!Y){const X=await I.request({method:"eth_chainId"});Y=Wv(X)}const oe={domain:F.host,address:U,statement:D,uri:F.href,version:"1",chainId:Y,nonce:(l=N?.signInWithEthereum)===null||l===void 0?void 0:l.nonce,issuedAt:(h=(u=N?.signInWithEthereum)===null||u===void 0?void 0:u.issuedAt)!==null&&h!==void 0?h:new Date,expirationTime:(m=N?.signInWithEthereum)===null||m===void 0?void 0:m.expirationTime,notBefore:(p=N?.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(g=N?.signInWithEthereum)===null||g===void 0?void 0:g.requestId,resources:(y=N?.signInWithEthereum)===null||y===void 0?void 0:y.resources};j=qv(oe),A=await I.request({method:"personal_sign",params:[Hv(j),U]})}try{const{data:P,error:C}=await je(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:j,signature:A},!((w=n.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(k=n.options)===null||k===void 0?void 0:k.captchaToken}}:null),xform:an});if(C)throw C;return!P||!P.session||!P.user?{data:{user:null,session:null},error:new ls}:(P.session&&(await this._saveSession(P.session),await this._notifyAllSubscribers("SIGNED_IN",P.session)),{data:Object.assign({},P),error:C})}catch(P){if(pe(P))return{data:{user:null,session:null},error:P};throw P}}async signInWithSolana(n){var s,o,l,u,h,m,p,g,y,w,k,j;let A,P;if("message"in n)A=n.message,P=n.signature;else{const{chain:C,wallet:D,statement:N,options:I}=n;let F;if(Wt())if(typeof D=="object")F=D;else{const U=window;if("solana"in U&&typeof U.solana=="object"&&("signIn"in U.solana&&typeof U.solana.signIn=="function"||"signMessage"in U.solana&&typeof U.solana.signMessage=="function"))F=U.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof D!="object"||!I?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");F=D}const Z=new URL((s=I?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in F&&F.signIn){const U=await F.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},I?.signInWithSolana),{version:"1",domain:Z.host,uri:Z.href}),N?{statement:N}:null));let Y;if(Array.isArray(U)&&U[0]&&typeof U[0]=="object")Y=U[0];else if(U&&typeof U=="object"&&"signedMessage"in U&&"signature"in U)Y=U;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in Y&&"signature"in Y&&(typeof Y.signedMessage=="string"||Y.signedMessage instanceof Uint8Array)&&Y.signature instanceof Uint8Array)A=typeof Y.signedMessage=="string"?Y.signedMessage:new TextDecoder().decode(Y.signedMessage),P=Y.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in F)||typeof F.signMessage!="function"||!("publicKey"in F)||typeof F!="object"||!F.publicKey||!("toBase58"in F.publicKey)||typeof F.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");A=[`${Z.host} wants you to sign in with your Solana account:`,F.publicKey.toBase58(),...N?["",N,""]:[""],"Version: 1",`URI: ${Z.href}`,`Issued At: ${(l=(o=I?.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((u=I?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${I.signInWithSolana.notBefore}`]:[],...!((h=I?.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${I.signInWithSolana.expirationTime}`]:[],...!((m=I?.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${I.signInWithSolana.chainId}`]:[],...!((p=I?.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${I.signInWithSolana.nonce}`]:[],...!((g=I?.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${I.signInWithSolana.requestId}`]:[],...!((w=(y=I?.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||w===void 0)&&w.length?["Resources",...I.signInWithSolana.resources.map(Y=>`- ${Y}`)]:[]].join(`
`);const U=await F.signMessage(new TextEncoder().encode(A),"utf8");if(!U||!(U instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");P=U}}try{const{data:C,error:D}=await je(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:A,signature:Cr(P)},!((k=n.options)===null||k===void 0)&&k.captchaToken?{gotrue_meta_security:{captcha_token:(j=n.options)===null||j===void 0?void 0:j.captchaToken}}:null),xform:an});if(D)throw D;return!C||!C.session||!C.user?{data:{user:null,session:null},error:new ls}:(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),{data:Object.assign({},C),error:D})}catch(C){if(pe(C))return{data:{user:null,session:null},error:C};throw C}}async _exchangeCodeForSession(n){const s=await kr(this.storage,`${this.storageKey}-code-verifier`),[o,l]=(s??"").split("/");try{const{data:u,error:h}=await je(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:o},xform:an});if(await er(this.storage,`${this.storageKey}-code-verifier`),h)throw h;return!u||!u.session||!u.user?{data:{user:null,session:null,redirectType:null},error:new ls}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:Object.assign(Object.assign({},u),{redirectType:l??null}),error:h})}catch(u){if(pe(u))return{data:{user:null,session:null,redirectType:null},error:u};throw u}}async signInWithIdToken(n){try{const{options:s,provider:o,token:l,access_token:u,nonce:h}=n,m=await je(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:l,access_token:u,nonce:h,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:an}),{data:p,error:g}=m;return g?{data:{user:null,session:null},error:g}:!p||!p.session||!p.user?{data:{user:null,session:null},error:new ls}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:p,error:g})}catch(s){if(pe(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(n){var s,o,l,u,h;try{if("email"in n){const{email:m,options:p}=n;let g=null,y=null;this.flowType==="pkce"&&([g,y]=await us(this.storage,this.storageKey));const{error:w}=await je(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(s=p?.data)!==null&&s!==void 0?s:{},create_user:(o=p?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:g,code_challenge_method:y},redirectTo:p?.emailRedirectTo});return{data:{user:null,session:null},error:w}}if("phone"in n){const{phone:m,options:p}=n,{data:g,error:y}=await je(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(l=p?.data)!==null&&l!==void 0?l:{},create_user:(u=p?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},channel:(h=p?.channel)!==null&&h!==void 0?h:"sms"}});return{data:{user:null,session:null,messageId:g?.message_id},error:y}}throw new Io("You must provide either an email or phone number.")}catch(m){if(pe(m))return{data:{user:null,session:null},error:m};throw m}}async verifyOtp(n){var s,o;try{let l,u;"options"in n&&(l=(s=n.options)===null||s===void 0?void 0:s.redirectTo,u=(o=n.options)===null||o===void 0?void 0:o.captchaToken);const{data:h,error:m}=await je(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:u}}),redirectTo:l,xform:an});if(m)throw m;if(!h)throw new Error("An error occurred on token verification.");const p=h.session,g=h.user;return p?.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),{data:{user:g,session:p},error:null}}catch(l){if(pe(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithSSO(n){var s,o,l;try{let u=null,h=null;return this.flowType==="pkce"&&([u,h]=await us(this.storage,this.storageKey)),await je(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(o=(s=n.options)===null||s===void 0?void 0:s.redirectTo)!==null&&o!==void 0?o:void 0}),!((l=n?.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:h}),headers:this.headers,xform:Iv})}catch(u){if(pe(u))return{data:null,error:u};throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:s},error:o}=n;if(o)throw o;if(!s)throw new nr;const{error:l}=await je(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:l}})}catch(n){if(pe(n))return{data:{user:null,session:null},error:n};throw n}}async resend(n){try{const s=`${this.url}/resend`;if("email"in n){const{email:o,type:l,options:u}=n,{error:h}=await je(this.fetch,"POST",s,{headers:this.headers,body:{email:o,type:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return{data:{user:null,session:null},error:h}}else if("phone"in n){const{phone:o,type:l,options:u}=n,{data:h,error:m}=await je(this.fetch,"POST",s,{headers:this.headers,body:{phone:o,type:l,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return{data:{user:null,session:null,messageId:h?.message_id},error:m}}throw new Io("You must provide either an email or phone number and a type")}catch(s){if(pe(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(n,s){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await o,await s()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=s();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await n(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const s=await kr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?n=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const o=n.expires_at?n.expires_at*1e3-Date.now()<Ul:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",n.expires_at),!o){if(this.userStorage){const h=await kr(this.userStorage,this.storageKey+"-user");h?.user?n.user=h.user:n.user=zl()}if(this.storage.isServer&&n.user){let h=this.suppressGetSessionWarning;n=new Proxy(n,{get:(p,g,y)=>(!h&&g==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),h=!0,this.suppressGetSessionWarning=!0),Reflect.get(p,g,y))})}return{data:{session:n},error:null}}const{data:l,error:u}=await this._callRefreshToken(n.refresh_token);return u?{data:{session:null},error:u}:{data:{session:l},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(n){return n?await this._getUser(n):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(n){try{return n?await je(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:rr}):await this._useSession(async s=>{var o,l,u;const{data:h,error:m}=s;if(m)throw m;return!(!((o=h.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new nr}:await je(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(l=h.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0,xform:rr})})}catch(s){if(pe(s))return uv(s)&&(await this._removeSession(),await er(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(n,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,s))}async _updateUser(n,s={}){try{return await this._useSession(async o=>{const{data:l,error:u}=o;if(u)throw u;if(!l.session)throw new nr;const h=l.session;let m=null,p=null;this.flowType==="pkce"&&n.email!=null&&([m,p]=await us(this.storage,this.storageKey));const{data:g,error:y}=await je(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:m,code_challenge_method:p}),jwt:h.access_token,xform:rr});if(y)throw y;return h.user=g.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),{data:{user:h.user},error:null}})}catch(o){if(pe(o))return{data:{user:null},error:o};throw o}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new nr;const s=Date.now()/1e3;let o=s,l=!0,u=null;const{payload:h}=Fl(n.access_token);if(h.exp&&(o=h.exp,l=o<=s),l){const{data:m,error:p}=await this._callRefreshToken(n.refresh_token);if(p)return{data:{user:null,session:null},error:p};if(!m)return{data:{user:null,session:null},error:null};u=m}else{const{data:m,error:p}=await this._getUser(n.access_token);if(p)throw p;u={access_token:n.access_token,refresh_token:n.refresh_token,user:m.user,token_type:"bearer",expires_in:o-s,expires_at:o},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return{data:{user:u.user,session:u},error:null}}catch(s){if(pe(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async s=>{var o;if(!n){const{data:h,error:m}=s;if(m)throw m;n=(o=h.session)!==null&&o!==void 0?o:void 0}if(!n?.refresh_token)throw new nr;const{data:l,error:u}=await this._callRefreshToken(n.refresh_token);return u?{data:{user:null,session:null},error:u}:l?{data:{user:l.user,session:l},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(pe(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(n,s){try{if(!Wt())throw new $o("No browser detected.");if(n.error||n.error_description||n.error_code)throw new $o(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new jh("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new $o("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new jh("No code detected.");const{data:N,error:I}=await this._exchangeCodeForSession(n.code);if(I)throw I;const F=new URL(window.location.href);return F.searchParams.delete("code"),window.history.replaceState(window.history.state,"",F.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:l,access_token:u,refresh_token:h,expires_in:m,expires_at:p,token_type:g}=n;if(!u||!m||!h||!g)throw new $o("No session defined in URL");const y=Math.round(Date.now()/1e3),w=parseInt(m);let k=y+w;p&&(k=parseInt(p));const j=k-y;j*1e3<=fs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${j}s, should have been closer to ${w}s`);const A=k-w;y-A>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",A,k,y):y-A<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",A,k,y);const{data:P,error:C}=await this._getUser(u);if(C)throw C;const D={provider_token:o,provider_refresh_token:l,access_token:u,expires_in:w,expires_at:k,refresh_token:h,token_type:g,user:P.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:D,redirectType:n.type},error:null}}catch(o){if(pe(o))return{data:{session:null,redirectType:null},error:o};throw o}}_isImplicitGrantCallback(n){return!!(n.access_token||n.error_description)}async _isPKCECallback(n){const s=await kr(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&s)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async s=>{var o;const{data:l,error:u}=s;if(u)return{error:u};const h=(o=l.session)===null||o===void 0?void 0:o.access_token;if(h){const{error:m}=await this.admin.signOut(h,n);if(m&&!(lv(m)&&(m.status===404||m.status===401||m.status===403)))return{error:m}}return n!=="others"&&(await this._removeSession(),await er(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(n){const s=vv(),o={id:s,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:o}}}async _emitInitialSession(n){return await this._useSession(async s=>{var o,l;try{const{data:{session:u},error:h}=s;if(h)throw h;await((o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",n,"session",u)}catch(u){await((l=this.stateChangeEmitters.get(n))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",u),console.error(u)}})}async resetPasswordForEmail(n,s={}){let o=null,l=null;this.flowType==="pkce"&&([o,l]=await us(this.storage,this.storageKey,!0));try{return await je(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:o,code_challenge_method:l,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(u){if(pe(u))return{data:null,error:u};throw u}}async getUserIdentities(){var n;try{const{data:s,error:o}=await this.getUser();if(o)throw o;return{data:{identities:(n=s.user.identities)!==null&&n!==void 0?n:[]},error:null}}catch(s){if(pe(s))return{data:null,error:s};throw s}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var s;try{const{data:o,error:l}=await this._useSession(async u=>{var h,m,p,g,y;const{data:w,error:k}=u;if(k)throw k;const j=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(h=n.options)===null||h===void 0?void 0:h.redirectTo,scopes:(m=n.options)===null||m===void 0?void 0:m.scopes,queryParams:(p=n.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await je(this.fetch,"GET",j,{headers:this.headers,jwt:(y=(g=w.session)===null||g===void 0?void 0:g.access_token)!==null&&y!==void 0?y:void 0})});if(l)throw l;return Wt()&&!(!((s=n.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(o?.url),{data:{provider:n.provider,url:o?.url},error:null}}catch(o){if(pe(o))return{data:{provider:n.provider,url:null},error:o};throw o}}async linkIdentityIdToken(n){return await this._useSession(async s=>{var o;try{const{error:l,data:{session:u}}=s;if(l)throw l;const{options:h,provider:m,token:p,access_token:g,nonce:y}=n,w=await je(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=u?.access_token)!==null&&o!==void 0?o:void 0,body:{provider:m,id_token:p,access_token:g,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:an}),{data:k,error:j}=w;return j?{data:{user:null,session:null},error:j}:!k||!k.session||!k.user?{data:{user:null,session:null},error:new ls}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("USER_UPDATED",k.session)),{data:k,error:j})}catch(l){if(pe(l))return{data:{user:null,session:null},error:l};throw l}})}async unlinkIdentity(n){try{return await this._useSession(async s=>{var o,l;const{data:u,error:h}=s;if(h)throw h;return await je(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(l=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0})})}catch(s){if(pe(s))return{data:null,error:s};throw s}}async _refreshAccessToken(n){const s=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(s,"begin");try{const o=Date.now();return await _v(async l=>(l>0&&await xv(200*Math.pow(2,l-1)),this._debug(s,"refreshing attempt",l),await je(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:an})),(l,u)=>{const h=200*Math.pow(2,l);return u&&Ml(u)&&Date.now()+h-o<fs})}catch(o){if(this._debug(s,"error",o),pe(o))return{data:{session:null,user:null},error:o};throw o}finally{this._debug(s,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,s){const o=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",s,"url",o),Wt()&&!s.skipBrowserRedirect&&window.location.assign(o),{data:{provider:n,url:o},error:null}}async _recoverAndRefresh(){var n,s;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const l=await kr(this.storage,this.storageKey);if(l&&this.userStorage){let h=await kr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:l.user},await ms(this.userStorage,this.storageKey+"-user",h)),l.user=(n=h?.user)!==null&&n!==void 0?n:zl()}else if(l&&!l.user&&!l.user){const h=await kr(this.storage,this.storageKey+"-user");h&&h?.user?(l.user=h.user,await er(this.storage,this.storageKey+"-user"),await ms(this.storage,this.storageKey,l)):l.user=zl()}if(this._debug(o,"session from storage",l),!this._isValidSession(l)){this._debug(o,"session is not valid"),l!==null&&await this._removeSession();return}const u=((s=l.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Ul;if(this._debug(o,`session has${u?"":" not"} expired with margin of ${Ul}s`),u){if(this.autoRefreshToken&&l.refresh_token){const{error:h}=await this._callRefreshToken(l.refresh_token);h&&(console.error(h),Ml(h)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:m}=await this._getUser(l.access_token);!m&&h?.user?(l.user=h.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(o,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(o,"error",l),console.error(l);return}finally{this._debug(o,"end")}}async _callRefreshToken(n){var s,o;if(!n)throw new nr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new Vo;const{data:u,error:h}=await this._refreshAccessToken(n);if(h)throw h;if(!u.session)throw new nr;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const m={data:u.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(u){if(this._debug(l,"error",u),pe(u)){const h={data:null,error:u};return Ml(u)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(h),h}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(u),u}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(n,s,o=!0){const l=`#_notifyAllSubscribers(${n})`;this._debug(l,"begin",s,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:n,session:s});const u=[],h=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(n,s)}catch(p){u.push(p)}});if(await Promise.all(h),u.length>0){for(let m=0;m<u.length;m+=1)console.error(u[m]);throw u[0]}}finally{this._debug(l,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0;const s=Object.assign({},n),o=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&s.user&&await ms(this.userStorage,this.storageKey+"-user",{user:s.user});const l=Object.assign({},s);delete l.user;const u=Th(l);await ms(this.storage,this.storageKey,u)}else{const l=Th(s);await ms(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),await er(this.storage,this.storageKey),await er(this.storage,this.storageKey+"-code-verifier"),await er(this.storage,this.storageKey+"-user"),this.userStorage&&await er(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&Wt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),fs);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async s=>{const{data:{session:o}}=s;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((o.expires_at*1e3-n)/fs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${fs}ms, refresh threshold is ${nu} ticks`),l<=nu&&await this._callRefreshToken(o.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof yf)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Wt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const s=`#_onVisibilityChanged(${n})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,s,o){const l=[`provider=${encodeURIComponent(s)}`];if(o?.redirectTo&&l.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&l.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[u,h]=await us(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(h)}`});l.push(m.toString())}if(o?.queryParams){const u=new URLSearchParams(o.queryParams);l.push(u.toString())}return o?.skipBrowserRedirect&&l.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${n}?${l.join("&")}`}async _unenroll(n){try{return await this._useSession(async s=>{var o;const{data:l,error:u}=s;return u?{data:null,error:u}:await je(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(o=l?.session)===null||o===void 0?void 0:o.access_token})})}catch(s){if(pe(s))return{data:null,error:s};throw s}}async _enroll(n){try{return await this._useSession(async s=>{var o,l;const{data:u,error:h}=s;if(h)return{data:null,error:h};const m=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:p,error:g}=await je(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token});return g?{data:null,error:g}:(n.factorType==="totp"&&p.type==="totp"&&(!((l=p?.totp)===null||l===void 0)&&l.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),{data:p,error:null})})}catch(s){if(pe(s))return{data:null,error:s};throw s}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var o;const{data:l,error:u}=s;if(u)return{data:null,error:u};const h=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?Xv(n.webauthn.credential_response):Zv(n.webauthn.credential_response)})}:{code:n.code}),{data:m,error:p}=await je(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:h,headers:this.headers,jwt:(o=l?.session)===null||o===void 0?void 0:o.access_token});return p?{data:null,error:p}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+m.expires_in},m)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",m),{data:m,error:p})})}catch(s){if(pe(s))return{data:null,error:s};throw s}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var o;const{data:l,error:u}=s;if(u)return{data:null,error:u};const h=await je(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(o=l?.session)===null||o===void 0?void 0:o.access_token});if(h.error)return h;const{data:m}=h;if(m.type!=="webauthn")return{data:m,error:null};switch(m.webauthn.type){case"create":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:Qv(m.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:Yv(m.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(pe(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(n){const{data:s,error:o}=await this._challenge({factorId:n.factorId});return o?{data:null,error:o}:await this._verify({factorId:n.factorId,challengeId:s.id,code:n.code})}async _listFactors(){var n;const{data:{user:s},error:o}=await this.getUser();if(o)return{data:null,error:o};const l={all:[],phone:[],totp:[],webauthn:[]};for(const u of(n=s?.factors)!==null&&n!==void 0?n:[])l.all.push(u),u.status==="verified"&&l[u.factor_type].push(u);return{data:l,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async n=>{var s,o;const{data:{session:l},error:u}=n;if(u)return{data:null,error:u};if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=Fl(l.access_token);let m=null;h.aal&&(m=h.aal);let p=m;((o=(s=l.user.factors)===null||s===void 0?void 0:s.filter(w=>w.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(p="aal2");const y=h.amr||[];return{data:{currentLevel:m,nextLevel:p,currentAuthenticationMethods:y},error:null}}))}async fetchJwk(n,s={keys:[]}){let o=s.keys.find(m=>m.kid===n);if(o)return o;const l=Date.now();if(o=this.jwks.keys.find(m=>m.kid===n),o&&this.jwks_cached_at+ov>l)return o;const{data:u,error:h}=await je(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=l,o=u.keys.find(m=>m.kid===n),!o)?null:o}async getClaims(n,s={}){try{let o=n;if(!o){const{data:j,error:A}=await this.getSession();if(A||!j.session)return{data:null,error:A};o=j.session.access_token}const{header:l,payload:u,signature:h,raw:{header:m,payload:p}}=Fl(o);s?.allowExpired||Cv(u.exp);const g=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!g){const{error:j}=await this.getUser(o);if(j)throw j;return{data:{claims:u,header:l,signature:h},error:null}}const y=Pv(l.alg),w=await crypto.subtle.importKey("jwk",g,y,!0,["verify"]);if(!await crypto.subtle.verify(y,w,h,pv(`${m}.${p}`)))throw new iu("Invalid JWT signature");return{data:{claims:u,header:l,signature:h},error:null}}catch(o){if(pe(o))return{data:null,error:o};throw o}}}fi.nextInstanceID=0;const ly=fi;class uy extends ly{constructor(n){super(n)}}var cy=function(i,n,s,o){function l(u){return u instanceof s?u:new s(function(h){h(u)})}return new(s||(s=Promise))(function(u,h){function m(y){try{g(o.next(y))}catch(w){h(w)}}function p(y){try{g(o.throw(y))}catch(w){h(w)}}function g(y){y.done?u(y.value):l(y.value).then(m,p)}g((o=o.apply(i,n||[])).next())})};class dy{constructor(n,s,o){var l,u,h;this.supabaseUrl=n,this.supabaseKey=s;const m=tv(n);if(!s)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const p=`sb-${m.hostname.split(".")[0]}-auth-token`,g={db:q0,realtime:V0,auth:Object.assign(Object.assign({},G0),{storageKey:p}),global:H0},y=ev(o??{},g);this.storageKey=(l=y.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(u=y.global.headers)!==null&&u!==void 0?u:{},y.accessToken?(this.accessToken=y.accessToken,this.auth=new Proxy({},{get:(w,k)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(k)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((h=y.auth)!==null&&h!==void 0?h:{},this.headers,y.global.fetch),this.fetch=Y0(s,this._getAccessToken.bind(this),y.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},y.realtime)),this.rest=new a0(new URL("rest/v1",m).href,{headers:this.headers,schema:y.db.schema,fetch:this.fetch}),this.storage=new z0(this.storageUrl.href,this.headers,this.fetch,o?.storage),y.accessToken||this._listenForAuthEvents()}get functions(){return new Yg(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,s={},o={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,s,o)}channel(n,s={config:{}}){return this.realtime.channel(n,s)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return cy(this,void 0,void 0,function*(){var n,s;if(this.accessToken)return yield this.accessToken();const{data:o}=yield this.auth.getSession();return(s=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:s,detectSessionInUrl:o,storage:l,userStorage:u,storageKey:h,flowType:m,lock:p,debug:g},y,w){const k={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new uy({url:this.authUrl.href,headers:Object.assign(Object.assign({},k),y),storageKey:h,autoRefreshToken:n,persistSession:s,detectSessionInUrl:o,storage:l,userStorage:u,flowType:m,lock:p,debug:g,fetch:w,hasCustomAuthorizationHeader:Object.keys(this.headers).some(j=>j.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new S0(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,o)=>{this._handleTokenChanged(s,"CLIENT",o?.access_token)})}_handleTokenChanged(n,s,o){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==o?(this.changedAccessToken=o,this.realtime.setAuth(o)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const hy=(i,n,s)=>new dy(i,n,s);function fy(){if(typeof window<"u"||typeof process>"u")return!1;const i=process.version;if(i==null)return!1;const n=i.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}fy()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const my="https://gyjagrtwrhctmgkootjj.supabase.co",py="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd5amFncnR3cmhjdG1na29vdGpqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg3MzM2OTIsImV4cCI6MjA3NDMwOTY5Mn0.S6TrCrZWkISC7g14QmVriEQSBawLwxpcGYQKcNqpazA",J=hy(my,py,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}}),bf=_.createContext({user:null,session:null,loading:!0,signOut:async()=>{},showWelcome:!1,dismissWelcome:()=>{}});function gy({children:i}){const[n,s]=_.useState(null),[o,l]=_.useState(null),[u,h]=_.useState(!0),[m,p]=_.useState(!1),[g,y]=_.useState(!1);_.useEffect(()=>{let j=!0;J.auth.getSession().then(({data:P})=>{j&&(s(P.session??null),l(P.session?.user??null),h(!1))});const{data:A}=J.auth.onAuthStateChange((P,C)=>{if(s(C),l(C?.user??null),h(!1),P==="SIGNED_IN"&&C?.user&&!g){const D=new URLSearchParams(window.location.search),N=new URLSearchParams(window.location.hash.substring(1));(D.get("type")==="signup"||D.get("confirmation_token")||N.get("type")==="signup"||N.get("access_token")||window.location.search.includes("confirmation")||window.location.hash.includes("confirmation"))&&C.user.email_confirmed_at&&(p(!0),y(!0),window.history.replaceState({},document.title,window.location.pathname))}});return()=>{j=!1,A.subscription.unsubscribe()}},[]);async function w(){await J.auth.signOut()}function k(){p(!1),y(!0)}return c.jsx(bf.Provider,{value:{user:o,session:n,loading:u,signOut:w,showWelcome:m,dismissWelcome:k},children:i})}const ir=()=>_.useContext(bf);function vy(){const{user:i}=ir(),[n,s]=_.useState([]),[o,l]=_.useState(!0),[u,h]=_.useState(!1),[m,p]=_.useState(""),[g,y]=_.useState(""),[w,k]=_.useState(""),[j,A]=_.useState({});async function P(){l(!0),k("");try{if(!i?.id){s([]),l(!1);return}const{data:N,error:I}=await J.from("league_members").select("league_id").eq("user_id",i.id);if(I)throw I;const F=(N??[]).map(Q=>Q.league_id);if(!F.length){s([]),l(!1);return}const{data:Z,error:U}=await J.from("leagues").select("id,name,code,created_at").in("id",F).order("created_at",{ascending:!0});if(U)throw U;const Y=Z??[];if(!Y.length){s([]),l(!1);return}const{data:oe,error:X}=await J.from("league_members").select("league_id,user_id").in("league_id",Y.map(Q=>Q.id));if(X)throw X;const ge=new Map;(oe??[]).forEach(Q=>{const se=ge.get(Q.league_id)??[];se.push(Q.user_id),ge.set(Q.league_id,se)});const{data:le}=await J.from("fixtures").select("gw").order("gw",{ascending:!1}),Ee=le??[],ne=Ee.length?Math.max(...Ee.map(Q=>Q.gw)):1,de={};for(const Q of Y)try{const se=ge.get(Q.id)??[];if(se.length>0){const{data:M}=await J.from("gw_submissions").select("user_id").eq("gw",ne).in("user_id",se),z=M?.length||0;de[Q.id]=z===se.length}else de[Q.id]=!1}catch{de[Q.id]=!1}A(de);const $=Y.map(Q=>{const se=ge.get(Q.id)??[];return{id:Q.id,name:Q.name,code:Q.code,memberCount:se.length}});s($)}catch(N){k(N?.message??"Failed to load leagues.")}finally{l(!1)}}_.useEffect(()=>{P()},[i?.id]);async function C(){if(!(!g.trim()||!i?.id)){h(!0),k("");try{const N=g.trim(),I=await yy(),{data:F,error:Z}=await J.from("leagues").insert({name:N,code:I}).select("id,code").single();if(Z)throw Z;await J.from("league_members").insert({league_id:F.id,user_id:i.id}),y(""),await P()}catch(N){k(N?.message??"Failed to create league.")}finally{h(!1)}}}async function D(){const N=m.trim().toUpperCase();if(!(!N||!i?.id)){k("");try{const{data:I,error:F}=await J.from("leagues").select("id").eq("code",N).maybeSingle();if(F)throw F;if(!I){k("League code not found.");return}const{data:Z,error:U}=await J.from("league_members").select("user_id").eq("league_id",I.id);if(U)throw U;if(Z&&Z.length>=8){k("League is full (max 8 members).");return}await J.from("league_members").upsert({league_id:I.id,user_id:i.id},{onConflict:"league_id,user_id"}),p(""),await P()}catch(I){k(I?.message??"Failed to join league.")}}}return c.jsx("div",{className:"min-h-screen bg-slate-50",children:c.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-4xl sm:text-5xl font-extrabold tracking-tight text-slate-900 mt-0 mb-2",children:"Mini Leagues"}),c.jsxs("p",{className:"mt-0 mb-6 text-base text-slate-500",children:["Create or join a private league",c.jsx("br",{}),"and battle it out with your friends."]})]}),w&&c.jsx("div",{className:"mt-4 rounded border border-rose-200 bg-rose-50 text-rose-700 px-3 py-2 text-sm",children:w}),c.jsx("div",{className:"mt-6",children:o?c.jsx("div",{className:"px-4 py-4 text-sm",children:"Loading"}):n.length===0?c.jsx("div",{className:"px-4 py-4 text-sm",children:"No leagues yet."}):c.jsx("div",{className:"space-y-3",children:n.map(N=>c.jsx(it,{to:`/league/${N.code}`,className:"block p-4 bg-white hover:bg-emerald-50 transition-colors no-underline border border-gray-200 rounded-lg shadow-sm",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-lg font-semibold text-slate-900",children:N.name}),c.jsxs("div",{className:`text-xs mt-1 ${N.memberCount>=8?"text-red-600 font-semibold":"text-slate-500"}`,children:[N.memberCount," member",N.memberCount===1?"":"s",N.memberCount>=8&&" (Full)"]}),j[N.id]&&c.jsx("div",{className:"text-sm text-emerald-600 font-bold mt-1",children:"All Submitted"})]}),c.jsx("div",{className:"px-3 py-1 bg-slate-100 text-slate-700 text-sm font-medium rounded-md hover:bg-slate-200 transition-colors",children:"View"})]})},N.id))})}),c.jsx("div",{className:"mt-10 mb-3 text-xl font-extrabold text-slate-900",children:"Create or Join"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"border rounded-2xl p-4 bg-white",children:[c.jsx("div",{className:"text-sm font-medium mb-2",children:"Create a league"}),c.jsx("input",{className:"border rounded px-3 py-2 w-full bg-white",placeholder:"League name",value:g,onChange:N=>y(N.target.value)}),c.jsx("button",{className:"mt-3 px-3 py-2 rounded bg-slate-900 text-white disabled:opacity-50",onClick:C,disabled:u||!g.trim(),children:u?"Creating":"Create"})]}),c.jsxs("div",{className:"border rounded-2xl p-4 bg-white",children:[c.jsx("div",{className:"text-sm font-medium mb-2",children:"Join with code"}),c.jsx("input",{className:"border rounded px-3 py-2 w-full uppercase tracking-widest bg-white",placeholder:"ABCDE",value:m,onChange:N=>p(N.target.value)}),c.jsx("button",{className:"mt-3 px-3 py-2 rounded border",onClick:D,children:"Join"})]})]})]})})}async function yy(){const i="ABCDEFGHJKLMPQRSTVWXYZ23456789";for(let n=0;n<6;n++){let s="";for(let l=0;l<5;l++)s+=i[Math.floor(Math.random()*i.length)];const{data:o}=await J.from("leagues").select("id").eq("code",s).maybeSingle();if(!o)return s}return Math.random().toString(36).slice(2,7).toUpperCase()}const Do=8;function wy({chat:i,userId:n,nameById:s,isMember:o,newMsg:l,setNewMsg:u,onSend:h}){return c.jsx("div",{className:"mt-4",children:c.jsxs("div",{className:"flex flex-col h-[60vh]",children:[c.jsxs("div",{className:"flex-1 overflow-y-auto rounded-xl border bg-white shadow-sm p-3",children:[i.map(m=>{const p=m.user_id===n,g=s.get(m.user_id)??"Unknown",y=new Date(m.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return c.jsx("div",{className:`mb-2 flex ${p?"justify-end":"justify-start"}`,children:c.jsxs("div",{className:`max-w-[75%] rounded-lg px-3 py-2 text-sm ${p?"bg-emerald-600 text-white":"bg-slate-100 text-slate-900"}`,children:[!p&&c.jsx("div",{className:"font-semibold text-xs text-slate-600 mb-1",children:g}),c.jsx("div",{className:"whitespace-pre-wrap break-words",children:m.content}),c.jsx("div",{className:`mt-1 text-[10px] ${p?"text-emerald-100":"text-slate-500"}`,children:y})]})},m.id)}),!i.length&&c.jsx("div",{className:"text-center text-slate-500 py-8",children:"No messages yet  start the conversation!"})]}),c.jsx("div",{className:"mt-3",children:o?c.jsxs("form",{onSubmit:m=>{m.preventDefault(),h()},className:"flex gap-2",children:[c.jsx("input",{value:l,onChange:m=>u(m.target.value),placeholder:"Message your league",maxLength:2e3,className:"flex-1 rounded-md border border-slate-300 px-3 py-2 text-sm"}),c.jsx("button",{type:"submit",className:"px-4 py-2 bg-emerald-600 text-white font-semibold rounded-md disabled:opacity-50",disabled:!l.trim(),children:"Send"})]}):c.jsx("div",{className:"rounded-md border border-amber-200 bg-amber-50 text-amber-800 p-3 text-sm",children:"Join this league to chat with other members."})})]})})}function xy(i){const n=(i||"?").trim().split(/\s+/);return n.length?n.length===1?n[0].slice(0,1).toUpperCase():(n[0][0]+n[n.length-1][0]).toUpperCase():"?"}function Wl(i){return i.result==="H"||i.result==="D"||i.result==="A"?i.result:typeof i.home_goals=="number"&&typeof i.away_goals=="number"?i.home_goals>i.away_goals?"H":i.home_goals<i.away_goals?"A":"D":null}function _y({letter:i,correct:n,unicorn:s}){const o=n===null?"bg-slate-100 text-slate-600 border-slate-200":n?"bg-gradient-to-br from-yellow-400 via-orange-500 via-pink-500 to-purple-600 text-white shadow-xl shadow-yellow-400/40 relative overflow-hidden before:absolute before:inset-0 before:bg-gradient-to-r before:from-transparent before:via-white/70 before:to-transparent before:animate-[shimmer_1.2s_ease-in-out_infinite] after:absolute after:inset-0 after:bg-gradient-to-r after:from-transparent after:via-yellow-200/50 after:to-transparent after:animate-[shimmer_1.8s_ease-in-out_infinite_0.4s] ring-2 ring-yellow-300/60":"bg-slate-50 text-slate-400 border-slate-200";return c.jsxs("span",{className:["inline-flex items-center justify-center h-5 min-w-[20px] px-1.5","rounded-full border text-xs font-semibold mr-1 mb-0.5","align-middle",o].join(" "),title:s?"Unicorn!":void 0,children:[i,s?c.jsx("span",{className:"ml-1",children:""}):null]})}function by(){const{code:i=""}=Zp(),{user:n}=ir(),[s,o]=_.useState(null),[l,u]=_.useState([]),[h,m]=_.useState(!0),[p,g]=_.useState("gwr"),[y,w]=_.useState(!1),[k,j]=_.useState(!1),[A,P]=_.useState(!1),[C,D]=_.useState(null),[N,I]=_.useState(null),[F,Z]=_.useState(null),[U,Y]=_.useState([]),[oe,X]=_.useState(!1),[ge,le]=_.useState(!1),[Ee,ne]=_.useState(!1),[de,$]=_.useState(!1),[Q,se]=_.useState(!1),[M,z]=_.useState(!1),[q,b]=_.useState(!1),[L,ee]=_.useState(null),[K,he]=_.useState(!1),[ce,ve]=_.useState(!1),[ye,Pe]=_.useState(null),[Ve,Ut]=_.useState([]),[Ht,Se]=_.useState(""),Me=_.useMemo(()=>!!n?.id&&l.some(B=>B.id===n.id),[n?.id,l]),We=_.useMemo(()=>{const B=new Map;return l.forEach(we=>B.set(we.id,we.name)),B},[l]);_.useEffect(()=>{const B=we=>{const _e=we.target;oe&&!_e.closest(".gw-dropdown-container")&&X(!1)};return oe&&document.addEventListener("click",B),()=>{document.removeEventListener("click",B)}},[oe]),_.useEffect(()=>{if(p!=="chat"||!s?.id||!n?.id)return;(async()=>{await J.from("league_message_reads").upsert({league_id:s.id,user_id:n.id,last_read_at:new Date().toISOString()},{onConflict:"league_id,user_id"})})()},[p,s?.id,n?.id,Ve.length]),_.useEffect(()=>{let B=!0;return(async()=>{const{data:we}=await J.from("meta").select("current_gw").eq("id",1).maybeSingle();if(!B)return;D(we?.current_gw??null);const{data:_e}=await J.from("gw_results").select("gw").order("gw",{ascending:!1}).limit(1);if(!B)return;I(_e&&_e.length?_e[0].gw:null);const{data:Re}=await J.from("gw_results").select("gw").order("gw",{ascending:!1});if(!B)return;const ke=Re?[...new Set(Re.map(Ae=>Ae.gw))].sort((Ae,ot)=>ot-Ae):[];Y(ke),ke.length>0&&Z(ke[0])})(),()=>{B=!1}},[]);const et=_.useMemo(()=>l.map(B=>B.id),[l]),[He,yt]=_.useState([]),[nt,Nt]=_.useState([]),[wn,or]=_.useState([]),[_s,Tr]=_.useState([]),[Rr,Or]=_.useState([]),[Ar,An]=_.useState(!1);_.useEffect(()=>{let B=!0;return(async()=>{m(!0);const{data:we}=await J.from("leagues").select("id,name,code,created_at").eq("code",i).maybeSingle();if(!B)return;if(!we){o(null),u([]),m(!1);return}o(we);const{data:_e}=await J.from("league_members").select("users(id,name),created_at").eq("league_id",we.id).order("created_at",{ascending:!0}),Re=_e?.map(ot=>({id:ot.users.id,name:ot.users.name??"(no name)"}))??[],ke=[...Re].sort((ot,Ne)=>ot.name.localeCompare(Ne.name));u(ke);const Ae=Re[0];Pe(Ae),n?.id&&!Re.some(ot=>ot.id===n.id)&&$(!0),m(!1)})(),()=>{B=!1}},[i]),_.useEffect(()=>{if(!s?.id)return;let B=!0;(async()=>{const{data:_e,error:Re}=await J.from("league_messages").select("id, league_id, user_id, content, created_at").eq("league_id",s.id).order("created_at",{ascending:!0}).limit(200);B&&(Re||Ut(_e??[]))})();const we=J.channel(`league-messages:${s.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"league_messages",filter:`league_id=eq.${s.id}`},_e=>{Ut(Re=>[...Re,_e.new])}).subscribe();return()=>{B=!1,J.removeChannel(we)}},[s?.id]);async function xi(){if(!(!s||!n?.id)){P(!0);try{const{error:B}=await J.from("league_members").delete().eq("league_id",s.id).eq("user_id",n.id);if(B)throw B;window.location.href="/leagues"}catch(B){console.error("Error leaving league:",B),alert("Failed to leave league. Please try again.")}finally{P(!1),j(!1)}}}async function ar(){if(!(!s||!n?.id)){se(!0);try{if(l.length>=Do){alert("League is full (max 8 members)."),$(!1);return}const{error:B}=await J.from("league_members").insert({league_id:s.id,user_id:n.id});if(B)throw B;window.location.reload()}catch(B){alert(B?.message??"Failed to join league.")}finally{se(!1)}}}const xn=_.useMemo(()=>s?.created_by===n?.id||ye&&ye.id===n?.id&&!s?.created_by,[s?.created_by,n?.id,ye]),_i=_.useMemo(()=>s?.created_by?l.find(B=>B.id===s.created_by)?.name||"Unknown":ye?ye.name:"Unknown",[s?.created_by,l,ye]);console.log("Admin values:",{isAdmin:xn,adminName:_i});async function bi(){if(!(!L||!s||!n?.id)){he(!0);try{const{error:B}=await J.from("league_members").delete().eq("league_id",s.id).eq("user_id",L.id);if(B)throw B;window.location.reload()}catch(B){alert(B?.message??"Failed to remove member.")}finally{he(!1),z(!1),ee(null)}}}async function ki(){if(!(!s||!n?.id)){ve(!0);try{const{error:B}=await J.from("league_members").delete().eq("league_id",s.id);if(B)throw B;const{error:we}=await J.from("leagues").delete().eq("id",s.id);if(we)throw we;window.location.href="/leagues"}catch(B){alert(B?.message??"Failed to end league.")}finally{ve(!1),b(!1)}}}function Si(){if(!s)return;const B=`Join my mini league "${s.name}" on TotL!`,we=`${window.location.origin}/league/${s.code}`;navigator.share?navigator.share({title:`Join ${s.name}`,text:B,url:we}).catch(console.error):navigator.clipboard.writeText(`${B}

${we}`).then(()=>{alert("League link copied to clipboard!")}).catch(()=>{prompt("Share this league code:",s.code)})}async function bs(){if(!s||!n?.id)return;const B=Ht.trim();if(!B)return;Se("");const{error:we}=await J.from("league_messages").insert({league_id:s.id,user_id:n.id,content:B});we&&(console.error(we),alert("Failed to send message."))}_.useEffect(()=>{let B=!0;return(async()=>{const we=p==="gwr"?F:C;if(!we){yt([]),Nt([]),or([]),Tr([]);return}const{data:_e}=await J.from("fixtures").select("id,gw,fixture_index,home_team,away_team,home_code,away_code,home_name,away_name,kickoff_time").eq("gw",we).order("fixture_index",{ascending:!0});if(!B)return;if(yt(_e??[]),!et.length){Nt([]),or([]),Tr([]);return}const{data:Re}=await J.from("picks").select("user_id,gw,fixture_index,pick").eq("gw",we).in("user_id",et);if(!B)return;Nt(Re??[]);const{data:ke}=await J.from("gw_submissions").select("user_id,gw,submitted_at").eq("gw",we).in("user_id",et);if(!B)return;or(ke??[]);const{data:Ae}=await J.from("gw_results").select("gw,fixture_index,result");B&&Tr(Ae??[])})(),()=>{B=!1}},[p,C,N,F,et]);const lr=_.useMemo(()=>{const B=new Map;return wn.forEach(we=>B.set(`${we.user_id}:${we.gw}`,!0)),B},[wn]);_.useEffect(()=>{let B=!0;return(async()=>{if(!l.length){Or([]);return}An(!0);const{data:we}=await J.from("gw_results").select("gw,fixture_index,result"),_e=we??[],Re=new Map;if(_e.forEach(xe=>{const De=Wl(xe);De&&Re.set(`${xe.gw}:${xe.fixture_index}`,De)}),Re.size===0){Or(l.map(xe=>({user_id:xe.id,name:xe.name,mltPts:0,ocp:0,unicorns:0,wins:0,draws:0,form:[]}))),An(!1);return}const ke=[...new Set(Array.from(Re.keys()).map(xe=>parseInt(xe.split(":")[0],10)))].sort((xe,De)=>xe-De),{data:Ae}=await J.from("picks").select("user_id,gw,fixture_index,pick").in("user_id",l.map(xe=>xe.id)).in("gw",ke),ot=Ae??[],Ne=new Map;ke.forEach(xe=>{const De=new Map;l.forEach(Je=>De.set(Je.id,{user_id:Je.id,score:0,unicorns:0})),Ne.set(xe,De)}),ke.forEach(xe=>{Array.from(Re.entries()).filter(([Je])=>parseInt(Je.split(":")[0],10)===xe).map(([Je,ft])=>({idx:parseInt(Je.split(":")[1],10),out:ft})).forEach(({idx:Je,out:ft})=>{const $e=ot.filter(bt=>bt.gw===xe&&bt.fixture_index===Je),wt=$e.filter(bt=>bt.pick===ft).map(bt=>bt.user_id),Ln=Ne.get(xe);if($e.forEach(bt=>{if(bt.pick===ft){const ur=Ln.get(bt.user_id);ur.score+=1}}),wt.length===1&&l.length>=3){const bt=wt[0],ur=Ln.get(bt);ur.unicorns+=1}})});const Te=new Map,Ie=new Map,Fe=new Map,Ke=new Map,Yt=new Map,Ct=new Map;l.forEach(xe=>{Te.set(xe.id,0),Ie.set(xe.id,0),Fe.set(xe.id,0),Ke.set(xe.id,0),Yt.set(xe.id,0),Ct.set(xe.id,[])}),ke.forEach(xe=>{const De=Array.from(Ne.get(xe).values());if(De.forEach($e=>{Ie.set($e.user_id,(Ie.get($e.user_id)??0)+$e.score),Fe.set($e.user_id,(Fe.get($e.user_id)??0)+$e.unicorns)}),De.sort(($e,wt)=>wt.score-$e.score||wt.unicorns-$e.unicorns),!De.length)return;const Je=De[0],ft=De.filter($e=>$e.score===Je.score&&$e.unicorns===Je.unicorns);ft.length===1?(Te.set(Je.user_id,(Te.get(Je.user_id)??0)+3),Ke.set(Je.user_id,(Ke.get(Je.user_id)??0)+1),Ct.get(Je.user_id).push("W"),De.slice(1).forEach($e=>Ct.get($e.user_id).push("L"))):(ft.forEach($e=>{Te.set($e.user_id,(Te.get($e.user_id)??0)+1),Yt.set($e.user_id,(Yt.get($e.user_id)??0)+1),Ct.get($e.user_id).push("D")}),De.filter($e=>!ft.find(wt=>wt.user_id===$e.user_id)).forEach($e=>Ct.get($e.user_id).push("L")))});const hn=l.map(xe=>({user_id:xe.id,name:xe.name,mltPts:Te.get(xe.id)??0,ocp:Ie.get(xe.id)??0,unicorns:Fe.get(xe.id)??0,wins:Ke.get(xe.id)??0,draws:Yt.get(xe.id)??0,form:Ct.get(xe.id)??[]}));hn.sort((xe,De)=>De.mltPts-xe.mltPts||De.unicorns-xe.unicorns||De.ocp-xe.ocp||xe.name.localeCompare(De.name)),B&&(Or(hn),An(!1))})(),()=>{B=!1}},[l]);function ks(){const B=_e=>{const Re=_e.slice(-5),ke=5-Re.length;return c.jsxs("div",{className:"flex items-center gap-2",children:[Array.from({length:ke}).map((Ae,ot)=>c.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-200"},`dot-${ot}`)),Re.map((Ae,ot)=>c.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold ${Ae==="W"?"bg-green-100 text-green-700":Ae==="D"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:Ae==="W"?"W":Ae==="D"?"D":"L"},ot))]})},we=Rr.length?Rr:l.map(_e=>({user_id:_e.id,name:_e.name,mltPts:0,ocp:0,unicorns:0,wins:0,draws:0,form:[]}));return l.length===1?c.jsxs("div",{className:"text-center p-8 bg-white rounded-xl border border-slate-200 shadow-sm",children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Invite at least one more user to make the ML start"}),c.jsx("p",{className:"text-slate-600 mb-4",children:"Share your league code with friends to get the competition going!"}),c.jsx("button",{onClick:()=>ne(!0),className:"px-4 py-2 bg-emerald-600 text-white font-semibold rounded-lg hover:bg-emerald-700 transition-colors",children:"Share League Code"})]}):c.jsxs("div",{children:[c.jsxs("div",{className:"overflow-hidden rounded-xl border bg-white shadow-sm",children:[c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("div",{className:"min-w-full",children:[c.jsxs("div",{className:"grid grid-cols-[48px_80px_200px] gap-0 bg-slate-50 text-xs font-semibold text-slate-600",children:[c.jsx("div",{className:"px-2 py-3 text-left",children:"#"}),c.jsx("div",{className:"px-2 py-3 text-left",children:"PLAYER"}),y?c.jsx("div",{className:"px-2 py-3 text-left",children:"FORM"}):c.jsx("div",{className:"px-2 py-3",children:c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsx("span",{className:"text-center font-semibold w-8",children:"W"}),c.jsx("span",{className:"text-center font-semibold w-8",children:"D"}),c.jsx("span",{className:"text-center font-semibold w-10",children:"OCP"}),l.length>=3&&c.jsx("span",{className:"text-center font-semibold w-8",children:""}),c.jsx("span",{className:"text-center font-semibold w-10",children:"PTS"})]})})]}),we.map((_e,Re)=>c.jsxs("div",{className:"grid grid-cols-[48px_80px_200px] gap-0 border-t border-slate-200 text-sm",children:[c.jsx("div",{className:"px-2 py-3 font-semibold text-slate-600",children:Re+1}),c.jsx("div",{className:"px-2 py-3 font-bold text-slate-900 truncate",children:_e.name}),c.jsx("div",{className:"px-2 py-3",children:y?B(_e.form):c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsx("span",{className:"text-center font-semibold w-8",children:_e.wins}),c.jsx("span",{className:"text-center font-semibold w-8",children:_e.draws}),c.jsx("span",{className:"text-center font-semibold w-10",children:_e.ocp}),l.length>=3&&c.jsx("span",{className:"text-center font-semibold w-8",children:_e.unicorns}),c.jsx("span",{className:"text-center font-bold text-emerald-600 w-10",children:_e.mltPts})]})})]},_e.user_id))]})}),Ar&&c.jsx("div",{className:"p-3 text-slate-500 text-xs sm:text-sm",children:"Calculating"}),!Ar&&!Rr.length&&c.jsx("div",{className:"p-3 text-slate-500 text-xs sm:text-sm",children:"No gameweeks completed yet  this will populate after the first results are saved."})]}),c.jsx("div",{className:"mt-3 flex justify-end",children:c.jsxs("div",{className:"inline-flex rounded-lg bg-slate-100 p-1 shadow-sm",children:[c.jsx("button",{onClick:()=>w(!1),className:`px-4 py-2 text-sm font-semibold rounded-md transition-colors ${y?"text-slate-600 hover:text-slate-900 hover:bg-white/50":"bg-emerald-600 text-white shadow-sm"}`,children:"Points"}),c.jsx("button",{onClick:()=>w(!0),className:`px-4 py-2 text-sm font-semibold rounded-md transition-colors ${y?"bg-emerald-600 text-white shadow-sm":"text-slate-600 hover:text-slate-900 hover:bg-white/50"}`,children:"Form"})]})})]})}function Ss(){const B=C;if(!B)return c.jsx("div",{className:"mt-3 rounded-2xl border bg-white shadow-sm p-4 text-slate-600",children:"No current game week available."});const we=new Map;_s.forEach(Ne=>{if(Ne.gw!==B)return;const Te=Wl(Ne);Te&&we.set(Ne.fixture_index,Te)});const _e=_.useMemo(()=>{const Ne=Fe=>{if(!Fe)return"Fixtures";const Ke=new Date(Fe);return isNaN(Ke.getTime())?"Fixtures":Ke.toLocaleDateString(void 0,{weekday:"short",day:"numeric",month:"short"})},Te=new Map;He.filter(Fe=>Fe.gw===B).forEach(Fe=>{const Ke=Ne(Fe.kickoff_time),Yt=Fe.kickoff_time?new Date(Fe.kickoff_time).getTime():Number.MAX_SAFE_INTEGER;Te.has(Ke)||Te.set(Ke,{label:Ke,key:Yt,items:[]}),Te.get(Ke).items.push(Fe)});const Ie=Array.from(Te.values());return Ie.forEach(Fe=>Fe.items.sort((Ke,Yt)=>Ke.fixture_index-Yt.fixture_index)),Ie.sort((Fe,Ke)=>Fe.key-Ke.key),Ie},[He,B]),Re=new Map;nt.forEach(Ne=>{if(Ne.gw!==B)return;const Te=Re.get(Ne.fixture_index)??[];Te.push(Ne),Re.set(Ne.fixture_index,Te)});const ke=l.length>0&&l.every(Ne=>lr.get(`${Ne.id}:${B}`)),Ae=N!==null&&N>=B,ot=l.filter(Ne=>!lr.get(`${Ne.id}:${B}`)).length;return c.jsxs("div",{className:"mt-4",children:[c.jsxs("div",{className:"flex items-center gap-4 text-sm mb-4",children:[c.jsxs("div",{className:"text-slate-900 font-bold text-xl",children:["Game Week ",B]}),ke&&Ae?c.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-emerald-100 text-emerald-800 text-sm font-bold border border-emerald-300 shadow-sm",children:"Round Complete!"}):ke?c.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-blue-100 text-blue-800 text-sm font-bold border border-blue-300 shadow-sm",children:"All Submitted"}):c.jsx("span",{className:"text-slate-500",children:"not all submitted"})]}),!ke&&c.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:c.jsx("div",{className:"text-blue-800 font-medium text-sm",children:" Watch this space! You'll see everyone's picks once everybody has submitted"})}),ke?c.jsxs("div",{className:"mt-3 space-y-8",children:[_e.map((Ne,Te)=>c.jsxs("div",{children:[c.jsx("div",{className:"text-slate-600 font-bold mb-4 text-lg",children:Ne.label}),c.jsx("div",{className:"rounded-xl border bg-white shadow-sm overflow-hidden",children:c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{className:"bg-slate-50",children:c.jsxs("tr",{className:"text-xs font-semibold text-slate-600",children:[c.jsx("th",{className:"text-center px-4 py-4 w-[32%]",children:"Fixture"}),c.jsx("th",{className:"text-center px-3 py-4 w-[22%] border-l border-slate-200",children:"Home"}),c.jsx("th",{className:"text-center px-3 py-4 w-[23%] border-l border-slate-200",children:"Draw"}),c.jsx("th",{className:"text-center px-3 py-4 w-[23%] border-l border-slate-200",children:"Away"})]})}),c.jsxs("tbody",{children:[Ne.items.map(Ie=>{try{const Fe=Ie.home_name||Ie.home_team||"Home",Ke=Ie.away_name||Ie.away_team||"Away",Ct=(Je=>{if(!Je)return"";const ft=new Date(Je);return isNaN(ft.getTime())?"":ft.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})(Ie.kickoff_time),hn=Ie.fixture_index,xe=Re.get(hn)??[],De=Je=>xe.filter(ft=>ft.pick===Je).map(ft=>{const $e=l.find(ur=>ur.id===ft.user_id),wt=xy($e?.name??"?"),Ln=we.get(hn),bt=Ln===Je;return c.jsx(_y,{letter:wt,correct:Ln?bt:null,unicorn:!1},ft.user_id)});return c.jsxs("tr",{className:"border-b border-slate-200",children:[c.jsx("td",{className:"px-4 py-3 text-slate-900 font-bold border-r border-slate-200",children:c.jsxs("div",{children:[c.jsxs("div",{children:[Fe," v ",Ke]}),Ct&&c.jsx("div",{className:"text-xs text-slate-500 mt-1",children:Ct})]})}),c.jsx("td",{className:"px-4 py-3 bg-emerald-50/30 border-r border-slate-200",children:c.jsx("div",{className:"flex flex-wrap gap-1 justify-center",children:De("H")})}),c.jsx("td",{className:"px-4 py-3 bg-slate-50/50 border-r border-slate-200",children:c.jsx("div",{className:"flex flex-wrap gap-1 justify-center",children:De("D")})}),c.jsx("td",{className:"px-4 py-3 bg-blue-50/30",children:c.jsx("div",{className:"flex flex-wrap gap-1 justify-center",children:De("A")})})]},`${Ie.gw}-${Ie.fixture_index}`)}catch(Fe){return console.error("Error rendering fixture:",Fe,Ie),c.jsx("tr",{children:c.jsxs("td",{className:"px-4 py-3 text-red-500",colSpan:4,children:["Error loading fixture: ",Ie.fixture_index]})},`${Ie.gw}-${Ie.fixture_index}`)}}),!Ne.items.length&&c.jsx("tr",{children:c.jsx("td",{className:"px-3 py-4 text-slate-500",colSpan:4,children:"No fixtures."})})]})]})})]},Te)),!_e.length&&c.jsxs("div",{className:"rounded-2xl border bg-white shadow-sm p-4 text-slate-500",children:["No fixtures for GW ",B,"."]})]}):c.jsxs("div",{className:"mt-3 rounded-2xl border bg-white shadow-sm p-4 text-slate-700",children:[c.jsxs("div",{className:"mb-3",children:["Waiting for ",c.jsx("span",{className:"font-semibold",children:ot})," of ",l.length," to submit."]}),c.jsx("div",{className:"overflow-hidden rounded-lg border",children:c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{className:"bg-slate-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"text-left px-4 py-3 w-2/3 font-semibold text-slate-600",children:"Player"}),c.jsx("th",{className:"text-left px-4 py-3 font-semibold text-slate-600",children:"Status"})]})}),c.jsx("tbody",{children:l.slice().sort((Ne,Te)=>Ne.name.localeCompare(Te.name)).map(Ne=>{const Te=!!lr.get(`${Ne.id}:${B}`);return c.jsxs("tr",{className:"border-t border-slate-200",children:[c.jsx("td",{className:"px-4 py-3 font-bold text-slate-900",children:Ne.name}),c.jsx("td",{className:"px-4 py-3",children:Te?c.jsx("span",{className:"inline-flex items-center justify-center rounded-full bg-emerald-100 text-emerald-800 text-xs px-2 py-1 border border-emerald-300 font-bold shadow-sm whitespace-nowrap w-24",children:" Submitted"}):c.jsx("span",{className:"inline-flex items-center justify-center rounded-full bg-amber-50 text-amber-700 text-xs px-2 py-1 border border-amber-200 font-semibold whitespace-nowrap w-24",children:" Not yet"})})]},Ne.id)})})]})})]})]})}function js(){const B=F;if(!B)return c.jsx("div",{className:"mt-3 rounded-2xl border bg-white shadow-sm p-4 text-slate-600",children:"No game week selected."});const we=new Map;_s.forEach(ke=>{if(ke.gw!==B)return;const Ae=Wl(ke);Ae&&we.set(ke.fixture_index,Ae)});const _e=l.map(ke=>({user_id:ke.id,name:ke.name,score:0,unicorns:0})),Re=new Map;return nt.forEach(ke=>{if(ke.gw!==B)return;const Ae=Re.get(ke.fixture_index)??[];Ae.push(ke),Re.set(ke.fixture_index,Ae)}),Array.from(we.entries()).forEach(([ke,Ae])=>{const Ne=(Re.get(ke)??[]).filter(Te=>Te.pick===Ae).map(Te=>Te.user_id);if(Ne.forEach(Te=>{const Ie=_e.find(Fe=>Fe.user_id===Te);Ie.score+=1}),Ne.length===1&&l.length>=3){const Te=_e.find(Ie=>Ie.user_id===Ne[0]);Te.unicorns+=1}}),_e.sort((ke,Ae)=>Ae.score-ke.score||Ae.unicorns-ke.unicorns||ke.name.localeCompare(Ae.name)),c.jsxs("div",{className:"mt-4",children:[c.jsxs("div",{className:"text-slate-900 font-bold text-xl mb-4",children:["Game Week ",B]}),_e.length>0&&c.jsx("div",{className:"mb-4 p-4 rounded-xl bg-gradient-to-br from-yellow-400 via-orange-500 via-pink-500 to-purple-600 shadow-2xl shadow-slate-600/50 relative overflow-hidden before:absolute before:inset-0 before:bg-gradient-to-r before:from-transparent before:via-white/40 before:to-transparent before:animate-[shimmer_2s_ease-in-out_infinite] after:absolute after:inset-0 after:bg-gradient-to-r after:from-transparent after:via-yellow-200/30 after:to-transparent after:animate-[shimmer_2.5s_ease-in-out_infinite_0.6s]",children:c.jsx("div",{className:"text-center relative z-10",children:_e[0].score===_e[1]?.score&&_e[0].unicorns===_e[1]?.unicorns?c.jsx("div",{className:"text-lg font-bold text-white",children:" It's a Draw!"}):c.jsxs("div",{className:"text-lg font-bold text-white",children:[" ",_e[0].name," Wins!"]})})}),c.jsx("div",{className:"overflow-hidden rounded-2xl border bg-white shadow-sm",children:c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{className:"bg-slate-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"text-left px-4 py-3 font-semibold text-slate-600",children:"Player"}),c.jsx("th",{className:"text-center px-4 py-3 font-semibold text-slate-600",children:"Score"}),l.length>=3&&c.jsx("th",{className:"text-center px-4 py-3 font-semibold text-slate-600",children:""})]})}),c.jsxs("tbody",{children:[_e.map(ke=>c.jsxs("tr",{className:"border-t border-slate-200",children:[c.jsx("td",{className:"px-4 py-3 font-bold text-slate-900",children:ke.name}),c.jsx("td",{className:"px-4 py-3 text-center font-semibold text-emerald-600",children:ke.score}),l.length>=3&&c.jsx("td",{className:"px-4 py-3 text-center font-semibold",children:ke.unicorns})]},ke.user_id)),!_e.length&&c.jsx("tr",{children:c.jsxs("td",{className:"px-4 py-6 text-slate-500 text-center",colSpan:l.length>=3?3:2,children:["No results recorded for GW ",B," yet."]})})]})]})})]})}return h?c.jsx("div",{className:"max-w-5xl mx-auto px-4 py-10",children:c.jsx("div",{className:"text-slate-500",children:"Loading"})}):s?c.jsxs("div",{className:"min-h-screen bg-slate-50",children:[c.jsxs("div",{className:"max-w-6xl mx-auto px-4 pt-6 pb-16",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx(it,{to:"/leagues",className:"inline-flex items-center text-slate-500 hover:text-slate-700 text-sm mb-3",children:" Back to Mini Leagues"}),c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-4xl sm:text-5xl font-extrabold tracking-tight text-slate-900 mt-0 mb-2",children:s.name}),c.jsxs("div",{className:"mt-0 mb-6 text-base text-slate-500",children:["Code: ",c.jsx("span",{className:"font-mono font-semibold",children:s.code}),"  ",l.length,"/",Do," member",l.length===1?"":"s"]}),xn&&c.jsxs("div",{className:"mb-4 text-sm text-slate-600 flex justify-center items-center",children:["Admin: ",c.jsx("span",{className:"font-semibold text-slate-800",children:_i}),c.jsx("button",{onClick:()=>le(!ge),className:"ml-2 px-2 py-1 text-xs bg-slate-100 hover:bg-slate-200 rounded-md transition-colors",children:" Manage"})]}),xn&&ge&&c.jsxs("div",{className:"mb-4 bg-white border border-slate-200 rounded-lg shadow-lg p-4 w-full max-w-4xl mx-auto",children:[c.jsx("h3",{className:"font-semibold text-slate-900 mb-3",children:"League Management"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"text-sm text-slate-600 mb-3",children:"Remove Members:"}),l.filter(B=>B.id!==n?.id).map(B=>c.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-slate-50 rounded-md",children:[c.jsx("span",{className:"text-sm font-medium text-slate-800",children:B.name}),c.jsx("button",{onClick:()=>{ee(B),z(!0),le(!1)},className:"px-2 py-1 text-xs bg-red-100 text-red-700 hover:bg-red-200 rounded transition-colors",children:"Remove"})]},B.id)),l.filter(B=>B.id!==n?.id).length===0&&c.jsx("div",{className:"text-sm text-slate-500 italic py-2",children:"No other members to remove"})]}),c.jsx("div",{className:"mt-4 pt-3 border-t border-slate-200",children:c.jsx("button",{onClick:()=>{b(!0),le(!1)},className:"w-full px-3 py-2 text-sm bg-red-600 text-white hover:bg-red-700 rounded-md transition-colors",children:" End League"})})]}),c.jsxs("div",{className:"flex items-center justify-center gap-2",children:[c.jsx("button",{onClick:()=>ne(!0),className:"px-3 py-1.5 text-slate-600 hover:text-slate-800 hover:bg-slate-100 rounded-md transition-colors text-sm font-medium",title:"Invite players",children:" Invite"}),c.jsxs("button",{onClick:Si,className:"px-3 py-1.5 text-slate-600 hover:text-slate-800 hover:bg-slate-100 rounded-md transition-colors text-sm font-medium",title:"Share league code",children:[c.jsx("svg",{className:"w-4 h-4 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684z"})}),"Share"]}),c.jsxs("button",{onClick:()=>j(!0),className:"px-3 py-1.5 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-md transition-colors text-sm font-medium",title:"Leave league",children:[c.jsx("svg",{className:"w-4 h-4 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Leave"]})]})]})]}),c.jsx("div",{className:"mt-6",children:c.jsxs("div",{className:"inline-flex rounded-lg bg-slate-100 p-1 shadow-sm",children:[c.jsx("button",{onClick:()=>g("chat"),className:"px-6 py-3 rounded-md text-sm font-semibold transition-colors "+(p==="chat"?"bg-emerald-600 text-white shadow-sm":"text-slate-600 hover:text-slate-900 hover:bg-white/50"),children:"Chat"}),c.jsx("button",{onClick:()=>g("gwr"),className:"px-6 py-3 rounded-md text-sm font-semibold transition-colors "+(p==="gwr"?"bg-emerald-600 text-white shadow-sm":"text-slate-600 hover:text-slate-900 hover:bg-white/50"),children:F?`GW ${F} Results`:"GW Results"}),c.jsx("button",{onClick:()=>g("gw"),className:"px-6 py-3 rounded-md text-sm font-semibold transition-colors "+(p==="gw"?"bg-emerald-600 text-white shadow-sm":"text-slate-600 hover:text-slate-900 hover:bg-white/50"),children:C?`GW ${C} Picks`:"GW Picks"}),c.jsx("button",{onClick:()=>g("mlt"),className:"px-6 py-3 rounded-md text-sm font-semibold transition-colors "+(p==="mlt"?"bg-emerald-600 text-white shadow-sm":"text-slate-600 hover:text-slate-900 hover:bg-white/50"),children:"Table"})]})}),c.jsxs("div",{className:"mt-6",children:[p==="chat"&&c.jsx(wy,{chat:Ve,userId:n?.id,nameById:We,isMember:Me,newMsg:Ht,setNewMsg:Se,onSend:bs}),p==="mlt"&&c.jsx(ks,{}),p==="gw"&&c.jsx(Ss,{}),p==="gwr"&&c.jsx(js,{})]}),p==="gwr"&&U.length>0&&c.jsx("div",{className:"mt-6 flex items-center justify-center",children:c.jsxs("div",{className:"flex items-center gap-3 bg-white rounded-lg border border-slate-200 px-4 py-2 shadow-sm",children:[c.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Game Week:"}),c.jsxs("div",{className:"relative gw-dropdown-container",children:[c.jsxs("button",{onClick:B=>{B.stopPropagation(),X(!oe)},className:"text-sm font-semibold text-slate-900 bg-transparent border-none outline-none cursor-pointer py-1 px-2 min-w-[100px] text-left flex items-center justify-between",children:[F?`GW ${F}`:"Select GW",c.jsx("svg",{className:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),oe&&c.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-slate-200 rounded-lg shadow-lg z-50 min-w-[140px]",children:U.map(B=>c.jsxs("button",{onClick:we=>{we.stopPropagation(),Z(B),X(!1)},className:`w-full text-left px-4 py-3 text-base font-medium hover:bg-slate-50 transition-colors ${F===B?"bg-blue-50 text-blue-700":"text-slate-900"}`,children:["GW ",B]},B))})]})]})})]}),Ee&&c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Invite players"}),c.jsxs("p",{className:"text-slate-600 text-sm",children:["Share this code (up to ",Do," members):"]}),c.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[c.jsx("code",{className:"font-mono text-lg font-bold",children:s.code}),c.jsx("button",{onClick:()=>{navigator.clipboard.writeText(s.code)},className:"px-3 py-1.5 border rounded-md text-sm hover:bg-slate-50",children:"Copy"}),c.jsx("button",{onClick:Si,className:"px-3 py-1.5 border rounded-md text-sm hover:bg-slate-50",children:"Share"})]}),c.jsxs("div",{className:"mt-3 text-xs text-slate-500",children:[l.length,"/",Do," members"]}),c.jsx("div",{className:"mt-6 flex justify-end",children:c.jsx("button",{onClick:()=>ne(!1),className:"px-4 py-2 border border-slate-300 rounded-md hover:bg-slate-50",children:"Close"})})]})}),k&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Leave League"}),c.jsxs("p",{className:"text-slate-600 mb-6",children:['Are you sure you want to leave "',s?.name,`"? You'll need the league code to rejoin later.`]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>j(!1),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-md hover:bg-slate-50 transition-colors",disabled:A,children:"Cancel"}),c.jsx("button",{onClick:xi,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors disabled:opacity-50",disabled:A,children:A?"Leaving...":"Leave League"})]})]})}),de&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Join Mini League"}),c.jsxs("p",{className:"text-slate-600 mb-6",children:["You are about to join ",c.jsxs("strong",{children:['"',s?.name,'"']}),". Are you sure?"]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>$(!1),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-md hover:bg-slate-50 transition-colors",disabled:Q,children:"Cancel"}),c.jsx("button",{onClick:ar,className:"flex-1 px-4 py-2 bg-emerald-600 text-white rounded-md hover:bg-emerald-700 transition-colors disabled:opacity-50",disabled:Q,children:Q?"Joining...":"Join League"})]})]})}),M&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Remove Member"}),c.jsxs("p",{className:"text-slate-600 mb-6",children:["Are you sure you want to remove ",c.jsxs("strong",{children:['"',L?.name,'"']})," from the league? They will need the league code to rejoin."]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>z(!1),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-md hover:bg-slate-50 transition-colors",disabled:K,children:"Cancel"}),c.jsx("button",{onClick:bi,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors disabled:opacity-50",disabled:K,children:K?"Removing...":"Remove Member"})]})]})}),q&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-red-600 mb-2",children:" End League"}),c.jsxs("p",{className:"text-slate-600 mb-4",children:["Are you absolutely sure you want to ",c.jsx("strong",{children:"permanently end"})," the league ",c.jsxs("strong",{children:['"',s?.name,'"']}),"?"]}),c.jsx("p",{className:"text-sm text-red-600 mb-6",children:"This will remove all members and delete the league forever. This action cannot be undone!"}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>b(!1),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-md hover:bg-slate-50 transition-colors",disabled:ce,children:"Cancel"}),c.jsx("button",{onClick:ki,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors disabled:opacity-50",disabled:ce,children:ce?"Ending...":"Yes, End League"})]})]})})]}):c.jsx("div",{className:"max-w-3xl mx-auto px-4 py-10",children:c.jsxs("div",{className:"rounded border bg-white p-6",children:[c.jsx("div",{className:"font-semibold mb-2",children:"League not found"}),c.jsx(it,{to:"/leagues",className:"text-slate-600 underline",children:"Back to Mini Leagues"})]})})}function kf(i){return String(i||"").toLowerCase().replace(/&/g,"and").replace(/[^a-z0-9]+/g," ").replace(/\s+/g," ").trim()}const mi={arsenal:{medium:"Arsenal",slug:"arsenal",aliases:["arsenal","ars","the arsenal"]},"aston-villa":{medium:"Villa",slug:"aston-villa",aliases:["aston villa","villa","avl"]},bournemouth:{medium:"Bournemouth",slug:"bournemouth",aliases:["bournemouth","afc bournemouth","bou"]},brentford:{medium:"Brentford",slug:"brentford",aliases:["brentford","bre"]},brighton:{medium:"Brighton",slug:"brighton",aliases:["brighton","brighton and hove albion","brighton & hove albion","bha"]},chelsea:{medium:"Chelsea",slug:"chelsea",aliases:["chelsea","che"]},"crystal-palace":{medium:"Palace",slug:"crystal-palace",aliases:["crystal palace","palace","cry"]},everton:{medium:"Everton",slug:"everton",aliases:["everton","eve"]},fulham:{medium:"Fulham",slug:"fulham",aliases:["fulham","ful"]},ipswich:{medium:"Ipswich",slug:"ipswich",aliases:["ipswich","ipswich town","ips"]},leeds:{medium:"Leeds",slug:"leeds",aliases:["leeds","leeds united","lee"]},leicester:{medium:"Leicester",slug:"leicester",aliases:["leicester","leicester city","lei"]},liverpool:{medium:"Liverpool",slug:"liverpool",aliases:["liverpool","liv"]},"man-city":{medium:"Man City",slug:"man-city",aliases:["manchester city","man city","mci","city"]},"man-united":{medium:"Man United",slug:"man-united",aliases:["manchester united","man united","man utd","mun","united"]},newcastle:{medium:"Newcastle",slug:"newcastle",aliases:["newcastle","newcastle united","new"]},"nottingham-forest":{medium:"Forest",slug:"nottingham-forest",aliases:["nottingham forest","forest","nfo","not"]},southampton:{medium:"Southampton",slug:"southampton",aliases:["southampton","sou"]},spurs:{medium:"Spurs",slug:"spurs",aliases:["tottenham","tottenham hotspur","spurs","tot"]},"west-ham":{medium:"West Ham",slug:"west-ham",aliases:["west ham","west ham united","whu"]},wolves:{medium:"Wolves",slug:"wolves",aliases:["wolves","wolverhampton wanderers","wolverhampton","wol"]},sunderland:{medium:"Sunderland",slug:"sunderland",aliases:["sunderland","sun"]},burnley:{medium:"Burnley",slug:"burnley",aliases:["burnley","bur"]}},ky=(()=>{const i={};return Object.keys(mi).forEach(n=>{mi[n].aliases.forEach(s=>{i[kf(s)]=n})}),i})();function Sy(i){const n=kf(i);return n?ky[n]??null:null}function pi(i){const n=Sy(i);return n?mi[n].medium:i}Object.keys(mi).map(i=>mi[i].slug);function Dh(i,n){const s=i?.[`${n}_name`],o=i?.[`${n}_team`],u=i?.[`${n}_code`]||s||o||"";return pi(u)||(n==="home"?"Home":"Away")}function ou(...i){return i.filter(Boolean).join(" ")}function jy(i){return i?i.result==="H"||i.result==="D"||i.result==="A"?i.result:typeof i.home_goals=="number"&&typeof i.away_goals=="number"?i.home_goals>i.away_goals?"H":i.home_goals<i.away_goals?"A":"D":null:null}function Hl({label:i,active:n,disabled:s,onClick:o}){return c.jsx("button",{type:"button",disabled:s,onClick:o,className:ou("h-16 rounded-xl border text-sm font-medium transition-colors","flex items-center justify-center",n?"bg-emerald-600 text-white border-emerald-600":"bg-slate-50 text-slate-600 border-slate-200 hover:bg-slate-100",s&&"opacity-60 cursor-not-allowed"),children:i})}function ql({label:i,correct:n,isCorrectResult:s}){const o="h-16 rounded-xl border text-sm font-medium transition-colors flex items-center justify-center select-none",l=n===!0?"bg-gradient-to-br from-yellow-400 via-orange-500 via-pink-500 to-purple-600 text-white !border-0 !border-none shadow-2xl shadow-yellow-400/40 transform scale-110 rotate-1 relative overflow-hidden before:absolute before:inset-0 before:bg-gradient-to-r before:from-transparent before:via-white/70 before:to-transparent before:animate-[shimmer_1.2s_ease-in-out_infinite] after:absolute after:inset-0 after:bg-gradient-to-r after:from-transparent after:via-yellow-200/50 after:to-transparent after:animate-[shimmer_1.8s_ease-in-out_infinite_0.4s]":s?"bg-emerald-600 text-white border-emerald-600":n===!1?"bg-rose-100 text-rose-700 border-rose-200":"bg-slate-50 text-slate-600 border-slate-200";return c.jsx("div",{className:[o,l].join(" "),children:c.jsx("span",{className:n===!0?"font-bold":"",children:i})})}function Ey(){const{user:i}=ir(),[n,s]=_.useState(null),[o,l]=_.useState([]),[u,h]=_.useState({}),[m,p]=_.useState([]),[g,y]=_.useState(!1),[w,k]=_.useState(!1),[j,A]=_.useState(!1),[P,C]=_.useState(!0),[D,N]=_.useState(""),[I,F]=_.useState(!1);_.useEffect(()=>{g&&window.scrollTo({top:0,behavior:"smooth"})},[g]),_.useEffect(()=>{let ne=!0;(async()=>{const $=await Uh();ne&&s($)})();const de=async()=>{const $=await Uh();s($)};return window.addEventListener("focus",de),()=>{ne=!1,window.removeEventListener("focus",de)}},[i?.id]),_.useEffect(()=>{let ne=!0;return(async()=>{if(C(!0),N(""),n==null){l([]),h({}),y(!1),C(!1);return}const{data:de,error:$}=await J.from("fixtures").select("gw, fixture_index, home_name, away_name, home_team, away_team, home_code, away_code, kickoff_time").eq("gw",n).order("fixture_index",{ascending:!0});if($){ne&&(N($.message),l([]),h({}),y(!1),C(!1));return}const Q=de??[];if(!ne)return;l(Q);const{data:se,error:M}=await J.from("picks").select("gw, fixture_index, pick").eq("gw",n).eq("user_id",i?.id);M&&ne&&N(M.message);const z={};if(Q.forEach(K=>z[K.fixture_index]=null),se?.forEach(K=>{z[K.fixture_index]=K.pick}),!ne)return;h(z);const{data:q,error:b}=await J.from("gw_submissions").select("gw, submitted_at").eq("gw",n).eq("user_id",i?.id).maybeSingle();if(b&&ne&&N(b.message),!ne)return;y(!!q?.submitted_at);const{data:L,error:ee}=await J.from("gw_results").select("gw, fixture_index, result").eq("gw",n);ee&&ne&&N(ee.message),ne&&p(L??[]),C(!1)})(),()=>{ne=!1}},[n,i?.id]);const Z=_.useMemo(()=>{const ne=new Map;return o.forEach($=>{const Q=$.kickoff_time?new Date($.kickoff_time):null,se=Q?Q.toISOString().slice(0,10):"unknown",M=Q?Ny(Q):"TBC";ne.has(se)||ne.set(se,{label:M,items:[]}),ne.get(se).items.push($)}),[...ne.entries()].sort(($,Q)=>{const se=$[1].items[0]?.fixture_index??0,M=Q[1].items[0]?.fixture_index??0;return se-M}).map(([,$])=>$)},[o]);function U(ne,de){g||h($=>({...$,[ne]:de}))}async function Y(){if(!(g||!i?.id)){k(!0),N("");try{const ne=Object.entries(u).filter(([,de])=>de).map(([de,$])=>({user_id:i.id,gw:n,fixture_index:Number(de),pick:$}));if(ne.length){const{error:de}=await J.from("picks").upsert(ne,{onConflict:"user_id,gw,fixture_index"});if(de)throw de}A(!0),window.setTimeout(()=>A(!1),2500)}catch(ne){N(ne?.message??"Failed to save picks.")}finally{k(!1)}}}async function oe(){g||F(!0)}async function X(){if(g)return;await Y();const ne=o.length,de=Object.values(u).filter(Boolean).length;if(de!==ne){N(`Please make predictions for all ${ne} fixtures before submitting. You have ${de}/${ne} completed.`);return}const{error:$}=await J.from("gw_submissions").upsert([{user_id:i?.id,gw:n,submitted_at:new Date().toISOString()}],{onConflict:"user_id,gw"});$?N($.message):(y(!0),window.dispatchEvent(new CustomEvent("predictionsSubmitted"))),F(!1)}const ge=new Map;m.forEach(ne=>{const de=jy(ne);de&&ge.set(ne.fixture_index,de)});const le=o.length>0&&ge.size>0&&ge.size===o.length,Ee=Object.entries(u).reduce((ne,[de,$])=>{const Q=Number(de),se=ge.get(Q);return!se||!$?ne:ne+($===se?1:0)},0);return P?c.jsx("div",{className:"max-w-2xl mx-auto px-4 py-8",children:c.jsx("div",{className:"text-slate-500",children:"Loading"})}):c.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-8",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-4xl sm:text-5xl font-extrabold tracking-tight text-slate-900 mt-0 mb-2",children:"Predictions Center"}),c.jsxs("div",{className:"mt-0 mb-6 text-base text-slate-500",children:["Call every game, lock in your results,",c.jsx("br",{}),"and climb the table."]}),c.jsxs("div",{className:"text-slate-600 text-lg font-semibold mt-1",children:["Game Week ",Gl(n)]})]}),c.jsx("div",{className:"mt-3",children:le?c.jsx("div",{className:"rounded-xl border bg-gradient-to-r from-emerald-50 to-blue-50 border-emerald-200 px-6 py-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"text-emerald-900 font-semibold text-lg",children:["GW ",Gl(n)," Complete"]}),c.jsx("div",{className:"text-emerald-900 text-sm font-bold mt-1",children:"Your Score"})]}),c.jsx("div",{className:"text-emerald-900 text-5xl font-extrabold",children:Ee})]})}):null}),D&&c.jsx("div",{className:"mt-4 rounded border border-rose-200 bg-rose-50 text-rose-700 px-3 py-2 text-sm",children:D}),Z.length===0?c.jsxs("div",{className:"mt-6 rounded border bg-white p-4 text-slate-600",children:["No fixtures found for GW ",Gl(n),". Add fixtures on the Admin page, then come back."]}):c.jsxs("div",{className:"mt-6 space-y-6",children:[!le&&g&&c.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 via-green-500 to-emerald-600 rounded-2xl p-6 text-center shadow-2xl shadow-emerald-500/30 transform scale-105 relative overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-[shimmer_2s_ease-in-out_infinite]"}),c.jsxs("div",{className:"relative z-10",children:[c.jsx("div",{className:"text-white font-bold text-2xl mb-1",children:"Predictions Submitted!"}),c.jsxs("div",{className:"text-emerald-100 text-lg",children:["Your picks are locked in for GW ",n]}),c.jsx("div",{className:"text-emerald-200 text-sm mt-2",children:"Good luck!"})]})]}),Z.map((ne,de)=>c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-semibold text-slate-700 mb-3",children:ne.label}),c.jsx("div",{className:"space-y-4",children:ne.items.map($=>{const Q=Dh($,"home"),se=Dh($,"away"),M=$.kickoff_time?Cy(new Date($.kickoff_time)):"",z=u[$.fixture_index]??null,q=ge.get($.fixture_index)??null;return c.jsxs("div",{className:"rounded-2xl border bg-white p-3 shadow-sm",children:[c.jsxs("div",{className:"flex items-center px-2 pt-1 pb-3",children:[c.jsxs("div",{className:"flex items-center gap-1 flex-1 justify-end",children:[c.jsx("div",{className:"truncate font-medium",children:Q}),c.jsx("img",{src:`/assets/badges/${$.home_code?.toUpperCase()||"UNK"}.png`,alt:Q,className:"w-5 h-5",onError:b=>{b.currentTarget.style.display="none"}})]}),c.jsx("div",{className:"text-slate-500 text-sm px-4",children:M}),c.jsxs("div",{className:"flex items-center gap-1 flex-1 justify-start",children:[c.jsx("img",{src:`/assets/badges/${$.away_code?.toUpperCase()||"UNK"}.png`,alt:se,className:"w-5 h-5",onError:b=>{b.currentTarget.style.display="none"}}),c.jsx("div",{className:"truncate font-medium",children:se})]})]}),(Q==="Home"||se==="Away")&&c.jsxs("div",{className:"px-2 pb-2 text-[11px] text-slate-400",children:[Q==="Home"?"[no home name/code]":""," ",se==="Away"?"[no away name/code]":""]}),le?c.jsx("div",{className:"grid grid-cols-3 gap-3",children:(()=>{const b=u[$.fixture_index]??null,L=ee=>b!==ee||!q?null:q===ee;return c.jsxs(c.Fragment,{children:[c.jsx(ql,{label:"Home Win",correct:L("H"),isCorrectResult:q==="H"}),c.jsx(ql,{label:"Draw",correct:L("D"),isCorrectResult:q==="D"}),c.jsx(ql,{label:"Away Win",correct:L("A"),isCorrectResult:q==="A"})]})})()}):c.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[c.jsx(Hl,{label:"Home Win",active:z==="H",onClick:()=>U($.fixture_index,"H"),disabled:g}),c.jsx(Hl,{label:"Draw",active:z==="D",onClick:()=>U($.fixture_index,"D"),disabled:g}),c.jsx(Hl,{label:"Away Win",active:z==="A",onClick:()=>U($.fixture_index,"A"),disabled:g})]})]},$.fixture_index)})})]},de))]}),!le&&!g&&o.length>0&&c.jsxs("div",{className:"mt-6",children:[j&&c.jsx("div",{className:"mb-3 text-center",children:c.jsx("span",{"aria-live":"polite",className:"text-sm rounded border border-emerald-200 bg-emerald-50 text-emerald-900 px-3 py-2 inline-block",children:"Saved  don't forget to submit before the deadline."})}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:Y,disabled:w,className:ou("flex-1 px-4 py-3 rounded-md bg-blue-600 text-white font-semibold hover:bg-blue-700 transition-colors",w&&"opacity-50 cursor-not-allowed"),children:w?"Saving":j?"Saved":"Save GW"}),c.jsx("button",{onClick:oe,disabled:Object.values(u).filter(Boolean).length!==o.length,className:ou("flex-1 px-4 py-3 rounded-md text-white font-semibold transition-colors",Object.values(u).filter(Boolean).length===o.length?"bg-emerald-600 hover:bg-emerald-700":"bg-gray-400 cursor-not-allowed"),title:Object.values(u).filter(Boolean).length===o.length?"Submitting locks your picks for this GW.":`Complete all ${o.length} predictions before submitting`,children:"Submit GW"})]}),c.jsx("div",{className:"mt-2 text-center",children:c.jsx("span",{className:"text-xs text-slate-500",children:"Submitting locks your picks for this GW."})})]}),I&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Confirm Submission"}),c.jsx("p",{className:"text-slate-600 mb-6",children:"Are you sure you want to submit your predictions? Once submitted, they'll be locked for this Gameweek."}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>F(!1),className:"flex-1 px-4 py-2 rounded-md border border-slate-300 text-slate-700 hover:bg-slate-50 transition-colors",children:"Cancel"}),c.jsx("button",{onClick:X,className:"flex-1 px-4 py-2 rounded-md bg-emerald-600 text-white font-semibold hover:bg-emerald-700 transition-colors",children:"Submit GW"})]})]})})]})}async function Uh(){const{data:i}=await J.from("meta").select("current_gw").eq("id",1).single();return i?.current_gw??null}function Gl(i,n=1){return typeof i=="number"&&i>0?i:n}function Ny(i){return i.toLocaleDateString(void 0,{weekday:"short",day:"numeric",month:"short"})}function Cy(i){return i.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})}function Mh(i){return i?i.toUpperCase():"???"}function Py(i){if(!i)return null;let n=i.match(/^[A-Za-z]{3}\s+(\d{1,2}):(\d{2})\s+[A-Za-z]{3}\s+(\d{1,2})(?:st|nd|rd|th)?\s+([A-Za-z]{3})/);if(n){const[,s,o,l,u]=n,m={Jan:"01",Feb:"02",Mar:"03",Apr:"04",May:"05",Jun:"06",Jul:"07",Aug:"08",Sep:"09",Oct:"10",Nov:"11",Dec:"12"}[u];if(!m)return null;const p=new Date().getFullYear(),g=l.padStart(2,"0");return`${p}-${m}-${g}T${s}:${o}:00`}if(n=i.match(/^[A-Za-z]{3}\s+(\d{1,2})\s+([A-Za-z]{3})/),n){const[,s,o]=n,u={Jan:"01",Feb:"02",Mar:"03",Apr:"04",May:"05",Jun:"06",Jul:"07",Aug:"08",Sep:"09",Oct:"10",Nov:"11",Dec:"12"}[o];if(!u)return null;const h=new Date().getFullYear(),m=s.padStart(2,"0");return`${h}-${u}-${m}T15:00:00`}return null}function Ty(i){if(!i)return"";const n=new Date(i);if(isNaN(n.valueOf()))return"";const s=n.toLocaleDateString(void 0,{weekday:"short"}),o=n.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",hour12:!1});return`${s} ${o}`}function Ry(){const[i,n]=_.useState(1),[s,o]=_.useState(""),[l,u]=_.useState([]),[h,m]=_.useState({}),[p,g]=_.useState(!1),[y,w]=_.useState(""),[k,j]=_.useState(""),[A,P]=_.useState(!1),[C,D]=_.useState(null),[N,I]=_.useState(!1),[F,Z]=_.useState("fixtures"),U=l.length>0;_.useEffect(()=>{let $=!0;return(async()=>{try{const{data:Q,error:se}=await J.from("meta").select("current_gw").eq("id",1).single();if(se)return;const M=Q?.current_gw;$&&Number.isFinite(M)&&(D(M??null),M&&n(M))}catch{}})(),()=>{$=!1}},[]),_.useEffect(()=>{let $=!0;return(async()=>{w(""),j("");const{data:Q,error:se}=await J.from("fixtures").select("*").eq("gw",i).order("fixture_index",{ascending:!0});if(se){$&&w(se.message);return}if(!$)return;u(Q??[]),I(!1);const{data:M,error:z}=await J.from("gw_results").select("fixture_index, result").eq("gw",i);z&&console.warn("[Admin] load gw_results error:",z);const q={};(M??[]).forEach(b=>{q[Number(b.fixture_index)]=b.result??null}),I((M??[]).length>0),$&&m(q)})(),()=>{$=!1}},[i]);const Y=_.useMemo(()=>l.reduce(($,Q)=>$+(h[Q.fixture_index]?1:0),0),[l,h]),oe=l.length>0&&Y===l.length,X=Math.max(0,l.length-Y);async function ge(){g(!0),w(""),j("");try{const Q=s.split(`
`).map(z=>z.trim()).filter(Boolean).map((z,q)=>{const[b,...L]=z.split(/\s{2,}|\t/),ee=b.split(/\s+/),K=(ee[0]??"").toUpperCase(),he=(ee[2]??"").toUpperCase(),ce=L.join(" ").trim(),ve=Py(ce);return{gw:i,fixture_index:q,home_team:K,away_team:he,home_code:K,away_code:he,kickoff_time:ve}}),{error:se}=await J.from("fixtures").upsert(Q,{onConflict:"gw,fixture_index"});if(se)throw se;o("");const{data:M}=await J.from("fixtures").select("*").eq("gw",i).order("fixture_index");u(M??[]),M&&u(M),j("Fixtures saved!")}catch($){w($.message??"Failed to save fixtures.")}finally{g(!1)}}async function le(){if(!A){P(!0);return}g(!0),w(""),j("");try{const{error:$}=await J.from("meta").update({current_gw:i}).eq("id",1);if($)throw $;j(`Gameweek ${i} activated successfully!`),D(i),window.dispatchEvent(new CustomEvent("fixturesPublished"))}catch($){w($.message??"Failed to activate gameweek.")}finally{g(!1),P(!1)}}async function Ee(){g(!0),w(""),j("");try{const{error:$}=await J.from("fixtures").delete().eq("gw",i);if($)throw $;u([]),j(`Gameweek ${i} upload cancelled.`)}catch($){w($.message??"Failed to cancel gameweek.")}finally{g(!1)}}async function ne(){g(!0),w(""),j("");try{if(!window.confirm(" This will publish and score all results for this Gameweek. Are you sure?")){g(!1);return}if(!oe)throw new Error("Please pick a result (H/D/A/Cancelled) for every fixture before publishing.");const Q=l.map(M=>({gw:i,fixture_index:M.fixture_index,result:h[M.fixture_index],decided_at:new Date().toISOString()})),{error:se}=await J.from("gw_results").upsert(Q,{onConflict:"gw,fixture_index"});if(se)throw se;j(`GW ${i} results published!`),window.dispatchEvent(new CustomEvent("resultsPublished",{detail:{gw:i}}))}catch($){w($.message??"Failed to save results.")}finally{g(!1)}}async function de(){g(!0),w(""),j("");try{const{error:$}=await J.from("gw_results").delete().eq("gw",i);if($)throw $;m({}),j(`GW ${i} results recalled (deleted).`)}catch($){w($.message??"Failed to recall results.")}finally{g(!1)}}return c.jsxs("div",{className:"mx-auto max-w-5xl px-4 py-10",children:[c.jsx("h1",{className:"mb-6 text-2xl font-semibold",children:" Admin"}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"mr-2",children:"GW"}),c.jsx("select",{value:i,onChange:$=>n(parseInt($.target.value,10)),className:"rounded border px-2 py-1",children:Array.from({length:38},($,Q)=>Q+1).map($=>c.jsx("option",{value:$,children:$},$))})]}),c.jsx("div",{className:"mb-4",children:c.jsxs("div",{className:"inline-flex rounded-full bg-slate-100 p-1 text-sm",children:[c.jsx("button",{type:"button",onClick:()=>Z("fixtures"),className:`px-3 py-1 rounded-full transition ${F==="fixtures"?"bg-white shadow font-semibold text-slate-900":"text-slate-600 hover:text-slate-900"}`,children:"Fixtures"}),c.jsx("button",{type:"button",onClick:()=>Z("results"),className:`ml-1 px-3 py-1 rounded-full transition ${F==="results"?"bg-white shadow font-semibold text-slate-900":"text-slate-600 hover:text-slate-900"}`,children:"Results"})]})}),y&&c.jsx("div",{className:"mb-4 rounded border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-700",children:y}),k&&c.jsx("div",{className:"mb-4 rounded border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-800",children:k}),F==="fixtures"&&c.jsxs("div",{className:"mb-8",children:[c.jsx("h2",{className:"mb-2 text-lg font-semibold",children:"Review Fixtures"}),l.length===0?c.jsxs(c.Fragment,{children:[c.jsxs("p",{className:"mb-3 text-slate-500",children:["No fixtures uploaded for GW ",i," yet."]}),c.jsx("h3",{className:"mb-2 text-base font-semibold",children:"Add Fixtures"}),c.jsx("textarea",{value:s,onChange:$=>o($.target.value),rows:8,className:"w-full rounded border p-2 font-mono text-sm",placeholder:`BRE v MUN	Sat 12:30 Sat 28th Sep
CHE v BHA	Sat 15:00 Sat 28th Sep`}),c.jsx("button",{onClick:ge,disabled:p,className:"mt-2 rounded bg-slate-900 px-3 py-2 text-white disabled:opacity-50",children:p?"Saving":"Save Fixtures"})]}):c.jsxs(c.Fragment,{children:[c.jsx("ul",{className:"mb-2",children:l.map($=>c.jsxs("li",{className:"py-1",children:[c.jsx("span",{className:"font-semibold",children:pi($.home_code||$.home_team||"HOME")})," ",c.jsx("span",{className:"text-slate-400",children:"v"})," ",c.jsx("span",{className:"font-semibold",children:pi($.away_code||$.away_team||"AWAY")}),c.jsx("span",{className:"ml-2 text-slate-500",children:$.kickoff_time?Ty($.kickoff_time):"TBD"})]},$.fixture_index))}),c.jsxs("div",{className:"mt-6 flex gap-4",children:[c.jsx("button",{onClick:le,disabled:p||!U||C===i,className:`rounded px-4 py-3 font-semibold text-white ${p||!U||C===i?"bg-emerald-300 cursor-not-allowed":"bg-emerald-700 hover:bg-emerald-800"}`,title:U?C===i?"This gameweek is already active":"Activate this gameweek":"Add fixtures first",children:A?"Are you sure? Click again to confirm.":`Activate Gameweek ${i}`}),c.jsx("button",{onClick:Ee,disabled:p,className:"rounded bg-rose-600 px-4 py-3 text-white font-semibold hover:bg-rose-700",children:"Cancel Upload"})]})]})]}),F==="results"&&c.jsxs("div",{children:[c.jsx("h2",{className:"mb-2 text-lg font-semibold",children:"Enter Results"}),l.length===0?c.jsxs("p",{className:"text-slate-500",children:["No fixtures yet for GW ",i,"."]}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"mb-2 text-xs text-slate-500",children:oe?"All fixtures selected (H/D/A/Cancelled).":`Pick results for ${X} more fixture${X===1?"":"s"} (H/D/A/Cancelled).`}),c.jsxs("table",{className:"w-full border text-sm",children:[c.jsx("thead",{className:"bg-slate-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-2 py-1 text-left",children:"Fixture"}),c.jsx("th",{className:"px-2 py-1",children:"Home Win"}),c.jsx("th",{className:"px-2 py-1",children:"Draw"}),c.jsx("th",{className:"px-2 py-1",children:"Away Win"}),c.jsx("th",{className:"px-2 py-1",children:"Cancelled"})]})}),c.jsx("tbody",{children:l.map($=>{const Q=Mh($.home_code||$.home_team),se=Mh($.away_code||$.away_team);return c.jsxs("tr",{className:"border-t",children:[c.jsxs("td",{className:"px-2 py-1",children:[Q," ",c.jsx("span",{className:"text-slate-400",children:"v"})," ",se]}),c.jsx("td",{className:"px-2 py-2 text-center",children:c.jsx("button",{type:"button",onClick:()=>m(M=>({...M,[$.fixture_index]:"H"})),className:`w-12 h-8 rounded-md font-semibold text-sm transition-colors ${(h[$.fixture_index]??null)==="H"?"bg-emerald-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:"H"})}),c.jsx("td",{className:"px-2 py-2 text-center",children:c.jsx("button",{type:"button",onClick:()=>m(M=>({...M,[$.fixture_index]:"D"})),className:`w-12 h-8 rounded-md font-semibold text-sm transition-colors ${(h[$.fixture_index]??null)==="D"?"bg-emerald-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:"D"})}),c.jsx("td",{className:"px-2 py-2 text-center",children:c.jsx("button",{type:"button",onClick:()=>m(M=>({...M,[$.fixture_index]:"A"})),className:`w-12 h-8 rounded-md font-semibold text-sm transition-colors ${(h[$.fixture_index]??null)==="A"?"bg-emerald-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:"A"})}),c.jsx("td",{className:"px-2 py-2 text-center",children:c.jsx("button",{type:"button",onClick:()=>m(M=>({...M,[$.fixture_index]:"N"})),className:`w-8 h-6 rounded text-xs transition-colors ${(h[$.fixture_index]??null)==="N"?"bg-red-500 text-white":"bg-gray-200 text-gray-600 hover:bg-gray-300"}`,children:"N"})})]},$.fixture_index)})})]}),c.jsxs("div",{className:"mt-3 flex gap-3",children:[c.jsx("button",{onClick:ne,disabled:p||!oe||N,className:`rounded px-3 py-2 text-white ${N?"bg-gray-300 cursor-not-allowed text-gray-700":"bg-red-600"} disabled:opacity-50`,title:N?"Results already published for this GW":oe?"Publish gameweek results":"Pick a result for every fixture",children:p?"Publishing":"Publish GW"}),c.jsx("button",{onClick:de,disabled:p||!N,className:`rounded px-3 py-2 ${N?"bg-gray-300 text-gray-900 hover:bg-gray-400":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,title:N?"Delete published results for this GW":"No published results to recall",children:"Recall GW"})]})]})]})]})}function Oy(){const{user:i}=ir(),[n,s]=_.useState([]),[o,l]=_.useState({}),[u,h]=_.useState([]),[m,p]=_.useState(1),[g,y]=_.useState(!1),[w,k]=_.useState(null),[j,A]=_.useState({}),[P,C]=_.useState({}),[D,N]=_.useState(!0),[I,F]=_.useState(null),[Z,U]=_.useState(null),[Y,oe]=_.useState(null),[X,ge]=_.useState(null),[le,Ee]=_.useState(null),[ne,de]=_.useState({});_.useEffect(()=>{let z=!0;return(async()=>{N(!0);const{data:q}=await J.from("league_members").select("leagues(id,name,code)").eq("user_id",i?.id),b=q?.map(Se=>Se.leagues).filter(Boolean)??[],{data:L}=await J.from("fixtures").select("id,gw,fixture_index,home_code,away_code,home_team,away_team,home_name,away_name,kickoff_time").order("gw").order("fixture_index"),ee=L??[];let K;ee.length?K=Math.max(...ee.map(Se=>Se.gw)):K=1;const he=ee.filter(Se=>Se.gw===K);p(K);try{const{data:Se}=await J.from("gw_results").select("gw").order("gw",{ascending:!1}).limit(1),Me=Array.isArray(Se)&&Se.length?Se[0].gw:null;if(Me!=null){const[{data:We},{data:et}]=await Promise.all([J.from("gw_results").select("fixture_index,result").eq("gw",Me),J.from("picks").select("fixture_index,pick").eq("gw",Me).eq("user_id",i?.id)]),He=new Map;We?.forEach(nt=>{(nt.result==="H"||nt.result==="D"||nt.result==="A")&&He.set(nt.fixture_index,nt.result)});let yt=0;et?.forEach(nt=>{const Nt=He.get(nt.fixture_index);Nt&&Nt===nt.pick&&(yt+=1)}),z&&(Ee(Me),ge(yt))}else z&&(Ee(null),ge(null))}catch{}const ce=K+1;if(ee.some(Se=>Se.gw===ce)){let Se=!1;try{const{data:Me}=await J.from("gw_results").select("gw").eq("gw",ce).limit(1);Se=Array.isArray(Me)&&Me.length>0}catch{}if(!Se){const Me=ee.filter(We=>We.gw===ce).map(We=>We.id);if(Me.length)try{const{data:We}=await J.from("results").select("id").in("fixture_id",Me).limit(1);Se=Array.isArray(We)&&We.length>0}catch{}}oe(Se?null:ce)}else oe(null);let ye=[];if(he.length){const{data:Se}=await J.from("picks").select("user_id,gw,fixture_index,pick").eq("user_id",i?.id).eq("gw",K);ye=Se??[]}let Pe=!1;{const{data:Se}=await J.from("gw_submissions").select("user_id").eq("user_id",i?.id).eq("gw",K).maybeSingle();Pe=!!Se}let Ve=null;if(he.length){const{data:Se}=await J.from("gw_results").select("gw,fixture_index,result").eq("gw",K),Me=Se??[],We=new Map;Me.forEach(He=>{He&&(He.result==="H"||He.result==="D"||He.result==="A")&&We.set(He.fixture_index,He.result)});const et={};if(We.forEach((He,yt)=>{et[yt]=He}),C(et),We.size>0){let He=0;ye.forEach(yt=>{const nt=We.get(yt.fixture_index);nt&&nt===yt.pick&&(He+=1)}),Ve=He}}if(!z)return;y(Pe),k(Ve);const Ut={};ye.forEach(Se=>Ut[Se.fixture_index]=Se.pick),s(b);try{const{data:Se}=await J.from("league_message_reads").select("league_id,last_read_at").eq("user_id",i?.id),Me=new Map;(Se??[]).forEach(et=>Me.set(et.league_id,et.last_read_at));const We={};for(const et of b){const He=Me.get(et.id)??"1970-01-01T00:00:00Z",{data:yt,count:nt,error:Nt}=await J.from("league_messages").select("id",{count:"exact"}).eq("league_id",et.id).gte("created_at",He);Nt&&console.warn("unread query error",et.id,Nt),We[et.id]=typeof nt=="number"?nt:yt?.length??0}z&&de(We)}catch(Se){console.warn("unread calc failed",Se)}h(he),A(Ut),N(!1);const Ht={};for(const Se of b)try{const{data:Me}=await J.from("league_members").select("user_id").eq("league_id",Se.id);if(Me&&Me.length>0){const We=Me.map(yt=>yt.user_id),{data:et}=await J.from("gw_submissions").select("user_id").eq("gw",K).in("user_id",We),He=et?.length||0;Ht[Se.id]=He===We.length}else Ht[Se.id]=!1}catch(Me){console.warn(`Error checking submissions for league ${Se.id}:`,Me),Ht[Se.id]=!1}l(Ht),h(he),A(Ut),N(!1)})(),()=>{z=!1}},[i?.id]),_.useEffect(()=>{let z=!0;return(async()=>{try{let q=!1;try{const{count:b}=await J.from("users").select("id",{count:"exact",head:!0});z&&typeof b=="number"&&(F(b),q=!0)}catch{}if(!q)try{const{count:b}=await J.from("picks").select("user_id",{count:"exact",head:!0});z&&typeof b=="number"&&F(b)}catch{}try{const{data:b}=await J.from("overall_ranks").select("rank").eq("user_id",i?.id).maybeSingle();if(z&&b?.rank!=null){U(b.rank);return}}catch{}try{const{data:b}=await J.from("overall_ocp").select("user_id, ocp").order("ocp",{ascending:!1});if(z&&Array.isArray(b)&&b.length){const L=b.findIndex(ee=>ee.user_id===i?.id);if(L!==-1){U(L+1);return}}}catch{}try{const[{data:b},{data:L}]=await Promise.all([J.from("gw_results").select("gw,fixture_index,result"),J.from("picks").select("user_id,gw,fixture_index,pick")]),ee=b||[],K=L||[],he=new Map;ee.forEach(ve=>{(ve.result==="H"||ve.result==="D"||ve.result==="A")&&he.set(`${ve.gw}:${ve.fixture_index}`,ve.result)});const ce=new Map;if(K.forEach(ve=>{const ye=he.get(`${ve.gw}:${ve.fixture_index}`);ye&&(ve.pick===ye?ce.set(ve.user_id,(ce.get(ve.user_id)||0)+1):ce.has(ve.user_id)||ce.set(ve.user_id,0))}),ce.size){const ye=Array.from(ce.entries()).sort((Pe,Ve)=>Ve[1]-Pe[1]||Pe[0].localeCompare(Ve[0])).findIndex(([Pe])=>Pe===i?.id);z&&ye!==-1&&U(ye+1)}}catch{}}finally{}})(),()=>{z=!1}},[i?.id]);const $=({title:z,subtitle:q,headerRight:b,className:L,boxed:ee=!0,children:K})=>c.jsxs("section",{className:L??"",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-2xl sm:text-3xl font-extrabold tracking-tight text-slate-900",children:z}),b&&c.jsx("div",{children:b})]}),q&&c.jsx("div",{className:"mt-1 text-sm text-slate-500",children:q}),ee?c.jsx("div",{className:"mt-3 rounded-2xl border bg-slate-50 overflow-hidden",children:K}):c.jsx("div",{className:"mt-3",children:K})]}),Q=({correct:z})=>z===!0?c.jsx("span",{className:"inline-block h-5 w-5 rounded-full bg-gradient-to-br from-yellow-400 via-orange-500 via-pink-500 to-purple-600 shadow-xl shadow-yellow-400/40 ring-2 ring-yellow-300/60 transform scale-125 relative overflow-hidden before:absolute before:inset-0 before:bg-gradient-to-r before:from-transparent before:via-white/70 before:to-transparent before:animate-[shimmer_1.2s_ease-in-out_infinite] after:absolute after:inset-0 after:bg-gradient-to-r after:from-transparent after:via-yellow-200/50 after:to-transparent after:animate-[shimmer_1.8s_ease-in-out_infinite_0.4s]"}):z===!1?c.jsx("span",{className:"inline-block h-5 w-5 rounded-full bg-red-500 border-2 border-white shadow ring-1 ring-red-300"}):c.jsx("span",{className:"inline-block h-5 w-5 rounded-full bg-emerald-500 border-2 border-white shadow ring-1 ring-emerald-300"}),se=({title:z,icon:q,footerLeft:b,footerRight:L,className:ee,to:K,compactFooter:he})=>{const ce=c.jsxs("div",{className:"h-full rounded-3xl border-2 border-emerald-200 bg-emerald-50/50 p-4 sm:p-6 "+(ee??""),children:[c.jsx("div",{className:"flex items-center gap-3",children:c.jsx("div",{className:"rounded-full bg-white shadow-inner flex items-center justify-center text-2xl "+(he?"h-12 w-12 sm:h-14 sm:w-14":"h-14 w-14 sm:h-16 sm:w-16"),children:q})}),c.jsx("div",{className:"mt-3",children:c.jsx("div",{className:"text-xl sm:text-2xl font-semibold tracking-tight text-slate-900",children:z})}),(b||L)&&c.jsxs("div",{className:"mt-3 flex items-center gap-3 text-emerald-700",children:[b&&c.jsx("div",{className:"flex items-center gap-1 "+(he?"text-sm sm:text-base":"text-lg sm:text-xl"),children:b}),L&&c.jsx("div",{className:"flex items-center gap-1 "+(he?"text-sm sm:text-base":"text-lg sm:text-xl"),children:L})]})]});return K?c.jsx(it,{to:K,className:"no-underline block hover:bg-emerald-50/40 rounded-3xl",children:ce}):ce},M=({gw:z,score:q,submitted:b})=>{const L=q!==null?q:b?0:NaN;return c.jsxs("div",{className:"h-full rounded-3xl border-2 border-emerald-200 bg-emerald-50/50 p-4 sm:p-6 relative",children:[c.jsxs("div",{className:"absolute top-4 left-4 text-emerald-700 text-sm sm:text-base font-semibold",children:["GW",z]}),c.jsx("div",{className:"absolute bottom-4 left-4 text-emerald-700 text-sm sm:text-base font-semibold",children:"Last week's score"}),c.jsx("div",{className:"mt-2 flex items-center justify-center h-24 sm:h-28",children:Number.isNaN(L)?c.jsx("span",{className:"text-5xl sm:text-6xl font-extrabold text-slate-900",children:""}):c.jsx("span",{className:"text-5xl sm:text-6xl font-extrabold text-slate-900",children:L})})]})};return c.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-4 bg-gray-50 min-h-screen",children:[c.jsx($,{title:"Leaderboards",boxed:!1,children:c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx(se,{to:"/global",title:"TotL Global",icon:c.jsx("span",{role:"img","aria-label":"trophy",children:""}),compactFooter:!0,footerLeft:c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{children:""}),c.jsx("span",{className:"font-semibold",children:I??""}),c.jsx("span",{className:"ml-1",children:""}),c.jsx("span",{className:"font-semibold",children:Z??""})]})}),c.jsx(M,{gw:le??m,score:X,submitted:!1})]})}),c.jsxs("section",{className:"mt-12",children:[c.jsx("h2",{className:"text-2xl sm:text-3xl font-extrabold tracking-tight text-slate-900",children:"Mini Leagues"}),c.jsx("div",{className:"mt-3",children:D?c.jsx("div",{className:"p-4 text-slate-500",children:"Loading"}):n.length===0?c.jsxs("div",{className:"p-6 bg-white rounded-lg border border-slate-200 text-center",children:[c.jsx("div",{className:"text-slate-600 mb-3",children:"You don't have any mini leagues yet."}),c.jsx(it,{to:"/leagues",className:"inline-block px-4 py-2 bg-emerald-600 text-white font-semibold rounded-lg hover:bg-emerald-700 transition-colors no-underline",children:"Create one now!"})]}):c.jsx("div",{className:"rounded-2xl border bg-slate-50 overflow-hidden",children:c.jsx("ul",{children:n.map((z,q)=>{const b=ne?.[z.id]??0,L=b>0?Math.min(b,99):0,ee=q?"border-t":"";return c.jsx("li",{className:ee,children:c.jsx(it,{to:`/league/${z.code}`,className:"block p-4 bg-white hover:bg-emerald-50 transition-colors no-underline",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-lg font-semibold text-slate-900",children:z.name}),o[z.id]&&c.jsx("div",{className:"text-sm text-emerald-600 font-bold mt-1",children:"All Submitted"})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[L>0&&c.jsx("span",{className:"inline-flex items-center justify-center h-7 w-7 rounded-full bg-emerald-600 text-white text-sm font-bold",children:L}),c.jsx("div",{className:"px-3 py-1 bg-slate-100 text-slate-700 text-sm font-medium rounded-md hover:bg-slate-200 transition-colors",children:"View"})]})]})})},z.id)})})})})]}),c.jsxs("section",{className:"mt-12",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-2xl sm:text-3xl font-extrabold tracking-tight text-slate-900",children:"Games"}),u.length>0&&!g&&w===null&&c.jsx("div",{children:c.jsx(it,{to:"/predictions",className:"inline-block px-3 py-1 bg-blue-600 text-white text-sm font-semibold rounded-md hover:bg-blue-700 transition-colors no-underline",children:"Do your predictions"})})]}),c.jsxs("div",{className:"text-slate-700 font-semibold text-lg mt-4 mb-0",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("span",{children:["Game Week ",m]}),u.length>0&&(()=>{const z=u[0],q=z.kickoff_time?new Date(z.kickoff_time).toLocaleDateString(void 0,{weekday:"long",month:"short",day:"numeric"}):null;return q?c.jsx("span",{className:"text-sm",children:q}):null})()]}),w!==null?c.jsx("div",{className:"mt-1",children:c.jsxs("span",{className:"font-extrabold text-emerald-600 text-xl",children:["Score ",w]})}):null,Y?c.jsx("div",{className:"mt-1",children:c.jsxs("span",{className:"font-semibold",children:["GW",Y," coming soon"]})}):null]}),u.length===0?c.jsx("div",{className:"p-4 text-slate-500",children:"No fixtures yet."}):c.jsx("div",{children:(()=>{const z={};u.forEach(L=>{const ee=L.kickoff_time?new Date(L.kickoff_time).toLocaleDateString(void 0,{weekday:"long",month:"short",day:"numeric"}):"Unknown";z[ee]||(z[ee]=[]),z[ee].push(L)});const q=Object.keys(z);let b=0;return q.map((L,ee)=>c.jsxs("div",{children:[ee>0&&c.jsx("div",{className:"mt-6 mb-3 text-slate-700 font-semibold text-lg",children:L}),c.jsx("div",{className:"rounded-2xl border bg-slate-50 overflow-hidden mb-6",children:c.jsx("ul",{children:z[L].map(K=>{const he=j[K.fixture_index],ce=K.home_code||K.home_name||K.home_team||"",ve=K.away_code||K.away_name||K.away_team||"",ye=pi(ce),Pe=pi(ve),Ve=`/assets/badges/${ce.toUpperCase()}.png`,Ut=`/assets/badges/${ve.toUpperCase()}.png`,Ht=b++?"border-t":void 0;return c.jsx("li",{className:Ht,children:c.jsxs("div",{className:"p-4 bg-white",children:[c.jsxs("div",{className:"grid grid-cols-3 items-center gap-2",children:[c.jsx("div",{className:"flex items-center justify-center pr-1",children:c.jsx("span",{className:"text-sm sm:text-base font-medium text-slate-900 truncate",children:ye})}),c.jsxs("div",{className:"flex items-center justify-center gap-1",children:[c.jsx("img",{src:Ve,alt:`${ye} badge`,className:"h-4 w-3"}),c.jsx("div",{className:"text-[15px] sm:text-base font-semibold text-slate-600",children:K.kickoff_time?new Date(K.kickoff_time).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",hour12:!1}):""}),c.jsx("img",{src:Ut,alt:`${Pe} badge`,className:"h-4 w-3"})]}),c.jsx("div",{className:"flex items-center justify-center pl-1",children:c.jsx("span",{className:"text-sm sm:text-base font-medium text-slate-900 truncate",children:Pe})})]}),c.jsxs("div",{className:"mt-3 grid grid-cols-3 items-center",children:[c.jsx("div",{className:"flex justify-center",children:he==="H"?c.jsx(Q,{correct:P[K.fixture_index]?P[K.fixture_index]==="H":void 0}):P[K.fixture_index]==="H"?c.jsx("span",{className:"inline-block h-5 w-5 rounded-full bg-gray-300 border-2 border-white shadow ring-1 ring-gray-200"}):c.jsx("span",{className:"h-5"})}),c.jsx("div",{className:"flex justify-center",children:he==="D"?c.jsx(Q,{correct:P[K.fixture_index]?P[K.fixture_index]==="D":void 0}):P[K.fixture_index]==="D"?c.jsx("span",{className:"inline-block h-5 w-5 rounded-full bg-gray-300 border-2 border-white shadow ring-1 ring-gray-200"}):c.jsx("span",{className:"h-5"})}),c.jsx("div",{className:"flex justify-center",children:he==="A"?c.jsx(Q,{correct:P[K.fixture_index]?P[K.fixture_index]==="A":void 0}):P[K.fixture_index]==="A"?c.jsx("span",{className:"inline-block h-5 w-5 rounded-full bg-gray-300 border-2 border-white shadow ring-1 ring-gray-200"}):c.jsx("span",{className:"h-5"})})]})]})},K.id)})})})]},L))})()})]})]})}function Ay(){const{user:i}=ir(),[n,s]=_.useState(!0),[o,l]=_.useState(""),[u,h]=_.useState(null),[m,p]=_.useState([]),[g,y]=_.useState([]),[w,k]=_.useState({}),[j,A]=_.useState("overall");_.useEffect(()=>{let U=!0;return(async()=>{try{s(!0),l("");const{data:Y,error:oe}=await J.from("gw_results").select("gw").order("gw",{ascending:!1}).limit(1).maybeSingle();if(oe)throw oe;const X=Y?.gw??1;U&&h(X);const{data:ge,error:le}=await J.from("v_gw_points").select("user_id, gw, points").order("gw",{ascending:!0});if(le)throw le;const{data:Ee,error:ne}=await J.from("v_ocp_overall").select("user_id, name, ocp");if(ne)throw ne;if(!U)return;if(y(ge??[]),p(Ee??[]),X&&X>1){const de=ge?.filter(Q=>Q.gw<X)??[],$={};de.forEach(Q=>{$[Q.user_id]=($[Q.user_id]??0)+(Q.points??0)}),U&&k($)}else U&&k({})}catch(Y){U&&l(Y?.message??"Failed to load leaderboard.")}finally{U&&s(!1)}})(),()=>{U=!1}},[]);function P(U){const Y=Object.keys(U);Y.sort((X,ge)=>(U[ge]??0)-(U[X]??0)||X.localeCompare(ge));const oe={};return Y.forEach((X,ge)=>oe[X]=ge+1),oe}const C=_.useMemo(()=>{const U={};return m.forEach(Y=>{U[Y.user_id]=Y.ocp??0}),g.forEach(Y=>{Y.user_id in U||(U[Y.user_id]=Y.points??0)}),P(U)},[m,g]),D=_.useMemo(()=>P(w),[w]),N=_.useMemo(()=>U=>{if(!u||u<U)return[];const Y=u-U+1,oe=g.filter(le=>le.gw>=Y&&le.gw<=u),X=new Map;return m.forEach(le=>{X.set(le.user_id,{user_id:le.user_id,name:le.name??"User",formPoints:0,weeksPlayed:new Set})}),oe.forEach(le=>{const Ee=X.get(le.user_id);Ee?(Ee.formPoints+=le.points,Ee.weeksPlayed.add(le.gw)):X.set(le.user_id,{user_id:le.user_id,name:"User",formPoints:le.points,weeksPlayed:new Set([le.gw])})}),Array.from(X.values()).filter(le=>{for(let Ee=Y;Ee<=u;Ee++)if(!le.weeksPlayed.has(Ee))return!1;return!0}).map(le=>({user_id:le.user_id,name:le.name,formPoints:le.formPoints,gamesPlayed:U})).sort((le,Ee)=>Ee.formPoints-le.formPoints||le.name.localeCompare(Ee.name))},[m,g,u]),I=_.useMemo(()=>N(5),[N]),F=_.useMemo(()=>N(10),[N]),Z=_.useMemo(()=>{const U=g.filter(X=>X.gw===u),Y=new Map;U.forEach(X=>Y.set(X.user_id,X.points));const oe=m.map(X=>({user_id:X.user_id,name:X.name??"User",this_gw:Y.get(X.user_id)??0,ocp:X.ocp??0}));return U.forEach(X=>{oe.find(ge=>ge.user_id===X.user_id)||oe.push({user_id:X.user_id,name:"User",this_gw:X.points,ocp:X.points})}),oe.sort((X,ge)=>ge.ocp-X.ocp||X.name.localeCompare(ge.name)),oe},[m,g,u]);return c.jsx("div",{className:"min-h-screen bg-slate-50",children:c.jsxs("div",{className:"mx-auto max-w-3xl px-4 pt-6 pb-16",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-4xl sm:text-5xl font-extrabold tracking-tight text-slate-900 mt-0 mb-2",children:"Leaderboard"}),c.jsxs("div",{className:"mt-0 mb-6 text-base text-slate-500",children:["See how you rank against every",c.jsx("br",{}),"TotL player in the world."]})]}),c.jsx("div",{className:"flex justify-center mb-6",children:c.jsxs("div",{className:"flex rounded-lg bg-slate-100 p-1",children:[c.jsx("button",{onClick:()=>A("overall"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${j==="overall"?"bg-white text-slate-900 shadow-sm":"text-slate-600 hover:text-slate-900"}`,children:"Overall"}),c.jsx("button",{onClick:()=>A("form5"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${j==="form5"?"bg-white text-slate-900 shadow-sm":"text-slate-600 hover:text-slate-900"}`,children:"5 Week"}),c.jsx("button",{onClick:()=>A("form10"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${j==="form10"?"bg-white text-slate-900 shadow-sm":"text-slate-600 hover:text-slate-900"}`,children:"10 Week"})]})}),j==="form5"&&c.jsx("div",{className:"text-center mb-6",children:u&&u>=5?c.jsxs("div",{className:"text-sm text-slate-600",children:["Showing all players who have completed",c.jsx("br",{className:"sm:hidden"})," the last 5 game weeks",c.jsx("br",{className:"sm:hidden"})," (GW",Math.max(1,u-4),"-",u,")"]}):c.jsxs("div",{className:"text-sm text-amber-600 font-medium",children:[" Watch this space! Complete 5 GW",c.jsx("br",{className:"sm:hidden"})," in a row to see the 5 Week Form Leaderboard."]})}),j==="form10"&&c.jsx("div",{className:"text-center mb-6",children:u&&u>=10?c.jsxs("div",{className:"text-sm text-slate-600",children:["Showing all players who have completed",c.jsx("br",{className:"sm:hidden"})," the last 10 game weeks",c.jsx("br",{className:"sm:hidden"})," (GW",Math.max(1,u-9),"-",u,")"]}):c.jsxs("div",{className:"text-sm text-amber-600 font-medium",children:[" Watch this space! Complete 10 GW",c.jsx("br",{className:"sm:hidden"})," in a row to see the 10 Week Form Leaderboard."]})}),o&&c.jsx("div",{className:"mb-6 rounded border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-700",children:o}),n?c.jsx("div",{className:"text-slate-500",children:"Loading"}):j==="form5"&&u&&u<5?c.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-12 text-center",children:[c.jsx("div",{className:"text-lg font-semibold text-slate-700 mb-2",children:"5 Week Form Leaderboard Coming Soon"}),c.jsx("div",{className:"text-slate-600",children:"Complete 5 game weeks in a row to unlock the 5 Week Form Leaderboard and see who's in the best form!"})]}):j==="form10"&&u&&u<10?c.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-12 text-center",children:[c.jsx("div",{className:"text-lg font-semibold text-slate-700 mb-2",children:"10 Week Form Leaderboard Coming Soon"}),c.jsx("div",{className:"text-slate-600",children:"Complete 10 game weeks in a row to unlock the 10 Week Form Leaderboard and see who's in the best form!"})]}):(j==="overall"?Z:j==="form5"?I:F).length===0?c.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 text-slate-600",children:"No leaderboard data yet."}):c.jsx("div",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-sm",children:c.jsxs("table",{className:"w-full text-sm text-slate-800",children:[c.jsx("thead",{className:"bg-slate-100",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-2 py-3 text-left w-8 font-semibold",children:"#"}),c.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Player"}),j==="overall"&&c.jsxs(c.Fragment,{children:[c.jsxs("th",{className:"px-4 py-3 text-center font-semibold",children:["GW",u||"?"]}),c.jsx("th",{className:"px-4 py-3 text-center font-semibold",children:"OCP"})]}),(j==="form5"||j==="form10")&&c.jsx("th",{className:"px-4 py-3 text-center font-semibold",children:"Form Points"})]})}),c.jsx("tbody",{children:(j==="overall"?Z:j==="form5"?I:F).map((U,Y)=>{const oe=U.user_id===i?.id,X=oe?"":Y%2===0?"bg-white":"bg-slate-50",ge=oe?"bg-emerald-200":"";let le="",Ee="bg-gray-300";if(j==="overall"){const ne=D[U.user_id],de=C[U.user_id],$=g.some(Q=>Q.user_id===U.user_id&&Q.gw===u);de&&ne?de<ne?(le="",Ee="bg-green-500 text-white"):de>ne?(le="",Ee="bg-red-500 text-white"):(le="",Ee="bg-gray-500 text-white"):de&&!ne&&($?(le="",Ee="bg-gray-400"):(le="",Ee="bg-blue-500 text-white"))}return c.jsxs("tr",{className:`border-t border-slate-200 ${X} ${ge}`,children:[c.jsx("td",{className:"px-2 py-3 text-left tabular-nums whitespace-nowrap",children:Y+1}),c.jsxs("td",{className:"px-4 py-3",children:[(le||Ee)&&j==="overall"&&c.jsx("span",{className:`mr-2 inline-flex items-center justify-center w-4 h-4 rounded-full text-xs font-bold ${Ee} align-middle`,"aria-hidden":!0,children:le}),c.jsx("span",{className:"align-middle font-bold",children:U.name}),oe&&c.jsx("span",{className:"ml-2 rounded-full bg-emerald-100 px-2 py-0.5 text-xs font-semibold text-emerald-800",children:"you"})]}),j==="overall"&&c.jsxs(c.Fragment,{children:[c.jsx("td",{className:"px-4 py-3 text-center tabular-nums font-bold",children:"this_gw"in U?U.this_gw:0}),c.jsx("td",{className:"px-4 py-3 text-center font-bold",children:"ocp"in U?U.ocp:0})]}),(j==="form5"||j==="form10")&&c.jsx("td",{className:"px-4 py-3 text-center font-bold",children:"formPoints"in U?U.formPoints:0})]},U.user_id)})})]})}),c.jsx("div",{className:"mt-4 flex justify-center",children:c.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[c.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),c.jsx("span",{children:"New Player"})]})})]})})}function Ly(){return c.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-10",children:[c.jsx("h1",{className:"text-2xl font-semibold",children:"Create a mini league"}),c.jsx("p",{className:"mt-2 text-slate-600",children:"Quick form to create/invite coming next."})]})}function Iy(){const[i,n]=_.useState({predictions:!0,leaderboard:!1,form:!1,"mini-leagues":!1,unicorns:!1,summary:!1}),s=l=>{n(u=>({...u,[l]:!u[l]}))},o=({id:l,title:u,icon:h,children:m})=>{const p=i[l];return c.jsxs("div",{className:"border border-slate-200 rounded-xl overflow-hidden bg-white shadow-sm",children:[c.jsx("button",{onClick:()=>s(l),className:"w-full px-6 py-4 text-left bg-gradient-to-r from-slate-50 to-slate-100 hover:from-slate-100 hover:to-slate-200 transition-colors border-b border-slate-200",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-2xl",children:h}),c.jsx("h2",{className:"text-lg font-bold text-slate-800",children:u})]}),c.jsx("svg",{className:`w-5 h-5 text-slate-600 transition-transform ${p?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),p&&c.jsx("div",{className:"px-6 py-4 text-slate-700",children:m})]})};return c.jsx("div",{className:"min-h-screen bg-slate-50",children:c.jsxs("div",{className:"mx-auto max-w-4xl px-4 pt-6 pb-16",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h1",{className:"text-4xl font-extrabold text-slate-900 mb-4",children:"How To Play"}),c.jsx("p",{className:"text-base text-slate-600 leading-relaxed",children:"Welcome to TOTL (Top of the League)  the game of quick Predictions and friendly rivalries. Here's how it all works."})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx(o,{id:"predictions",title:"Predictions Centre",icon:"",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("p",{className:"text-base leading-relaxed",children:["Before each Premier League Gameweek, head to the ",c.jsx("strong",{children:"Predictions Centre"})," and make your picks for every match  ",c.jsx("strong",{children:"Home Win"}),", ",c.jsx("strong",{children:"Draw"}),", or ",c.jsx("strong",{children:"Away Win"}),"."]}),c.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[c.jsx("h3",{className:"font-semibold text-amber-800 mb-2",children:" Important"}),c.jsx("p",{className:"text-amber-700",children:"Once the first match kicks off, predictions are locked, so make sure you get them in before the deadline."})]}),c.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-4",children:[c.jsx("h3",{className:"font-semibold text-emerald-800 mb-2",children:" Scoring"}),c.jsxs("p",{className:"text-emerald-700",children:["Each correct Prediction adds ",c.jsx("strong",{children:"1"})," to your ",c.jsx("strong",{children:"Overall Correct Predictions (OCP)"}),"  that's your running total for the season."]})]})]})}),c.jsx(o,{id:"mini-leagues",title:"Mini-Leagues",icon:"",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("p",{className:"text-base leading-relaxed",children:["Want to play with your friends? Create a ",c.jsx("strong",{children:"Mini-League"})," and invite up to ",c.jsx("strong",{children:"8 players"})," to join. Share your league code, get everyone predicting, and battle it out week by week."]}),c.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4",children:[c.jsx("h3",{className:"font-semibold text-slate-800 mb-2",children:"How it works:"}),c.jsxs("p",{className:"text-slate-700",children:["Each Gameweek, whoever gets the ",c.jsx("strong",{children:"most correct Predictions"})," wins that week."]})]}),c.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-4",children:[c.jsx("h3",{className:"font-semibold text-emerald-800 mb-3",children:"League Points:"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-emerald-600 font-bold",children:""}),c.jsxs("span",{className:"text-emerald-700",children:[c.jsx("strong",{children:"Win the week"}),"  3 points"]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-emerald-600 font-bold",children:""}),c.jsxs("span",{className:"text-emerald-700",children:[c.jsx("strong",{children:"Draw"}),"  1 point"]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-emerald-600 font-bold",children:""}),c.jsxs("span",{className:"text-emerald-700",children:[c.jsx("strong",{children:"Lose"}),"  0 points"]})]})]})]}),c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[c.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:" Ties"}),c.jsxs("p",{className:"text-blue-700",children:["If two or more players finish with the same number of correct Predictions, the player with the most ",c.jsx("strong",{children:"Unicorns"})," wins the week. Still tied? It's a draw."]})]})]})}),c.jsx(o,{id:"unicorns",title:"Unicorns",icon:"",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("p",{className:"text-base leading-relaxed",children:["In Mini-Leagues with ",c.jsx("strong",{children:"3 or more players"}),", if you're the ",c.jsx("strong",{children:"only person"})," to correctly predict a fixture, that's a ",c.jsx("strong",{children:"Unicorn"}),"."]}),c.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[c.jsx("h3",{className:"font-semibold text-purple-800 mb-2",children:" Strategy Tip"}),c.jsx("p",{className:"text-purple-700",children:"They can make all the difference in tight weeks  so sometimes it's worth backing the surprise result nobody else will."})]})]})}),c.jsx(o,{id:"leaderboard",title:"Leaderboard",icon:"",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("p",{className:"text-base leading-relaxed",children:["The ",c.jsx("strong",{children:"Leaderboard"})," shows how you stack up against everyone else playing TOTL."]}),c.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-4",children:[c.jsx("h3",{className:"font-semibold text-emerald-800 mb-2",children:" Simple Rules"}),c.jsxs("p",{className:"text-emerald-700",children:["The more correct Predictions you make, the higher you climb. ",c.jsx("strong",{children:"No extra points, no ties"}),"  just football instincts and consistency."]})]})]})}),c.jsx(o,{id:"form",title:"Form Leaderboards",icon:"",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("p",{className:"text-base leading-relaxed",children:[c.jsx("strong",{children:"Form Leaderboards"})," focus on how you're performing ",c.jsx("strong",{children:"right now"}),", not over the whole season."]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[c.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:" 5-Week Form Table"}),c.jsxs("p",{className:"text-blue-700",children:["Your short-term ",c.jsx("strong",{children:'"hot streak"'}),"  great for spotting who's on fire lately."]})]}),c.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[c.jsx("h3",{className:"font-semibold text-purple-800 mb-2",children:" 10-Week Form Table"}),c.jsxs("p",{className:"text-purple-700",children:["The standard rolling form that rewards ",c.jsx("strong",{children:"consistency and momentum"}),"."]})]})]}),c.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4",children:[c.jsx("h3",{className:"font-semibold text-slate-800 mb-2",children:" How They Work"}),c.jsxs("p",{className:"text-slate-700",children:["Both update each week and show the players in top form. To appear on the ",c.jsx("strong",{children:"10-Week Form Table"}),", make sure you've played 10 Gameweeks in a row  ",c.jsx("strong",{children:"consistency is key"}),"!"]})]}),c.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[c.jsx("h3",{className:"font-semibold text-amber-800 mb-2",children:" Don't worry if you joined TOTL late"}),c.jsx("p",{className:"text-amber-700",children:"Once you've played enough weeks, you'll automatically show up in these tables."})]})]})}),c.jsx(o,{id:"summary",title:"That's It",icon:"",children:c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{className:"bg-gradient-to-r from-emerald-50 to-blue-50 border border-emerald-200 rounded-lg p-4",children:[c.jsx("h3",{className:"font-semibold text-emerald-800 mb-2",children:" Your Mission"}),c.jsxs("p",{className:"text-emerald-700",children:["Predict each week. Beat your mates. Climb the Leaderboard  or rise up the Form Tables. Stay sharp and see who's truly ",c.jsx("strong",{children:"Top of the League"}),"."]})]})})})]}),c.jsx("div",{className:"mt-12 text-center",children:c.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-6 shadow-sm",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-2",children:"Ready to Start Playing?"}),c.jsx("p",{className:"text-slate-600 mb-4",children:"Head to the Predictions page and make your first picks!"}),c.jsxs("a",{href:"/predictions",className:"inline-flex items-center gap-2 bg-emerald-600 hover:bg-emerald-700 text-white font-semibold px-6 py-3 rounded-lg transition-colors",children:[c.jsx("span",{children:""}),"Make Predictions"]})]})})]})})}function $y(){const{user:i}=ir(),[n,s]=jr.useState(!1),[o,l]=jr.useState(null),[u,h]=jr.useState(null),[m,p]=jr.useState(null);return jr.useEffect(()=>{let g=!0;const y=async()=>{try{const{data:P}=await J.from("meta").select("current_gw").eq("id",1).maybeSingle(),C=P?.current_gw??null;if(!g)return;if(l(C),!C)return s(!1);const{count:D}=await J.from("fixtures").select("id",{count:"exact",head:!0}).eq("gw",C);if(!g)return;const{count:N}=await J.from("gw_results").select("gw",{count:"exact",head:!0}).eq("gw",C);if(!g)return;const I=(N??0)>0;if(!D){h("watch-space"),s(!0),p(null);return}const{data:F}=await J.from("fixtures").select("kickoff_time").eq("gw",C).order("kickoff_time",{ascending:!0}).limit(1);if(F&&F.length>0&&F[0].kickoff_time){const U=new Date(F[0].kickoff_time),oe=new Date(U.getTime()-4500*1e3).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});p(oe)}else p(null);if(I){h("watch-space"),s(!0);return}if(!i?.id){s(!1);return}const{data:Z}=await J.from("gw_submissions").select("user_id").eq("user_id",i.id).eq("gw",C).maybeSingle();if(!g)return;Z?s(!1):(h("predictions"),s(!0))}catch{s(!1)}};y();const w=()=>{y()},k=()=>{y()},j=()=>{y()},A=()=>{document.hidden||y()};return window.addEventListener("predictionsSubmitted",w),window.addEventListener("resultsPublished",k),window.addEventListener("fixturesPublished",j),document.addEventListener("visibilitychange",A),()=>{g=!1,window.removeEventListener("predictionsSubmitted",w),window.removeEventListener("resultsPublished",k),window.removeEventListener("fixturesPublished",j),document.removeEventListener("visibilitychange",A)}},[i?.id]),n?c.jsx("div",{className:"mx-auto max-w-6xl px-4",children:u==="predictions"?c.jsx(it,{to:"/predictions",className:"block mt-4 rounded-lg bg-blue-600 px-4 py-3 hover:bg-blue-700 transition-colors",children:c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"font-semibold text-white",children:["GW",o," is Live - Make your predictions"]}),c.jsx("div",{className:"text-white/90",children:m?c.jsxs(c.Fragment,{children:[c.jsx("span",{children:"Deadline: "}),c.jsx("span",{className:"font-extrabold",children:m})]}):"Don't miss the deadline!"})]})}):c.jsx("div",{className:"mt-4 rounded-lg bg-slate-100 px-4 py-3 border border-slate-200",children:c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"font-semibold text-slate-800",children:["GW",(o||1)+1," Coming Soon"]}),c.jsx("div",{className:"text-sm text-slate-600",children:"Fixtures will be published soon."})]})})}):null}function Dy(){const[i,n]=_.useState("signup"),[s,o]=_.useState(""),[l,u]=_.useState(""),[h,m]=_.useState(""),[p,g]=_.useState(null),[y,w]=_.useState(!1),[k,j]=_.useState(!1),A=hu();async function P(D,N){D&&(N&&N.trim()?await J.from("users").upsert({id:D,name:N.trim()}):await J.from("users").upsert({id:D}))}async function C(D){D.preventDefault(),g(null),w(!0);try{if(i==="signup"){const{data:N,error:I}=await J.from("users").select("name").eq("name",s.trim()).limit(1);if(I)throw I;if(N&&N.length>0)throw new Error("Username already taken. Please choose a different name.");const{data:F,error:Z}=await J.auth.signUp({email:l.trim(),password:h,options:{data:{display_name:s.trim()},emailRedirectTo:window.location.origin}});if(Z)throw Z;const U=F.user??(await J.auth.getUser()).data.user;U&&await P(U.id,s),j(!0)}else{const{data:N,error:I}=await J.auth.signInWithPassword({email:l.trim(),password:h});if(I)throw I;const F=N.user??(await J.auth.getUser()).data.user;if(F){const Z=F.user_metadata?.display_name;await P(F.id,Z)}A("/",{replace:!0})}}catch(N){g(N?.message||"Something went wrong")}finally{w(!1)}}return k?c.jsx("div",{className:"min-h-screen flex items-start justify-center bg-gray-50 p-6 pt-20",children:c.jsxs("div",{className:"w-full max-w-md rounded-2xl border bg-white p-6 shadow space-y-4",children:[c.jsx("h1",{className:"text-xl font-bold text-center",children:"Check Your Email"}),c.jsxs("div",{className:"text-center space-y-3",children:[c.jsxs("p",{className:"text-slate-600",children:["We've sent you a confirmation link at ",c.jsx("strong",{children:l})]}),c.jsx("p",{className:"text-sm text-slate-500",children:"Click the link in your email to activate your account and start playing TOTL!"}),c.jsx("button",{onClick:()=>j(!1),className:"mt-4 px-4 py-2 text-sm text-emerald-600 hover:text-emerald-700 underline",children:"Back to signup"})]})]})}):c.jsx("div",{className:"min-h-screen flex items-start justify-center bg-gray-50 p-6 pt-20",children:c.jsxs("form",{onSubmit:C,className:"w-full max-w-md rounded-2xl border bg-white p-6 shadow space-y-4",children:[c.jsx("h1",{className:"text-xl font-bold",children:i==="signup"?"Create your account":"Sign in"}),i==="signup"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium",children:"Display name"}),c.jsx("input",{className:"mt-1 w-full rounded-lg border px-3 py-2 text-sm",value:s,onChange:D=>o(D.target.value),placeholder:"e.g. Thomas B",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium",children:"Email"}),c.jsx("input",{type:"email",className:"mt-1 w-full rounded-lg border px-3 py-2 text-sm",value:l,onChange:D=>u(D.target.value),placeholder:"you@example.com",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium",children:"Password"}),c.jsx("input",{type:"password",className:"mt-1 w-full rounded-lg border px-3 py-2 text-sm",value:h,onChange:D=>m(D.target.value),placeholder:"At least 6 characters",required:!0})]}),p&&c.jsx("div",{className:"text-sm text-red-600",children:p}),c.jsx("button",{type:"submit",disabled:y,className:"w-full rounded-xl px-4 py-2 font-semibold bg-emerald-600 text-white hover:bg-emerald-700 disabled:opacity-60",children:y?i==="signup"?"Creating":"Signing in":i==="signup"?"Create account":"Sign in"}),c.jsx("div",{className:"text-xs text-slate-500",children:i==="signup"?c.jsxs(c.Fragment,{children:["Already have an account?"," ",c.jsx("button",{type:"button",onClick:()=>n("signin"),className:"underline",children:"Sign in"})]}):c.jsxs(c.Fragment,{children:["New here?"," ",c.jsx("button",{type:"button",onClick:()=>n("signup"),className:"underline",children:"Create an account"})]})})]})})}function tr({children:i}){const{user:n,loading:s}=ir();return s?c.jsx("div",{className:"p-6",children:"Loading"}):n?c.jsx(c.Fragment,{children:i}):c.jsx(Jh,{to:"/auth",replace:!0})}function Uy(){const[i,n]=jr.useState(!1);return c.jsx(Dg,{children:c.jsx(My,{menuOpen:i,setMenuOpen:n})})}function My({menuOpen:i,setMenuOpen:n}){const s=On(),{user:o,showWelcome:l,dismissWelcome:u,signOut:h}=ir(),m=o?.id==="4542c037-5b38-40d0-b189-847b8f17c222";return c.jsxs(c.Fragment,{children:[c.jsx("header",{className:"sticky top-0 z-50 text-white shadow",children:c.jsxs("div",{className:"bg-emerald-600",children:[c.jsxs("div",{className:"max-w-6xl mx-auto px-4 h-24 sm:h-28 flex items-center gap-6",children:[c.jsx(it,{to:"/",className:"flex items-center no-underline",children:c.jsx("img",{src:"/assets/badges/totl-logo1.svg",alt:"TOTL",className:"h-20 sm:h-26 w-auto"})}),c.jsxs("div",{className:"ml-auto hidden sm:flex items-center gap-6",children:[c.jsx(it,{to:"/tables",className:"text-white no-underline hover:opacity-90 text-xl font-bold",children:"Mini Leagues"}),c.jsx(it,{to:"/predictions",className:"text-white no-underline hover:opacity-90 text-xl font-bold",children:"Predictions"}),c.jsx(it,{to:"/global",className:"text-white no-underline hover:opacity-90 text-xl font-bold",children:"Leaderboard"}),c.jsx(it,{to:"/how-to-play",className:"text-white no-underline hover:opacity-90 text-xl font-bold",children:"How To Play"}),m&&c.jsx(it,{to:"/admin",className:"text-white no-underline hover:opacity-90 text-xl font-bold",children:"Admin"})]}),c.jsxs("div",{className:"ml-auto hidden sm:flex items-center gap-4",children:[c.jsx("div",{className:"text-white/90 text-sm",children:o?.user_metadata?.display_name||o?.email||"User"}),c.jsx("button",{onClick:async()=>{await h()},className:"px-3 py-1 bg-white/20 hover:bg-white/30 rounded-md text-white text-sm font-medium transition-colors",children:"Sign Out"})]}),c.jsx("div",{className:"ml-auto sm:ml-4 flex items-center gap-2",children:c.jsx("button",{className:"sm:hidden inline-flex items-center justify-center rounded-md p-2 focus:outline-none focus:ring-0","aria-label":"Toggle menu",onClick:()=>n(p=>!p),children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"h-7 w-7 font-bold",children:c.jsx("path",{d:"M3 6h18M3 12h18M3 18h18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})})})]}),i&&c.jsx("div",{className:"sm:hidden border-t border-white/20",children:c.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-3 flex flex-col gap-4 text-white",children:[c.jsxs("div",{className:"pb-2 border-b border-white/20 mb-2",children:[c.jsx("div",{className:"text-sm text-white/70",children:"Logged in as:"}),c.jsx("div",{className:"font-medium text-white",children:o?.user_metadata?.display_name||o?.email||"User"})]}),c.jsx(it,{to:"/tables",className:"text-white no-underline hover:opacity-90 text-xl font-bold",onClick:()=>n(!1),children:"Mini Leagues"}),c.jsx(it,{to:"/predictions",className:"text-white no-underline hover:opacity-90 text-xl font-bold",onClick:()=>n(!1),children:"Predictions"}),c.jsx(it,{to:"/global",className:"text-white no-underline hover:opacity-90 text-xl font-bold",onClick:()=>n(!1),children:"Leaderboard"}),c.jsx(it,{to:"/how-to-play",className:"text-white no-underline hover:opacity-90 text-xl font-bold",onClick:()=>n(!1),children:"How To Play"}),m&&c.jsx(it,{to:"/admin",className:"text-white no-underline hover:opacity-90 text-xl font-bold",onClick:()=>n(!1),children:"Admin"}),c.jsx("button",{onClick:async()=>{await h(),n(!1)},className:"text-left text-red-200 hover:text-red-100 text-lg font-bold border-t border-white/20 pt-4 mt-2",children:"Sign Out"})]})})]})}),s.pathname!=="/auth"&&c.jsx($y,{}),l&&c.jsx("div",{className:"fixed top-40 left-1/2 transform -translate-x-1/2 z-50 bg-emerald-600 text-white px-8 py-5 rounded-lg shadow-lg w-11/12 max-w-4xl",children:c.jsxs("div",{className:"relative",children:[c.jsxs("div",{className:"text-center pr-10",children:[c.jsx("div",{className:"font-bold text-xl",children:"Welcome to TOTL!"}),c.jsx("div",{className:"text-sm text-emerald-100 mt-1",children:"Your account is now active. Start making predictions!"})]}),c.jsx("button",{onClick:u,className:"absolute top-0 right-0 text-emerald-200 hover:text-white text-2xl font-bold","aria-label":"Dismiss",children:""})]})}),c.jsxs(mg,{children:[c.jsx(on,{path:"/auth",element:c.jsx(Dy,{})}),c.jsx(on,{path:"/",element:c.jsx(tr,{children:c.jsx(Oy,{})})}),c.jsx(on,{path:"/tables",element:c.jsx(tr,{children:c.jsx(vy,{})})}),c.jsx(on,{path:"/league/:code",element:c.jsx(tr,{children:c.jsx(by,{})})}),c.jsx(on,{path:"/predictions",element:c.jsx(tr,{children:c.jsx(Ey,{})})}),c.jsx(on,{path:"/global",element:c.jsx(tr,{children:c.jsx(Ay,{})})}),c.jsx(on,{path:"/how-to-play",element:c.jsx(tr,{children:c.jsx(Iy,{})})}),c.jsx(on,{path:"/create-league",element:c.jsx(tr,{children:c.jsx(Ly,{})})}),c.jsx(on,{path:"/admin",element:c.jsx(tr,{children:c.jsx(Ry,{})})}),c.jsx(on,{path:"*",element:c.jsx(Jh,{to:"/",replace:!0})})]})]})}kp.createRoot(document.getElementById("root")).render(c.jsx(jr.StrictMode,{children:c.jsx(gy,{children:c.jsx(Uy,{})})}));
